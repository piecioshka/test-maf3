// Copyright 2005-2014 Metrological
// All Rights Reserved.
define("MAF.utility.PagerStorageClass",function(){return new MAF.Class({ClassName:"PagerStorageClass",initialize:function(){this.items=[];this.config.data&&(this.addItems([].concat(this.config.data)),this.config.data=null,delete this.config.data)},add:function(a){this.addItems(a)},addItems:function(a){this.items=this.items.concat(a||[]).unique()},remove:function(a,b){a=[].concat(a);b=!0===b?!0:!1;for(var c=0,e=a.length;c<e;c++)!1!==this.contains(a[c],b)&&this.items.splice(itemIndex,1)},contains:function(a,
b){return Object.contains(a,this.items,b)},truncate:function(){this.items=[]}})});define("MAF.utility.Pager",function(){var a={};return new MAF.Class({ClassName:"Pager",eventType:"pageDone",Protected:{filterItems:function(b){var c=[],e=a[this._classID];e.storage.remove("filter");e.allowFiltering&&(e.dataSize=0);e.storage.forEach(function(a,f){var g=b&&"function"===typeOf(b)?b(a,f):a;!1!==g&&void 0!==g&&null!==g&&(b&&"function"===typeOf(b)?c.push(f):c[f]=f,e.allowFiltering&&e.dataSize++)},this);e.storage.set("filter",c)},setData:function(){},getData:function(b,c,e){var d=a[this._classID];
b=b||0;c=c||d.dataSize;e="function"===typeOf(this.config.filter)&&!0===e?!0:!1;var f=[];(d.storage.get("filter")||[]).slice(b,b+c).forEach(function(c,a){f.push(d.storage.get(c))},this);return f}},config:{filter:null},initialize:function(b,c,e,d,f){var g=a[this._classID]={};g.pageSize=b||1;g.fetchSize=c||48;g.loadFactor=f;g.storage=new HashMap;e?(g.fetch={func:e,obj:d},g.allowFiltering=!1):g.allowFiltering=!0},initItems:function(b,c){if(!b)return!1;var e=a[this._classID];e.curIndex=0;e.nextIndex=0;
e.leftIndex=0;e.rightIndex=0;e.paramsMap={};e.storage.clear();b.forEach(function(c,a){e.storage.set(a,c)},this);e.dataSize=c||b.length||0;this.filterItems(this.config.filter)},setFilter:function(b){var c=a[this._classID];"function"===typeOf(b)&&c.allowFiltering?(this.config.filter=b,this.filterItems(this.config.filter)):warn("Filtering needs a function or is not allowed because its set on dynamic paging.")},getItem:function(b){var c=a[this._classID];b=c.storage.get("filter")[b];return c.storage.get(b)},
getItems:function(){return this.getData()},addItems:function(a){a&&"array"===typeOf(a)&&(a=this.getItems().concat(a),this.initItems(a,a.length))},removeItems:function(a,c){var e=this.getItems();e.splice(a,c);this.initItems(e,e.length)},getPageSize:function(){return a[this._classID].pageSize||0},setPageSize:function(b){a[this._classID].pageSize=b||0},getFetchSize:function(){return a[this._classID].fetchSize||0},getItemsSize:function(){return this.getItems().length},getDataSize:function(){return a[this._classID].dataSize||
0},getNumPages:function(){var b=a[this._classID];return 0<b.dataSize?Math.ceil(b.dataSize/b.pageSize):0},getPage:function(b,c,e,d){var f=a[this._classID];b=b||0;e=e||f.pageSize||0;var g=this.getData(b,e,!0);if(g&&0<g.length)return f=new MAF.utility.PagerStorageClass({data:g}),this.fire(this.eventType,{data:f,index:b,wrap:c}),f;var h=Math.floor(b/f.fetchSize),l=Math.max(e,f.fetchSize),g=""+Date.now()+Math.random();e={index:b,wrap:c,add_index:h*f.fetchSize,page_size:e||f.pageSize,quiet:d};d={page:h,
per_page:l,key:g};f.paramsMap||(f.paramsMap={});f.paramsMap[g]=e;f.fetch&&f.fetch.func?f.fetch.func.call(f.fetch.obj,d):this.fire(this.eventType,{data:new MAF.utility.PagerStorageClass({data:[]}),index:b,wrap:c});return null},onGotPage:function(b,c,e){var d=a[this._classID],f=d.paramsMap[b.key];if(!f)return!1;d.paramsMap[b.key]=null;c.forEach(function(c,a){d.storage.set(f.add_index+a,c)},this);this.filterItems(this.config.filter);null!==e&&(d.dataSize=e);b=this.getData(f.index,f.page_size);b=new MAF.utility.PagerStorageClass({data:b});
f.quiet||this.fire(this.eventType,{data:b,index:f.index,wrap:f.wrap});return!0},suicide:function(){delete a[this._classID]}})});define("MAF.utility.BusyIndicators",function(){return{check:function(a){a=a||0;MAF.utility.LoadingOverlay.check()?a=2:0<MAF.utility.WaitIndicator.check()&&(a=1);return MAF.HostEventManager.send("setWaitIndicator",a)}}});define("MAF.utility.LoadingOverlay",function(){return{show:function(){return this.active?this.active:(this.active=!0)&&MAF.utility.BusyIndicators.check()},hide:function(){return this.active?(this.active=!1)||MAF.utility.BusyIndicators.check():this.active},on:function(){return this.show()},off:function(){return this.hide()},toggle:function(){return this.active?this.hide():this.show()},check:function(){return this.active}}});define("MAF.utility.WaitIndicator",function(){var a=0,b=null,c=new Timer(60,function(){MAF.utility.WaitIndicator.police(!0)});return{up:function(){a+=1;b=Date.now();return this.check()},down:function(){a=Math.max(0,a-1);return this.check()},on:function(){return 0<this.tasks?(b=Date.now())&&this.check():this.up()},off:function(){this.hide(!0)},show:function(b){c.start();return this.active||(this.active=!0)&&MAF.utility.BusyIndicators.check(a)},hide:function(c){c&&(a=0);return!this.active||(this.active=
!1)||MAF.utility.BusyIndicators.check(a)},police:function(a){if(a||b+6E4<Date.now())return c.stop(),this.hide(!0)},toggle:function(){return this.active?this.hide(!0):(a=1)&&this.show()},check:function(){0<a?this.show():this.hide();this.police();return a}}});define("MAF.utility.timer",function(){return{setInterval:function(a,b){var c=new Timer;c.onTimerFired=a;c.interval=b/1E3;c.ticking=!0;return c},clearInterval:function(a){a.ticking=!1;delete a},setTimeout:function(a,b){var c=new Timer;c.onTimerFired=function(){this.ticking=!1;a()};c.interval=b/1E3;c.ticking=!0;return c},clearTimeout:function(a){a.ticking=!1;delete a}}});define("MAF.element.Core",function(){return new MAF.Class({ClassName:"BaseCore",Implements:[Library.Storage,Library.DOM,Library.Styles],Protected:{initElement:function(){var a=this.config.element;a&&a.nodeType||(a=a&&a.prototype&&a.prototype.constructor?new a:new this.constructor.prototype.config.element);a.addClass(this.ClassName);this.config.ClassName&&a.addClass(this.config.ClassName);this.config.element=null;delete this.config.element;a.owner=this;this.element=a;this.proxyProperties();this.registerEvents();
this.config.id&&(this.id=this.config.id);!0===this.config.frozen&&this.freeze()},proxyProperties:function(a){a="width height visible frozen hAlign vAlign rotate zOrder hOffset vOffset scrollLeft scrollTop".split(" ").concat(a||[]);MAF.Class.Methods.proxyProperties(this,this.element,a);var b=this.element;getter(this,"outerWidth",function(){return b.width+(b.hOffset||0)});getter(this,"outerHeight",function(){return b.height+(b.vOffset||0)});getter(this,"id",function(){return b.getAttribute("id")});
setter(this,"id",function(c){return b.setAttribute("id",c)})},registerEvents:function(a){if(a){var b=this.dispatchEvents.bindTo(this);[].concat(a).forEach(function(c){c=c&&c.type?c.type:c;var a=!0===c.phase;c&&this.element&&this.element.addEventListener(c,b,a)},this)}},dispatchEvents:emptyFn,getWindow:function(){var a=this.element;return(a=a&&a.window)&&a.owner}},config:{element:Frame},initialize:function(){this.initElement();this.children=[];this.setStyles(this.config.styles)},getView:function(){return this.getWindow()},
show:function(){this.element.visible=!0;return this},hide:function(){this.element.visible=!1;return this},freeze:function(){this.element.updatesEnabled=!1;return this},thaw:function(){this.element.updatesEnabled=!0;return this},animate:function(a){var b;a.events&&a.events.onAnimationEnded?(b=a.events.onAnimationEnded,delete a.events):a.callback&&(b=a.callback);a.callback=function(c){if(b&&b.call)try{b.call(this,c)}catch(a){}try{this.fire("onAnimationEnded",c)}catch(d){}};return this.element&&this.element.animate.call(this,
a)},getAbsolutePosition:function(){var a=this.hOffset,b=this.vOffset,c=this.element.window,e=this.element.parentNode;if(c&&e)for(;e&&c!==e;)a+=e.hOffset,b+=e.vOffset,e=e.parentNode;return{hOffset:a,vOffset:b}}})});define("MAF.element.Container",function(){return new MAF.Class({ClassName:"BaseContainer",Extends:MAF.element.Core,Implements:Library.Themes,Protected:{dispatchEvents:function(a,b){this.parent(a,b);var c=a.type;switch(c){case "navigate":this.fire("onNavigate",a.detail,a);return}this.fire("on"+c.capitalize(),b,a)},registerEvents:function(a){this.parent(["focus","blur","select","navigate"].concat(a||[]))},proxyProperties:function(a){this.parent(a);getter(this,"disabled",function(){return this.element&&
this.element.disabled});setter(this,"disabled",function(a){a=a||!1;this.disabled!==a&&this.element&&(this.fire(a?"onDisable":"onEnable"),this.element.disabled=a,this.fire("onChangeDisabled",{disabled:a}))})}},initialize:function(){this.parent();this.element.wantsFocus=this.config.focus;this.config.content&&(this.content=this.config.content,this.config.content.element?this.adopt(this.content):this.config.content.length&&this.adopt.apply(this,this.content),this.config.content=null,delete this.config.content)},
focus:function(){if(this.element.hasFocus)return!0;this.element.focusable&&this.element.focus();return!0===this.element.hasFocus},suicide:function(){if(this.content){for(this.content=[].concat(this.content);this.content.length;)this.content.pop().suicide();delete this.content}this.parent()}})},{BaseGlow:{applyLayer:function(a,b,c){if(!a.hasClass("BaseGlow"))return a.addClass("BaseGlow"),a},styles:{backgroundColor:"rgba(0,0,0,.5)"}},BaseHighlight:{applyLayer:function(a,b,c){},styles:{}},BaseFocus:{applyLayer:function(a,
b,c){if(!a.hasClass("BaseFocus"))return a.addClass("BaseFocus"),a},styles:{backgroundColor:"red"}},BaseActive:{applyLayer:function(a,b,c){if(!a.hasClass("BaseActive"))return a.addClass("BaseActive"),a},styles:{backgroundColor:"rgba(255,0,0,.5)"}}});define("MAF.element.Image",function(){return new MAF.Class({ClassName:"BaseImage",Extends:MAF.element.Core,Protected:{dispatchEvents:function(a,b){this.parent(a,b);switch(a.type){case "load":this.fire("onLoaded",b,a);this.config.autoShow&&this.show();this.config.manageWaitIndicator&&MAF.utility.WaitIndicator.down();break;case "error":this.config.missingSrc&&(this.element.source=this.config.missingSrc),this.fire("onError",b,a),this.config.autoShow&&this.show(),this.config.manageWaitIndicator&&MAF.utility.WaitIndicator.down()}},
registerEvents:function(a){this.parent(["load","error"].concat(a||[]))},proxyProperties:function(a){this.parent(["source","aspect","srcWidth","srcHeight","remoteAsync"].concat(a||[]));getter(this,"src",function(){return this.element&&this.element.source});setter(this,"src",function(a){this.element&&(this.element.source=a)})}},config:{remoteAsync:!0,element:Image,hideWhileLoading:!1,autoShow:!0,manageWaitIndicator:!1},initialize:function(){this.parent();this.remoteAsync=!1===this.config.remoteAsync?
!1:!0;delete this.config.remoteAsync;this.config.aspect&&(this.aspect=this.config.aspect);this.setSources(this.config)},getSource:function(){return this.source},setSource:function(a){return this.setSources({src:a})},setSources:function(a){a=a||{};var b=this.element,c=this.config,e=a.src||a.source;"missingSrc"in a&&(c.missingSrc=a.missingSrc);e&&(c.manageWaitIndicator&&MAF.utility.WaitIndicator.up(),c.hideWhileLoading&&this.hide());b&&c&&(a=c.src===e,b.source=c.src=e,a&&e&&e!==Image.BLANK&&(this.fire("onLoaded"),
c.autoShow&&this.show(),c.manageWaitIndicator&&MAF.utility.WaitIndicator.down()));delete c.source;return this},aspectSizeMax:function(a){var b,c=this.srcWidth/this.srcHeight;1<=c?(b=a,a/=c):b=a*c;return this.setStyles({width:b,height:a})},aspectSizeMin:function(a){var b,c=this.srcWidth/this.srcHeight;1<=c?b=a*c:(b=a,a/=c);return this.setStyles({width:b,height:a})},aspectSizeBestFit:function(a,b,c){var e=0;"height"===c?(e=b/this.srcHeight,a>this.srcWidth*e?this.setStyles({width:this.srcWidth*e,height:b}):
(e=a/(this.srcWidth*e),this.setStyles({width:a,height:b*e}))):(e=a/this.srcWidth,b>this.srcHeight*e?this.setStyles({width:a,height:this.srcHeight*e}):(e=b/(this.srcHeight*e),this.setStyles({width:a*e,height:b})))},fitToParent:function(){var a=this.element&&this.element.parentNode;return a?this.aspectSizeMax(Math.min(a.width,a.height)):null},fillParent:function(){var a=this.element&&this.element.parentNode;return a?this.aspectSizeMin(Math.max(a.width,a.height)):null}})});define("MAF.element.Text",function(){return new MAF.Class({ClassName:"BaseText",Extends:MAF.element.Core,Protected:{dispatchEvents:function(a,b){this.parent(a,b);switch(a.type){case "change":this.fire("onChange",b,a);break;case "layoutchange":this.fire("onLayoutChange",b,a)}},registerEvents:function(a){this.parent(["change","layoutchange"].concat(a||[]))},proxyProperties:function(a){this.parent("data text size scrolling truncation wrap font lineHeight totalLines maxVisibleLindex visibleLines firstLine anchorStyle color textWidth textHeight".split(" ").concat(a||
[]))}},config:{element:Text},initialize:function(){this.config.anchorStyle=this.config.styles&&this.config.styles.anchorStyle||this.config.anchorStyle;this.config.styles&&delete this.config.styles.anchorStyle;if("wrap"in this.config||"truncation"in this.config)this.config.styles||(this.config.styles={}),this.config.styles.wrap="wrap"in this.config.styles?this.config.styles.wrap:this.config.wrap,this.config.styles.truncation="truncation"in this.config.styles?this.config.styles.truncation:this.config.truncation,
delete this.config.wrap,delete this.config.truncation;this.parent();this.config.anchorStyle&&(this.anchorStyle=this.config.anchorStyle);this.config.visibleLines&&(this.visibleLines=this.config.visibleLines);this.setText(this.config.data||this.config.text||this.config.label)},setText:function(a){this.element.data=a}})});define("MAF.element.TextField",function(){return new MAF.Class({ClassName:"BaseTextField",Extends:MAF.element.Text,Protected:{dispatchEvents:function(a,b){this.parent(a,b);var c=a.type;switch(c){case "navigate":this.fire("onNavigate",a.detail,a);return;case "keydown":this.fire("onKeyDown",{keyCode:a.keyCode,key:a.key,eventPhase:a.eventPhase,type:a.type},a);return;case "cursor":this.fire("onCursor",a.detail,a);return}this.fire("on"+c.capitalize(),b,a)},registerEvents:function(a){this.parent(["focus",
"blur","keydown","navigate","cursor"].concat(a||[]))},proxyProperties:function(a){this.parent(["editable"].concat(a||[]))}},config:{editable:!1},initialize:function(){this.parent();this.editable=this.config.editable}})});define("MAF.element.Button",function(){var a=function(a){this.fire(Boolean(a)?"onSelect":"onSecureFailed",null,arguments.callee.caller.__event__||null)};return new MAF.Class({ClassName:"BaseButton",Extends:MAF.element.Container,Protected:{dispatchEvents:function(b,c){switch(b.type){case "select":if(this.secure){var e=this.config,d=a.bindTo(this);d.__event__=b;e.verifySecure&&e.verifySecure.call?e.verifySecure.call(this,d):this.verifySecure(d);return}}this.parent(b,c)}},config:{focus:!0,secure:!1},
initialize:function(){this.parent();this.setDisabled(!1===this.config.enabled||!0===this.config.disabled);delete this.config.enabled;delete this.config.disabled;this.setSecure(this.config.secure);delete this.config.secure},generateStatePacket:function(a){return Object.merge({focused:this.element.hasFocus,disabled:this.disabled,secure:this.secure},a||{})},inspectStatePacket:function(a,c){if(!this.config.guid||a&&!(this.config.guid in a))return a;var e=a&&a[this.config.guid];"object"===typeOf(e)&&(c?
e.focused&&this.focus():e&&Object.forEach(e,function(c){switch(c){case "disabled":e[c]&&this.setDisabled(!0);break;case "secure":e[c]&&this.setSecure(!0);break;case "label":this.setText&&e[c]&&this.setText(e[c])}},this));return e},appendTo:function(a){this.parent(a)&&this.getSubscriberCount("onBroadcast")&&(a=this.getView())&&a.registerMessageCenterListenerControl(this);return this},setDisabled:function(a){this.disabled=!0===a;this.setStyle("opacity",this.disabled?0.5:null);return this},toggleDisabled:function(){this.setDisabled(!this.disabled);
return this},setSecure:function(a){this.secure=a=!0===a;this.fire("onChangeSecure",{secure:a});return this},toggleSecure:function(){return this.setSecure(!this.secure)},verifySecure:function(a){a(!0)}})});define("MAF.element.GridCell",function(){return new MAF.Class({ClassName:"BaseGridCell",Extends:MAF.element.Container,Protected:{dispatchEvents:function(a){if(this.grid){var b=this.getCellCoordinates();switch(a.type){case "focus":this.grid.getState().hasFocus?this.grid.updateState({focusIndex:this.getCellIndex(),focusCoordinates:{row:b.row,column:b.column}}):this.grid.updateState({hasFocus:!0});this.grid.fire("onFocus",b);break;case "blur":if(!this.element.navigateTo||this.grid.cells&&-1===this.grid.cells.indexOf(this.element.navigateTo.owner))this.grid.updateState({hasFocus:!1}),
this.grid.fire("onBlur",b);break;case "select":this.fire("onSelect",{cellIndex:this.getCellIndex(),dataIndex:this.getCellDataIndex(),dataItem:this.getCellDataItem()})}"select"!==a.type&&this.parent(a)}},proxyProperties:function(a){a="visible frozen hAlign vAlign rotate zOrder hOffset vOffset scrollLeft scrollTop".split(" ").concat(a||[]);MAF.Class.Methods.proxyProperties(this,this.element,a);var b=this.element;getter(this,"width",function(){return this.getCellDimensions().width||b.width});getter(this,
"height",function(){return this.getCellDimensions().height||b.height});getter(this,"outerWidth",function(){return this.width+(b.hOffset||0)});getter(this,"outerHeight",function(){return this.height+(b.vOffset||0)});getter(this,"id",function(){return b.getAttribute("id")});setter(this,"id",function(a){return b.setAttribute("id",a)});getter(this,"disabled",function(){return this.element&&this.element.disabled});setter(this,"disabled",function(a){a=a||!1;this.disabled!==a&&this.element&&(this.fire(a?
"onDisable":"onEnable"),this.element.disabled=a,this.fire("onChangeDisabled",{disabled:a}))})}},config:{focus:!0,element:Item},getCellDimensions:function(){return this.grid&&this.grid.getCellDimensions()||{}},getCellCoordinates:function(){return this.grid&&this.grid.getCellCoordinates(this)},getCellIndex:function(){return this.grid&&this.grid.getCellIndex(this)},getCellDataIndex:function(){return this.grid&&this.grid.getCellDataIndex(this)},getCellDataItem:function(){return this.grid&&this.grid.getCellDataItem(this)},
suicide:function(){delete this.grid;Object.forEach(this,function(a,b){"owner"!==a&&"instance"===typeOf(b)&&b.suicide&&b!==this&&(delete this[a],b.suicide())},this);this.parent()}})});define("MAF.element.Grid",function(){var a=function(){if(this.config.render){var a=this.config.state||{},b={transition:"none"};a.focusCoordinates&&(b.focus=a.focusCoordinates);this.changePage(a.currentPage||0,b)}delete this.config.state},b=function(a){if(!a.defaultPrevented){var b=a&&a.Event&&a.Event.target,d=b&&b.owner,b=a&&a.payload&&a.payload.direction,f=this.config.carousel,g=!1,h=!1,l=this.getState(),k=l.currentPage||0,m=Math.max(0,this.getPageCount()-1),p=l.dataLength,n="horizontal"===this.config.orientation,
d=d&&d.getCellCoordinates(),q=this.pager.getDataSize()||0,p=Math.ceil(p/this.config.columns);switch(b){case "left":if(n&&0===d.column&&(k||f)){if(0<m&&f||k)g=!0;d.column=d.columns-1}break;case "right":if(n&&(k<m||f)){if(0<m&&f||k<m)g=!0;d.column=0}break;case "up":if(!n&&0===d.row)if(k||f){if(0<m&&f||k)g=!0;0===k&&f?(f=Math.ceil(q/this.config.columns)%this.config.rows,f=0===f?this.config.rows-1:f-1,d.row=f):d.row=this.config.rows-1}else h=!0;break;case "down":if(!n&&(q%=this.config.columns*this.config.rows,
q=0!==q?q:this.config.columns,p<d.row+2&&(d.row=this.config.rows-1),d.row===this.config.rows-1))if(k<m||f){if(0<m&&f||k<m)g=!0;d.row=0;k===m-1&&d.column+1>q&&(d.column=q-1)}else h=!0}g&&!l.animating?(this.shift(b,{focus:d}),a.preventDefault(),a.stopPropagation()):n&&"right"===b?Math.min(d.column+1,d.columns-1)!==d.column&&(d.row-=1,d.column=Math.min(d.column+1,d.columns-1),a.preventDefault(),a.stopPropagation(),this.focusCell(d,a)):n||"up"!==b&&"down"!==b||h?(this.setDisabled(!0),this.element.navigate(b)&&
(a.preventDefault(),a.stopPropagation()),this.setDisabled(!1)):(a.stop(),this.focusCell(d,a))}};return new MAF.Class({ClassName:"BaseGrid",Extends:MAF.element.Container,Protected:{registerEvents:function(a){this.parent(["navigateoutofbounds"].concat(a||[]))},dispatchEvents:function(a){this.parent(a);switch(a.type){case "navigateoutofbounds":this.fire("onNavigateOutOfBounds",a.detail,a)}},generateCells:function(a,b){if(0<a&&a>this.cells.length){for(var d=createDocumentFragment(),f={width:1/this.config.columns*
100+"%",height:1/this.config.rows*100+"%"},g=this.cells.length;g<a;g++){var h=this.config.cellCreator.call(this).setStyles(f);h.grid=this;d.appendChild(h.element);h.fire("onAppend",{parent:this.element,owner:this});this.cells.push(h)}this.body.element.appendChild(d)}return this.cells.length},updateWaitIndicator:function(a){if(this.config.manageWaitIndicator)MAF.utility.WaitIndicator["onPageChanged"===a.type?"down":"up"]()},handleFocusEvent:function(a){var b=a.payload;switch(a.type){case "onFocus":a=
this.getCellIndex(b||{row:0,column:0});this.updateState({hasFocus:!0,focusIndex:a,focusCoordinates:{row:b.row,column:b.column}});break;case "onBlur":this.updateState({hasFocus:!1})}},onDataPage:function(a){var b=this.getState(),d=b.pageRequested,f=this.config.cellUpdater,g=a.payload;a=a.type;var h=g&&g.index;if(g&&a===this.pager.eventType&&g.data&&d&&h===d.index){var l=g.data.items&&g.data.items.length&&[].concat(g.data.items)||[],k=l.length;void 0===b.focusIndex&&this.updateState({focusIndex:-1});
this.body.freeze();if(this.cells&&0<this.cells.length&&d&&d.options&&d.options.refresh)for(;this.cells.length;)this.cells.pop().suicide();0<this.generateCells(k)&&this.cells.forEach(function(a,c){c<k?(a.show(),f.call(this,a,l[c])):a.hide()},this);this.body.thaw();this.updateState({startIndex:d.index,currentPage:d.index/this.getCellCount(),dataLength:k});g=d.options.focus;a=this.getCellIndex(g);if(g&&b.hasFocus){for(b=this.cells.length;a>=k&&b;){switch(d.options.direction){case "right":g.column&&g.row?
g.row-=1:g.row?(g.row-=1,g.column=this.config.columns-1):g.column-=1;a=this.getCellIndex(g);break;case "left":g.row=Math.max(0,g.row-1);a=this.getCellIndex(g);break;case "up":g.column=Math.max(0,g.column-1);a=this.getCellIndex(g);break;case "down":g.row&&g.column?g.column-=1:g.column?(g.row-=1,g.column=this.config.row-1):g.row-=1;a=this.getCellIndex(g);break;default:a--,a=this.getCellIndex(a)}b--}this.focusCell(a)}this.fire("onPageChanged",this.updateState({pageChanging:!1}))}}},config:{rows:1,columns:1,
orientation:"horizontal",carousel:!1,inverted:!1,render:!0,manageWaitIndicator:!0,animate:!1,animation:{duration:400,transition:"slide",direction:"left",ease:0}},initialize:function(){this.config.orientation="vertical"===this.config.orientation?"vertical":"horizontal";this.config.rows=this.config.rows||1;this.config.columns=this.config.columns||1;this.parent();this.cells=[];if(this.config.pager)this.pager=this.config.pager,delete this.config.pager;else{var c=this.config.dataset||this.config.dataSet||
[],e=this.config.rows*this.config.columns;this.pager=new MAF.utility.Pager(e,this.config.payloadSize||e);this.pager.initItems(c,c.length)}this.body=(new MAF.element.Core({element:List,styles:{width:"inherit",height:"inherit",overflow:"inherit"}})).appendTo(this);this.element.innerNavigation=!0;this.generateCells(Math.min(this.pager.getDataSize(),this.pager.getPageSize()));this.onDataPage.subscribeTo(this.pager,this.pager.eventType,this);this.updateWaitIndicator.subscribeTo(this,["onChangePage","onPageChanged"],
this);this.handleFocusEvent.subscribeTo(this,["onFocus","onBlur"],this);b.subscribeTo(this,"onNavigateOutOfBounds",this);a.subscribeOnce(this,"onAppend",this);this.store("state",{});delete this.config.dataset;delete this.config.dataSet},setFilter:function(a){this.pager&&(this.pager.setFilter(a),this.changePage(0))},appendTo:function(a){this.parent(a)&&this.getSubscriberCount("onBroadcast")&&(a=this.getView())&&a.registerMessageCenterListenerControl(this);return this},changeDataset:function(a,b,d){a=
a&&a.length?a:[];d=d&&d>a.length?d:a.length;this.pager.initItems(a,d);b&&this.updateState({row:null,column:null});a=this.getState();this.changePage(b?0:a.currentPage||0,{transition:"none",refresh:b||!1,focus:a.hasFocus&&a.focusCoordinates});this.fire("onDatasetChanged");return this},getDataItem:function(a){return this.pager.getItem(a)},getState:function(){return this.retrieve("state")},updateState:function(a){a=Object.merge(this.getState(),a||{});this.store("state",a);this.fire("onStateUpdated",a);
return a},releaseFocus:function(a,b){return!0},shift:function(a,b){var d=!1,f=this.getState().currentPage||0,g=Math.max(0,this.pager.getNumPages()-1),h=this.config.carousel;b=b||{};switch(a){case "first":d=0;b.direction=h&&f>g/2?"right":"left";break;case "last":d=g;b.direction=h&&f>g/2?"right":"left";break;case "up":d=h?f-1:Math.max(f-1,0);b.direction="up";break;case "down":d=h?f+1:Math.min(f+1,g);b.direction="down";break;case "left":d=h?f-1:Math.max(f-1,0);b.direction="right";break;case "right":d=
h?f+1:Math.min(f+1,g),b.direction="left"}!1!==d&&this.changePage(d,b)},changePage:function(a,b){var d=this.getCellCount(),f=this.getState(),d=this.normalizeIndex((a||0)*d);if(a!==f.currentPage||b&&b.refresh)f=this.updateState({pageRequested:{index:d,options:b||{}},pageChanging:!0}),this.getPageCount()&&this.fire("onChangePage",f);this.pager.getPage(d)},normalizeIndex:function(a){var b=this.pager.getPageSize(),d=this.pager.getDataSize(),f=Math.ceil(d/b),g=f*b,h=this.config.carousel;a=isNaN(a)?0:a;
return b>=d?0:a>=d?h?Math.floor(a%g/b)*b:f*b:0>a?h?Math.floor((a%g+g)%g/b)*b:0:Math.floor(a/b)*b},getCellCount:function(){return this.config.rows*this.config.columns},getVisibleCellCount:function(){return this.cells&&this.cells.filter(function(a){return a&&a.visible}).length||this.cells.length},getPageCount:function(){return this.pager.getNumPages()},getCurrentPage:function(){return this.getState().currentPage||0},getStartIndex:function(){return this.getState().startIndex},getFocusIndex:function(){var a=
document.activeElement,b=this.getState(),d=-1;a&&this.cells&&(d=this.cells.indexOf(a.owner));-1===d&&void 0!==b.focusIndex&&(d=b.focusIndex);return d},getFocusCoordinates:function(){return this.getState().focusCoordinates},focus:function(){this.getVisibleCellCount()&&(this.updateState({hasFocus:!0}),this.focusCell(this.getFocusCoordinates()||{row:0,column:0}))},focusCell:function(a){var b=this.getState(),d=b.focusIndex;a=this.getCellIndex(a||{row:0,column:0});var f=this.getVisibleCellCount();if(f&&
-1!==a&&b.hasFocus)return a=Math.min(f-1,a),d!=a&&this.blurCell(d),-1<a&&this.cells&&this.cells[a]&&this.cells[a].element.focus(),d=this.getCellCoordinates(a),this.updateState({focusIndex:a,focusCoordinates:{row:d.row,column:d.column}}),this},blurCell:function(a){a=-1<parseInt(a,10)?a:this.getState().focusCoordinates;a=this.getCellIndex(a);-1<a&&this.cells[a]&&this.cells[a].element.blur();return this},getCellDimensions:function(){return{width:Math.floor(this.width/this.config.columns),height:Math.floor(this.height/
this.config.rows)}},getCellCoordinates:function(a){var b=this.cells.indexOf(a);try{-1==b&&(b=parseInt(a,10))}catch(d){}return-1==b?!1:{row:Math.floor(b/this.config.columns),column:b%this.config.columns,rows:this.config.rows,columns:this.config.columns}},getCellIndex:function(a,b){var d=this.cells.indexOf(a),f=this.config.columns;if(-1<parseInt(d,10))return d;"object"===typeOf(a)?"row"in a&&"column"in a&&(d=(a.row||0)*f+(a.column||0)):-1<parseInt(b,10)?d=a*f+b:-1<parseInt(a,10)&&(d=a);return-1<d?d:
-1},getCellDataIndex:function(a){var b=this.getState(),b=b.pageRequested&&b.pageRequested.index;a=this.getCellIndex(a);return-1<parseInt(b,10)&&-1<a?b+a:!1},getCellDataItem:function(a){a=this.getCellDataIndex(a);return-1<parseInt(a,10)&&this.pager.getItem(a)},attachAccessory:function(a){a&&a.attachToSource&&a.attachToSource(this);return this},attachAccessories:function(){Array.slice(arguments).forEach(this.attachAccessory,this);return this},inspectStatePacket:function(a,b){if(!this.config.guid||a&&
!(this.config.guid in a))return a;var d=a&&a[this.config.guid],f=typeOf(d);if("null"===f||"undefined"===f)return a;b?d.focused&&(this.getVisibleCellCount()?(this.updateState({hasFocus:!0}),this.focusCell(d.state.focusCoordinates||{row:0,column:0})):(f=this.getView())&&f.resetFocus()):"object"==f&&d.state&&this.changePage(d.state.currentPage||0,{transition:"none",focus:!1});return d},setDisabled:function(a){this.element.allowNavigation=!a;return this},generateStatePacket:function(a){var b=this.getState();
return Object.merge({state:b,focused:b.hasFocus},a||{})},suicide:function(){if(this.cells){for(;this.cells.length;)this.cells.pop().suicide();delete this.cells}this.body&&(this.body.suicide(),delete this.body);delete this.pager;this.parent()}})});define("MAF.element.TextGrid",function(){return new MAF.Class({ClassName:"BaseTextGrid",Extends:MAF.element.Text,Protected:{dispatchEvents:function(a,b){"layoutchange"===a.type&&this.fire("onStateUpdated",{currentPage:this.getCurrentPage(),pageCount:this.getPageCount()},a);this.parent(a,b)}},initialize:function(){this.parent();this.element.allowChangeEvents=!0;this.element.textPaging=!0},getCurrentPage:function(){return Math.ceil(this.getPageCount()*this.firstLine/this.totalLines)},getPageCount:function(){return Math.floor(this.totalLines/
this.visibleLines)},getStartLine:function(a){return a*this.visibleLines},shift:function(a){var b=this.getCurrentPage(),c=this.getPageCount(),e;switch(a){case "left":e=Math.max(b-1,0);break;case "right":e=Math.min(b+1,c-1)}this.firstLine=this.getStartLine(e);return this},attachAccessory:function(a){a&&a.attachToSource&&a.attachToSource(this);return this},attachAccessories:function(){Array.slice(arguments).forEach(this.attachAccessory,this);return this},setText:function(a){this.firstLine=0;this.parent(a)}})});define("MAF.element.Carousel",function(){var a=function(a){var c=this.config.orientation,e=this.config.carousel,d=this.cells.length,f=a&&a.payload&&a.payload.direction;f&&(e&&0<d&&("horizontal"===c&&"right"===f||"vertical"===c&&"down"===f)?this.cells[0].focus():e&&0<d&&("horizontal"===c&&"left"===f||"vertical"===c&&"up"===f)?this.cells[d-1].focus():(this.setDisabled(!0),this.element.navigate(f),this.setDisabled(!1)),a.stopPropagation(),a.preventDefault())};return new MAF.Class({ClassName:"BaseCarousel",
Extends:MAF.element.Container,Protected:{registerEvents:function(a){this.parent(["navigateoutofbounds"].concat(a||[]))},dispatchEvents:function(a){this.parent(a);switch(a.type){case "navigateoutofbounds":this.fire("onNavigateOutOfBounds",a.detail,a)}},generateCells:function(a,c){for(;this.cells.length;)this.cells.pop().suicide();var e=this.config.cellUpdater;if(0<a&&a>this.cells.length){var d=createDocumentFragment(),f={width:1/this.config.columns*100,height:1/this.config.rows*100};"horizontal"===
this.config.orientation&&(f.width/=this.getPageCount());f.width+="%";f.height+="%";for(var g=this.cells.length;g<a;g++){var h=this.config.cellCreator.call(this).setStyles(f);h.carousel=this;d.appendChild(h.element);h.fire("onAppend",{parent:this.element,owner:this});this.cells.push(h);e.call(this,h,c[g])}this.body.element.appendChild(d)}return this.cells.length},handleFocusEvent:function(a){var c=a.payload;switch(a.type){case "onFocus":a=this.getCellIndex(c||{row:0,column:0});this.updateState({hasFocus:!0,
focusIndex:a,focusCoordinates:{row:c.row,column:c.column}});break;case "onBlur":this.updateState({hasFocus:!1})}}},config:{rows:1,columns:1,orientation:"horizontal",carousel:!0},initialize:function(){this.config.orientation="vertical"===this.config.orientation?"vertical":"horizontal";this.config.rows=this.config.rows||1;this.config.columns=this.config.columns||1;this.parent();this.cells=[];getter(this,"hasFocus",function(){var a=document.activeElement;return a&&this.cells&&-1<this.cells.indexOf(a)||
!1});this.body=(new MAF.element.Core({element:List,styles:{width:"inherit",height:"inherit",overflow:"inherit"}})).appendTo(this);this.element.innerNavigation=!0;this.handleFocusEvent.subscribeTo(this,["onFocus","onBlur"],this);a.subscribeTo(this,"onNavigateOutOfBounds",this);this.store("state",{});var b=this.config.dataset||this.config.dataSet;b&&0<b.length&&(this.changeDataset(this.config.dataset||this.config.dataSet),delete this.config.dataset,delete this.config.dataSet)},focus:function(){0<this.cells.length&&
!this.hasFocus&&this.cells[0].focus()},getCellCount:function(){return this.config.rows*this.config.columns},getVisibleCellCount:function(){return this.cells&&this.cells.filter(function(a){return a&&a.visible}).length||this.cells.length},setDisabled:function(a){this.element.allowNavigation=!a;return this},getCurrentPage:function(){},getPageCount:function(){var a=this.retrieve("data",a)||[];return Math.ceil(a.length/this.getCellCount())},getStartIndex:function(){},getFocusIndex:function(){},setFilter:function(){},
getCellCoordinates:function(a,c){this.cells.indexOf(a);return 0},getCellDimensions:function(){return{width:Math.floor(this.width/this.config.columns),height:Math.floor(this.height/this.config.rows)}},getCellIndex:function(a){return this.cells.indexOf(a)},getCellDataIndex:function(a){return this.getCellIndex(a)},getCellDataItem:function(a){var c=this.retrieve("data"),e=c.length;a=this.getCellDataIndex(a);return-1<a&&a<e?c[a]:null},getState:function(){return this.retrieve("state")},updateState:function(a){a=
Object.merge(this.getState(),a||{});this.store("state",a);this.fire("onStateUpdated",a);return a},changeDataset:function(a){a=a||[];this.store("data",a);this.generateCells(a.length,a);"horizontal"===this.config.orientation&&this.body.setStyle("width",this.width*this.getPageCount());this.fire("onDatasetChanged");return this},suicide:function(){if(this.cells){for(;this.cells.length;)this.cells.pop().suicide();delete this.cells}this.body&&(this.body.suicide(),delete this.body);this.parent()}})});define("MAF.element.CarouselCell",function(){return new MAF.Class({ClassName:"BaseCarouselCell",Extends:MAF.element.Container,Protected:{dispatchEvents:function(a){if(this.carousel){this.getCellCoordinates();switch(a.type){case "focus":this.carousel.getState().hasFocus?this.carousel.updateState({focusIndex:this.getCellIndex()}):this.carousel.fire("onFocus",this);break;case "blur":this.carousel&&(!this.element.navigateTo||this.carousel.cells&&-1===this.carousel.cells.indexOf(this.element.navigateTo.owner))&&
this.carousel.fire("onBlur",this);break;case "select":this.fire("onSelect",{cellIndex:this.getCellIndex(),dataIndex:this.getCellDataIndex(),dataItem:this.getCellDataItem()})}"select"!==a.type&&this.parent(a)}},proxyProperties:MAF.element.GridCell.prototype.proxyProperties},config:{focus:!0,element:Item},getCellDimensions:function(){return this.carousel&&this.carousel.getCellDimensions()||{}},getCellCoordinates:function(){return this.carousel&&this.carousel.getCellCoordinates(this)},getCellIndex:function(){return this.carousel&&
this.carousel.getCellIndex(this)},getCellDataIndex:function(){return this.carousel&&this.carousel.getCellDataIndex(this)},getCellDataItem:function(){return this.carousel&&this.carousel.getCellDataItem(this)},suicide:function(){delete this.carousel;Object.forEach(this,function(a,b){"owner"!==a&&"instance"===typeOf(b)&&b.suicide&&b!==this&&(delete this[a],b.suicide())},this);this.parent()}})});define("MAF.keyboard.ReuseKeyboard",function(a){var b={Tables:{CharacterDefinitions:{"char-a":{label:"a",value:"a",unicode:"a"},"char-A":{label:"A",value:"A",unicode:"A"},"char-agrave":{label:"\u00e0",value:"\u00e0",unicode:"\u00e0"},"char-aacute":{label:"\u00e1",value:"\u00e1",unicode:"\u00e1"},"char-acirc":{label:"\u00e2",value:"\u00e2",unicode:"\u00e2"},"char-auml":{label:"\u00e4",value:"\u00e4",unicode:"\u00e4"},"char-aring":{label:"\u00e5",value:"\u00e5",unicode:"\u00e5"},"char-atilde":{label:"\u00e3",
value:"\u00e3",unicode:"\u00e3"},"char-Agrave":{label:"\u00c0",value:"\u00c0",unicode:"\u00c0"},"char-Aacute":{label:"\u00c1",value:"\u00c1",unicode:"\u00c1"},"char-Acirc":{label:"\u00c2",value:"\u00c2",unicode:"\u00c2"},"char-Auml":{label:"\u00c4",value:"\u00c4",unicode:"\u00c4"},"char-Aring":{label:"\u00c5",value:"\u00c5",unicode:"\u00c5"},"char-Atilde":{label:"\u00c3",value:"\u00c3",unicode:"\u00c3"},"char-aelig":{label:"\u00e6",value:"\u00e6",unicode:"\u00e6"},"char-AElig":{label:"\u00c6",value:"\u00c6",
unicode:"\u00c6"},"char-b":{label:"b",value:"b",unicode:"b"},"char-B":{label:"B",value:"B",unicode:"B"},"char-c":{label:"c",value:"c",unicode:"c"},"char-C":{label:"C",value:"C",unicode:"C"},"char-ccedil":{label:"\u00e7",value:"\u00e7",unicode:"\u00e7"},"char-Ccedil":{label:"\u00c7",value:"\u00c7",unicode:"\u00c7"},"char-d":{label:"d",value:"d",unicode:"d"},"char-D":{label:"D",value:"D",unicode:"D"},"char-e":{label:"e",value:"e",unicode:"e"},"char-E":{label:"E",value:"E",unicode:"E"},"char-egrave":{label:"\u00e8",
value:"\u00e8",unicode:"\u00e8"},"char-eacute":{label:"\u00e9",value:"\u00e9",unicode:"\u00e9"},"char-ecirc":{label:"\u00ea",value:"\u00ea",unicode:"\u00ea"},"char-euml":{label:"\u00eb",value:"\u00eb",unicode:"\u00eb"},"char-Egrave":{label:"\u00c8",value:"\u00c8",unicode:"\u00c8"},"char-Eacute":{label:"\u00c9",value:"\u00c9",unicode:"\u00c9"},"char-Ecirc":{label:"\u00ca",value:"\u00ca",unicode:"\u00ca"},"char-Euml":{label:"\u00cb",value:"\u00cb",unicode:"\u00cb"},"char-f":{label:"f",value:"f",unicode:"f"},
"char-F":{label:"F",value:"F",unicode:"F"},"char-g":{label:"g",value:"g",unicode:"g"},"char-G":{label:"G",value:"G",unicode:"G"},"char-h":{label:"h",value:"h",unicode:"h"},"char-H":{label:"H",value:"H",unicode:"H"},"char-i":{label:"i",value:"i",unicode:"i"},"char-I":{label:"I",value:"I",unicode:"I"},"char-igrave":{label:"\u00ec",value:"\u00ec",unicode:"\u00ec"},"char-iacute":{label:"\u00ed",value:"\u00ed",unicode:"\u00ed"},"char-icirc":{label:"\u00ee",value:"\u00ee",unicode:"\u00ee"},"char-iuml":{label:"\u00ef",
value:"\u00ef",unicode:"\u00ef"},"char-Igrave":{label:"\u00cc",value:"\u00cc",unicode:"\u00cc"},"char-Iacute":{label:"\u00cd",value:"\u00cd",unicode:"\u00cd"},"char-Icirc":{label:"\u00ce",value:"\u00ce",unicode:"\u00ce"},"char-Iuml":{label:"\u00cf",value:"\u00cf",unicode:"\u00cf"},"char-j":{label:"j",value:"j",unicode:"j"},"char-J":{label:"J",value:"J",unicode:"J"},"char-k":{label:"k",value:"k",unicode:"k"},"char-K":{label:"K",value:"K",unicode:"K"},"char-l":{label:"l",value:"l",unicode:"l"},"char-L":{label:"L",
value:"L",unicode:"L"},"char-m":{label:"m",value:"m",unicode:"m"},"char-M":{label:"M",value:"M",unicode:"M"},"char-n":{label:"n",value:"n",unicode:"n"},"char-N":{label:"N",value:"N",unicode:"N"},"char-ntilde":{label:"\u00f1",value:"\u00f1",unicode:"\u00f1"},"char-Ntilde":{label:"\u00d1",value:"\u00d1",unicode:"\u00d1"},"char-o":{label:"o",value:"o",unicode:"o"},"char-O":{label:"O",value:"O",unicode:"O"},"char-ograve":{label:"\u00f2",value:"\u00f2",unicode:"\u00f2"},"char-oacute":{label:"\u00f3",value:"\u00f3",
unicode:"\u00f3"},"char-ocirc":{label:"\u00f4",value:"\u00f4",unicode:"\u00f4"},"char-ouml":{label:"\u00f6",value:"\u00f6",unicode:"\u00f5"},"char-oslash":{label:"\u00f8",value:"\u00f8",unicode:"\u00f8"},"char-otilde":{label:"\u00f5",value:"\u00f5",unicode:"\u00f6"},"char-Ograve":{label:"\u00d2",value:"\u00d2",unicode:"\u00d2"},"char-Oacute":{label:"\u00d3",value:"\u00d3",unicode:"\u00d3"},"char-Ocirc":{label:"\u00d4",value:"\u00d4",unicode:"\u00d4"},"char-Ouml":{label:"\u00d6",value:"\u00d6",unicode:"\u00d5"},
"char-Oslash":{label:"\u00d8",value:"\u00d8",unicode:"\u00d8"},"char-Otilde":{label:"\u00d5",value:"\u00d5",unicode:"\u00d6"},"char-oelig":{label:"\u0153",value:"\u0153",unicode:"\u0153"},"char-OElig":{label:"\u0152",value:"\u0152",unicode:"\u0152"},"char-p":{label:"p",value:"p",unicode:"p"},"char-P":{label:"P",value:"P",unicode:"P"},"char-q":{label:"q",value:"q",unicode:"q"},"char-Q":{label:"Q",value:"Q",unicode:"Q"},"char-r":{label:"r",value:"r",unicode:"r"},"char-R":{label:"R",value:"R",unicode:"R"},
"char-s":{label:"s",value:"s",unicode:"s"},"char-S":{label:"S",value:"S",unicode:"S"},"char-t":{label:"t",value:"t",unicode:"t"},"char-T":{label:"T",value:"T",unicode:"T"},"char-u":{label:"u",value:"u",unicode:"u"},"char-U":{label:"U",value:"U",unicode:"U"},"char-ugrave":{label:"\u00f9",value:"\u00f9",unicode:"\u00f9"},"char-uacute":{label:"\u00fa",value:"\u00fa",unicode:"\u00fa"},"char-ucirc":{label:"\u00fb",value:"\u00fb",unicode:"\u00fb"},"char-uuml":{label:"\u00fc",value:"\u00fc",unicode:"\u00fc"},
"char-Ugrave":{label:"\u00d9",value:"\u00d9",unicode:"\u00d9"},"char-Uacute":{label:"\u00da",value:"\u00da",unicode:"\u00da"},"char-Ucirc":{label:"\u00db",value:"\u00db",unicode:"\u00db"},"char-Uuml":{label:"\u00dc",value:"\u00dc",unicode:"\u00dc"},"char-v":{label:"v",value:"v",unicode:"v"},"char-V":{label:"V",value:"V",unicode:"V"},"char-w":{label:"w",value:"w",unicode:"w"},"char-W":{label:"W",value:"W",unicode:"W"},"char-x":{label:"x",value:"x",unicode:"x"},"char-X":{label:"X",value:"X",unicode:"X"},
"char-y":{label:"y",value:"y",unicode:"y"},"char-Y":{label:"Y",value:"Y",unicode:"Y"},"char-yuml":{label:"\u00ff",value:"\u00ff",unicode:"\u00ff"},"char-yacute":{label:"\u00fd",value:"\u00fd",unicode:"\u00fd"},"char-Yacute":{label:"\u00dd",value:"\u00dd",unicode:"\u00dd"},"char-z":{label:"z",value:"z",unicode:"z"},"char-Z":{label:"Z",value:"Z",unicode:"Z"},"char-eth":{label:"\u00f0",value:"\u00f0",unicode:"\u00f0"},"char-thorn":{label:"\u00fe",value:"\u00fe",unicode:"\u00fe"},"char-ETH":{label:"\u00d0",
value:"\u00d0",unicode:"\u00d0"},"char-THORN":{label:"\u00de",value:"\u00de",unicode:"\u00de"},"char-szlig":{label:"\u00df",value:"\u00df",unicode:"\u00df"},"char-scaron":{label:"\u0161",value:"\u0161",unicode:"\u0161"},"char-Scaron":{label:"\u0160",value:"\u0160",unicode:"\u0160"},"char-excl":{label:"!",value:"!",unicode:"!"},"char-iexcl":{label:"\u00a1",value:"\u00a1",unicode:"\u00a1"},"char-quest":{label:"?",value:"?",unicode:"?"},"char-iquest":{label:"\u00bf",value:"\u00bf",unicode:"\u00bf"},
"char-dollar":{label:"$",value:"$",unicode:"$"},"char-euro":{label:"\u20ac",value:"\u20ac",unicode:"\u20ac"},"char-pound":{label:"\u00a3",value:"\u00a3",unicode:"\u00a3"},"char-yen":{label:"\u00a5",value:"\u00a5",unicode:"\u00a5"},"char-atsign":{label:"@",value:"@",unicode:"@"},"char-colon":{label:":",value:":",unicode:":"},"char-semicolon":{label:";",value:";",unicode:";"},"char-caret":{label:"^",value:"^",unicode:"^"},"char-lt":{label:"<",value:"<",unicode:"<"},"char-gt":{label:">",value:">",unicode:">"},
"char-equal":{label:"=",value:"=",unicode:"="},"char-number":{label:"#",value:"#",unicode:"#"},"char-apos":{label:"'",value:"'",unicode:"'"},"char-quot":{label:'"',value:'"',unicode:'"'},"char-amp":{label:"&",value:"&",unicode:"&"},"char-lparen":{label:"(",value:"(",unicode:"("},"char-rparen":{label:")",value:")",unicode:")"},"char-lcurly":{label:"{",value:"{",unicode:"{"},"char-rcurly":{label:"}",value:"}",unicode:"}"},"char-lsquare":{label:"[",value:"[",unicode:"["},"char-rsquare":{label:"]",value:"]",
unicode:"]"},"char-vertline":{label:"|",value:"|",unicode:"|"},"char-grave":{label:"`",value:"`",unicode:"`"},"char-tilde":{label:"~",value:"~",unicode:"~"},"char-asterisk":{label:"*",value:"*",unicode:"*"},"char-comma":{label:",",value:",",unicode:","},"char-hyphen":{label:"-",value:"-",unicode:"-"},"char-underscore":{label:"_",value:"_",unicode:"_"},"char-period":{label:".",value:".",unicode:"."},"char-plus":{label:"+",value:"+",unicode:"+"},"char-percent":{label:"%",value:"%",unicode:"%"},"char-divide":{label:"\u00f7",
value:"\u00f7",unicode:"\u00f7"},"char-doubledagger":{label:"\u2021",value:"\u2021",unicode:"\u2021"},"char-degree":{label:"\u00b0",value:"\u00b0",unicode:"\u00b0"},"char-bullet":{label:"\u2022",value:"\u2022",unicode:"\u2022"},"char-ellipsis":{label:"\u2026",value:"\u2026",unicode:"\u2026"},"char-slash":{label:"/",value:"/",unicode:"/"},"char-backslash":{label:"\\",value:"\\",unicode:"\\"},"digit-0":{label:"0",value:"0",unicode:"0"},"digit-1":{label:"1",value:"1",unicode:"1"},"digit-2":{label:"2",
value:"2",unicode:"2"},"digit-3":{label:"3",value:"3",unicode:"3"},"digit-4":{label:"4",value:"4",unicode:"4"},"digit-5":{label:"5",value:"5",unicode:"5"},"digit-6":{label:"6",value:"6",unicode:"6"},"digit-7":{label:"7",value:"7",unicode:"7"},"digit-8":{label:"8",value:"8",unicode:"8"},"digit-9":{label:"9",value:"9",unicode:"9"},"char-space":{label:"space",value:" ",unicode:" "},"char-uspace":{label:"_",value:" ",unicode:" "},"numpad-0":{label:"0",sublabel:"",value:"0"},"numpad-1":{label:"1",sublabel:"",
value:"1"},"numpad-2":{label:"2",sublabel:"abc",value:"2"},"numpad-3":{label:"3",sublabel:"def",value:"3"},"numpad-4":{label:"4",sublabel:"ghi",value:"4"},"numpad-5":{label:"5",sublabel:"jkl",value:"5"},"numpad-6":{label:"6",sublabel:"mno",value:"6"},"numpad-7":{label:"7",sublabel:"pqrs",value:"7"},"numpad-8":{label:"8",sublabel:"tuv",value:"8"},"numpad-9":{label:"9",sublabel:"wxyz",value:"9"}},KeyDefinitions:{"key-a":{normal:"char-a",shift:"char-A",extended:"char-a char-agrave char-aacute char-acirc char-auml char-aring char-aelig".split(" "),
shiftextended:"char-A char-Agrave char-Aacute char-Acirc char-Auml char-Aring char-AElig".split(" ")},"key-b":{normal:"char-b",shift:"char-B"},"key-c":{normal:"char-c",shift:"char-C",extended:["char-c","char-ccedil"],shiftextended:["char-C","char-Ccedil"]},"key-d":{normal:"char-d",shift:"char-D",extended:["char-d","char-eth","char-thorn"],shiftextended:["char-D","char-ETH","char-THORN"]},"key-e":{normal:"char-e",shift:"char-E",extended:["char-e","char-egrave","char-eacute","char-ecirc","char-euml"],
shiftextended:["char-E","char-Egrave","char-Eacute","char-Ecirc","char-Euml"]},"key-f":{normal:"char-f",shift:"char-F"},"key-g":{normal:"char-g",shift:"char-G"},"key-h":{normal:"char-h",shift:"char-H"},"key-i":{normal:"char-i",shift:"char-I",extended:["char-i","char-igrave","char-iacute","char-icirc","char-iuml"],shiftextended:["char-I","char-Igrave","char-Iacute","char-Icirc","char-Iuml"]},"key-j":{normal:"char-j",shift:"char-J"},"key-k":{normal:"char-k",shift:"char-K"},"key-l":{normal:"char-l",
shift:"char-L"},"key-m":{normal:"char-m",shift:"char-M"},"key-n":{normal:"char-n",shift:"char-N",extended:["char-ntilde"],shiftextended:["char-Ntilde"]},"key-o":{normal:"char-o",shift:"char-O",extended:"char-o char-ograve char-oacute char-ocirc char-ouml char-oslash char-otilde char-oelig".split(" "),shiftextended:"char-O char-Ograve char-Oacute char-Ocirc char-Ouml char-Oslash char-Otilde char-OElig".split(" ")},"key-p":{normal:"char-p",shift:"char-P"},"key-q":{normal:"char-q",shift:"char-Q"},"key-r":{normal:"char-r",
shift:"char-R"},"key-s":{normal:"char-s",shift:"char-S",extended:["char-s","char-szlig"],shiftextended:["char-S","char-szlig"]},"key-t":{normal:"char-t",shift:"char-T"},"key-u":{normal:"char-u",shift:"char-U",extended:["char-u","char-ugrave","char-uacute","char-ucirc","char-uuml"],shiftextended:["char-U","char-Ugrave","char-Uacute","char-Ucirc","char-Uuml"]},"key-v":{normal:"char-v",shift:"char-V"},"key-w":{normal:"char-w",shift:"char-W"},"key-x":{normal:"char-x",shift:"char-X"},"key-y":{normal:"char-y",
shift:"char-Y",extended:["char-y","char-yacute","char-yuml"],shiftextended:["char-Y","char-Yacute"]},"key-z":{normal:"char-z",shift:"char-Z"},"key-currency":{normal:"char-dollar",shift:"char-dollar",extended:["char-dollar","char-euro","char-pound","char-yen"],shiftextended:["char-dollar","char-euro","char-pound","char-yen"]},"key-currency2":{normal:"char-euro",shift:"char-euro",extended:["char-dollar","char-euro","char-pound","char-yen"],shiftextended:["char-dollar","char-euro","char-pound","char-yen"]},
"key-excl":{normal:"char-excl",shift:"char-excl",extended:["char-excl","char-iexcl"],shiftextended:["char-excl","char-iexcl"]},"key-quest":{normal:"char-quest",shift:"char-quest",extended:["char-quest","char-iquest"],shiftextended:["char-quest","char-iquest"]},"key-lparen":{normal:"char-lparen",shift:"char-lparen"},"key-rparen":{normal:"char-rparen",shift:"char-rparen"},"key-lcurly":{normal:"char-lcurly",shift:"char-lcurly"},"key-rcurly":{normal:"char-rcurly",shift:"char-rcurly"},"key-lsquare":{normal:"char-lsquare",
shift:"char-lsquare"},"key-rsquare":{normal:"char-rsquare",shift:"char-rsquare"},"key-atsign":{normal:"char-atsign",shift:"char-atsign"},"key-period":{normal:"char-period",shift:"char-period"},"key-underscore":{normal:"char-underscore",shift:"char-underscore"},"key-comma":{normal:"char-comma",shift:"char-comma"},"key-semicolon":{normal:"char-semicolon",shift:"char-semicolon"},"key-colon":{normal:"char-colon",shift:"char-colon"},"key-caret":{normal:"char-caret",shift:"char-caret"},"key-plus":{normal:"char-plus",
shift:"char-plus"},"key-tilde":{normal:"char-tilde",shift:"char-tilde"},"key-grave":{normal:"char-grave",shift:"char-grave"},"key-vertline":{normal:"char-vertline",shift:"char-vertline"},"key-amp":{normal:"char-amp",shift:"char-amp"},"key-percent":{normal:"char-percent",shift:"char-percent"},"key-divide":{normal:"char-divide",shift:"char-divide"},"key-hash":{normal:"char-number",shift:"char-number"},"key-doubledagger":{normal:"char-doubledagger",shift:"char-doubledagger"},"key-degree":{normal:"char-degree",
shift:"char-degree"},"key-lt":{normal:"char-lt",shift:"char-lt"},"key-gt":{normal:"char-gt",shift:"char-gt"},"key-slash":{normal:"char-slash",shift:"char-slash"},"key-backslash":{normal:"char-backslash",shift:"char-backslash"},"key-apos":{normal:"char-apos",shift:"char-apos"},"key-quot":{normal:"char-quot",shift:"char-quot"},"key-hyphen":{normal:"char-hyphen",shift:"char-hyphen"},"key-equal":{normal:"char-equal",shift:"char-equal"},"key-bullet":{normal:"char-bullet",shift:"char-bullet"},"key-asterisk":{normal:"char-asterisk",
shift:"char-asterisk"},"key-0":{normal:"digit-0",shift:"char-hyphen"},"key-1":{normal:"digit-1",shift:"char-excl"},"key-2":{normal:"digit-2",shift:"char-atsign"},"key-3":{normal:"digit-3",shift:"char-number"},"key-4":{normal:"digit-4",shift:"char-euro"},"key-5":{normal:"digit-5",shift:"char-colon"},"key-6":{normal:"digit-6",shift:"char-slash"},"key-7":{normal:"digit-7",shift:"char-period"},"key-8":{normal:"digit-8",shift:"char-comma"},"key-9":{normal:"digit-9",shift:"char-quest"},"multi-0":{normal:"numpad-0"},
"multi-1":{normal:"numpad-1"},"multi-2":{normal:"numpad-2"},"multi-3":{normal:"numpad-3"},"multi-4":{normal:"numpad-4"},"multi-5":{normal:"numpad-5"},"multi-6":{normal:"numpad-6"},"multi-7":{normal:"numpad-7"},"multi-8":{normal:"numpad-8"},"multi-9":{normal:"numpad-9"},"numkey-0":{normal:"numpad-0"},"numkey-1":{normal:"numpad-1"},"numkey-2":{normal:"numpad-2"},"numkey-3":{normal:"numpad-3"},"numkey-4":{normal:"numpad-4"},"numkey-5":{normal:"numpad-5"},"numkey-6":{normal:"numpad-6"},"numkey-7":{normal:"numpad-7"},
"numkey-8":{normal:"numpad-8"},"numkey-9":{normal:"numpad-9"},"numkey-decimal":{normal:"char-period"},"numkey-comma":{normal:"char-comma"},"key-space":{normal:"char-space",shift:"char-space",event:"space"},"key-uspace":{normal:"char-uspace",shift:"char-uspace",event:"space"},"action-shift":{code:"shift",label:FontAwesome.get("arrow-up"),glyph:"shift",event:"shiftselect"},"action-extended":{label:"\u00e2\u00eb\u00ed",event:"extendedselect"},"action-backspace":{code:"back",label:FontAwesome.get("arrow-left"),
glyph:"delete",event:"backspace"},"action-closeextendedpanel":{label:FontAwesome.get("undo"),glyph:"cancel",event:"extendedselect"},"action-nextlayout":{label:"",glyph:"",event:"layoutchanged"}},KeyLayouts:[{id:"alphanumeric",label:"abc",glyph:"",keyrows:[[{keyid:"key-a"},{keyid:"key-b"},{keyid:"key-c"},{keyid:"key-d"},{keyid:"key-e"},{keyid:"key-f"},{keyid:"key-g"},{keyid:"key-h"},{keyid:"key-i"}],[{keyid:"key-j"},{keyid:"key-k"},{keyid:"key-l"},{keyid:"key-m"},{keyid:"key-n"},{keyid:"key-o"},{keyid:"key-p"},
{keyid:"key-q"},{keyid:"key-r"}],[{keyid:"key-s"},{keyid:"key-t"},{keyid:"key-u"},{keyid:"key-v"},{keyid:"key-w"},{keyid:"key-x"},{keyid:"key-y"},{keyid:"key-z"},{keyid:"key-0"}],[{keyid:"key-1"},{keyid:"key-2"},{keyid:"key-3"},{keyid:"key-4"},{keyid:"key-5"},{keyid:"key-6"},{keyid:"key-7"},{keyid:"key-8"},{keyid:"key-9"}]],controlrow:[{keyid:"action-nextlayout"},{keyid:"action-shift"},{keyid:"key-space"},{keyid:"action-extended"},{keyid:"action-backspace"}]},{id:"symbols",label:".@#",glyph:"",keyrows:[[{keyid:"key-currency"},
{keyid:"key-currency2"},{keyid:"key-lparen"},{keyid:"key-rparen"},{keyid:"key-lcurly"},{keyid:"key-rcurly"},{keyid:"key-tilde"},{keyid:"key-grave"},{keyid:"key-vertline"}],[{keyid:"key-comma"},{keyid:"key-amp"},{keyid:"key-lsquare"},{keyid:"key-rsquare"},{keyid:"key-caret"},{keyid:"key-percent"},{keyid:"key-divide"},{keyid:"key-hash"},{keyid:"key-degree"}],[{keyid:"key-excl"},{keyid:"key-quest"},{keyid:"key-lt"},{keyid:"key-gt"},{keyid:"key-colon"},{keyid:"key-semicolon"},{keyid:"key-plus"},{keyid:"key-asterisk"},
{keyid:"key-bullet"}],[{keyid:"key-period"},{keyid:"key-atsign"},{keyid:"key-backslash"},{keyid:"key-slash"},{keyid:"key-apos"},{keyid:"key-quot"},{keyid:"key-hyphen"},{keyid:"key-equal"},{keyid:"key-underscore"}]],controlrow:[{keyid:"action-nextlayout"},{keyid:"action-shift"},{keyid:"key-space"},{keyid:"action-extended"},{keyid:"action-backspace"}],noShift:!0,noExtended:!0},{id:"digits",label:"123",glyph:"",keyrows:[[],[{keyid:"key-1"},{keyid:"key-2"},{keyid:"key-3"},{keyid:"key-4"},{keyid:"key-5"}],
[{keyid:"key-6"},{keyid:"key-7"},{keyid:"key-8"},{keyid:"key-9"},{keyid:"key-0"}],[]],controlrow:[{keyid:"action-nextlayout"},{keyid:"action-shift"},{keyid:"action-extended"},{keyid:"key-space"},{keyid:"action-backspace"}]},{id:"multitab",label:"123",glyph:"",keyrows:[[{keyid:"multi-1"},{keyid:"multi-2"},{keyid:"multi-3"}],[{keyid:"multi-4"},{keyid:"multi-5"},{keyid:"multi-6"}],[{keyid:"multi-7"},{keyid:"multi-8"},{keyid:"multi-9"}],[]],controlrow:[{keyid:"action-nextlayout"},{keyid:"multi-0"},{keyid:"action-backspace"}],
largeNumeric:!0,noShift:!0,isNumeric:!0},{id:"pinentry",label:"PIN",glyph:"",keyrows:[[{keyid:"numkey-1"},{keyid:"numkey-2"},{keyid:"numkey-3"}],[{keyid:"numkey-4"},{keyid:"numkey-5"},{keyid:"numkey-6"}],[{keyid:"numkey-7"},{keyid:"numkey-8"},{keyid:"numkey-9"}],[{keyid:"spacer-numkey"},{keyid:"numkey-0"},{keyid:"action-backspace"}]],controlrow:[],noShift:!0,needNumericBackspace:!0,isPin:!0,isNumeric:!0},{id:"numeric-decimal",label:"123",glyph:"",keyrows:[[{keyid:"numkey-1"},{keyid:"numkey-2"},{keyid:"numkey-3"}],
[{keyid:"numkey-4"},{keyid:"numkey-5"},{keyid:"numkey-6"}],[{keyid:"numkey-7"},{keyid:"numkey-8"},{keyid:"numkey-9"}]],controlrow:[{keyid:","===Number.DECIMAL?"numkey-comma":"numkey-decimal"},{keyid:"numkey-0"},{keyid:"action-backspace"}],needNumericBackspace:!0,isNumeric:!0}],KeyLayoutSets:{normal:["alphanumeric","symbols"],pin:["pinentry"],decimal:["numeric-decimal"]},ControlDimensions:{standard:{container:{width:522,height:331},key:{width:58,height:63},action:{width:87,height:63},space:{width:198,
height:63},numkey:{width:116,height:63},keypadding:6,rowpadding:2,"keypadding-pinentry":4,"rowpadding-pinentry":1},small:{container:{width:522,height:331},key:{width:52,height:63},action:{width:77,height:63},space:{width:176,height:63},numkey:{width:116,height:63},keypadding:4,rowpadding:4,"keypadding-pinentry":4,"rowpadding-pinentry":1}},KeyImageSources:{}}},c=function(a){var c="";switch(a){case "action-nextlayout":case "action-shift":case "action-extended":case "action-backspace":c="action";"multitab"===
b[this._classID].state.currentLayout.id?c="multikey":b[this._classID].state.currentLayout.isNumeric&&(c="numkey");break;case "key-space":c="space";break;case "numkey":case "spacer-numkey":c="numkey";break;case "multi":c="multikey"}a&&0===a.indexOf("numkey-")&&(c="numkey");a&&0===a.indexOf("key-")&&!c&&(c="key");a&&0===a.indexOf("multi-")&&(c="multikey");return c},e=function(a){var c=b.Tables.KeyLayoutSets,e=b.Tables.KeyLayouts,d=b[this._classID];a||(a="normal");"string"===typeOf(a)&&(a=c[a]||[a]);
d.availableLayouts=a.map(function(a){return e.filter(function(b){return b.id==a})[0]});d.availableLayouts.length||(d.availableLayouts=c.normal.map(function(a){return e.filter(function(b){return b.id==a})[0]}))},d=function(a){return b.Tables.KeyLayouts.filter(function(b){return b.id==a})[0]},f=function(){var a=b[this._classID],c=a.availableLayouts,e=c.indexOf(a.state.currentLayout);return 0>e?a.state.currentLayout:c[e+1<c.length?e+1:0]},g=function(a){a=b[this._classID];l.call(this,a.state.current_focused_key,
a.body.firstChild.firstChild)},h=function(a){b[this._classID].state.current_focused_key&&b[this._classID].state.current_focused_key.removeClass("focused")},l=function(a,c){var e=b[this._classID].state;e.current_focused_key=a||c;e.current_focused_key.focus()},k=function(a,c,e){e=b[this._classID];var d=b.Tables.KeyDefinitions[c],g,h,k;a.store("definition",d);a.store("keyid",c);if(0===c.indexOf("spacer-"))a.opacity=0,a.wantsFocus=!1;else{if(0===c.indexOf("action-"))g="action-nextlayout"===c?f.call(this).label:
d.label,k=d.code||g;else{h=b.Tables.CharacterDefinitions[d[e.state.showShift?"shift":"normal"]];if(!h)return;g=h.label;k=h.code||g;h=h.sublabel}if(g){var l=a.retrieve("label");l||(l=(new Text).inject(a),l.addClass("ReuseKeyboardLabel"),h&&0===c.indexOf("multi-")&&l.addClass("ReuseKeyboardLabelOffset"),a.store("label",l));var m=a.retrieve("key");e.indexing["key-"+k]=m&&m.key||0;l.data="space"===g?widget.getLocalizedString("SPACE"):g}0===c.indexOf("multi-")&&h&&(g=a.retrieve("sublabel"),g||(g=(new Text).inject(a),
g.addClass("ReuseKeyboardSubLabel"),a.store("label",g)),g.data=h);h=!1;e.state.showExtended?(d.extended&&!e.extendedOverlay.visible&&(h=!0),"control"!==a.retrieve("key").row||e.extendedOverlay.visible||(h=!0)):h=!0;a.disabled=h?!1:!0;"action-extended"===c&&(a.disabled=e.state.currentLayout.noExtended?!0:a.disabled);"action-shift"===c&&(a.disabled=e.state.currentLayout.noShift?!0:a.disabled);"action-nextlayout"===c&&(a.disabled=e.state.showExtended?!0:a.disabled)}},m=function(a){var c=b[this._classID];
a=c.indexing["key-"+a];return isNumber(a)&&(c=c.body.firstChild.childNodes[a],!c.disabled)?(c.focus(),c.select(),!0):!1},p=function(a){var c=a.target,e=a.key;if(a.isChar||a.isNumeric||a.isExtendedChar||a.isExtendedNumeric){if(!m.call(c.owner,e)){c.owner.appendToValue(e);u.call(c.owner,"char",e,a.shiftKey||!1);return}}else if(this.visible)switch(a.key){case "shift":b[c.owner._classID].state.currentLayout.noShift||b[c.owner._classID].state.showShift||c.owner.setShiftState(!0);break;case "back":case "delete":a.preventDefault();
if(!m.call(c.owner,a.key))return c.owner.deleteFromValue();break;case "space":if(!m.call(c.owner,a.key))return c.owner.appendToValue(" ")}return a},n=function(a){var c=a.target;"shift"===a.key&&(b[c.owner._classID].state.currentLayout.noShift||c.owner.setShiftState(!1))},q=function(a){var c=b[this._classID],e=c.extendedOverlay||new Frame,d=(a.retrieve("definition")[c.state.showShift?"shiftextended":"extended"]||[]).slice();d.push("action-closeextendedpanel");e.store("type","view");e.addClass("extendedOverlay");
e.store("focusTarget",a.retrieve("key").key||0);var f=(new List).inject(e),g=createDocumentFragment();d.forEach(function(c,e){var d=new Item({focus:!0});d.addClass("ReuseKeyboardkey");"small"===this.config.controlSize&&d.addClass("small");d.addEventListener("select",w,this);d.owner=a.owner;g.appendChild(d);var f=b.Tables.CharacterDefinitions[c];f||"action-closeextendedpanel"!=c||(f=b.Tables.KeyDefinitions[c]);var h=f.label;d.store("definition",f);d.store("keyid",c);f=d.retrieve("label");f||(f=(new Text).inject(d),
f.addClass("ReuseKeyboardLabel"),d.store("label",f));h&&f?f.data=h:f&&(f.data="")},this);f.appendChild(g);var h=a.getBounds(),k=a.retrieve("key"),m=this.element.getBounds(),n=m.top,m=m.left,s=Math.min(0,k.keysonrow-k.column-d.length),k=c.body.width/k.keysonrow;e.hOffset=h.left-m-(this.width-c.body.width)+s*k||0;e.vOffset=h.top-n||0;e.width=f.width=k*d.length;f.height=Theme.getStyles("extendedOverlay","height");c.body.appendChild(e);c.body.firstChild.allowNavigation=!1;e.visible=!0;l.call(this,e.lastChild.firstChild)},
s=function(){var a=b[this._classID];a.extendedOverlay.firstChild.destroy(!0);a.extendedOverlay.visible=!1;a.body.firstChild.allowNavigation=!0},t=null,y=null,r=null,u=function(a,b,c,e){var d={};switch(a){case "multi":d.key=b;e&&e.sublabel&&0<e.sublabel.length&&(a=e.sublabel.split(""),1E3>new Date-y?t===b&&"number"===typeOf(r)&&(r=0<r?r>=a.length?0:r+1:r+1,d.key=0<r?a[r-1]:b,d.update=!0):r=0,y=new Date,t=b);d.shiftKey=c;d.isChar=!0;d.isNumeric=!0;d.keyCode=13;break;case "key":case "numkey":d.shiftKey=
c;d.isChar=!0;d.isNumeric=!0;d.keyCode=13;d.key=b;break;case "char":d.shiftKey=c;d.isChar=!0;d.key=b;d.keyCode=13;break;case "backspace":d.key="back"}this.fireEvent("keydown",d)},w=function(a){var c=b[this.owner._classID||a.target.owner._classID];a=a.target||c.state.current_focused_key;var e=a.retrieve("definition")||a._characterDefinition,d=String(a.retrieve("keyid")||a._charDefId).split("-")[0],g=String(a.retrieve("keyid")||a._charDefId).split("-")[1],h=c.state.showShift,k=null,k=null,k=c.state.showExtended;
switch(d){case "key":case "numkey":case "multi":k&&"space"!==g?(q.call(this.owner,a),a.owner.fire("extendedselect")):(k=b.Tables.CharacterDefinitions[e[h?"shift":"normal"]],a.owner.appendToValue(k.value||""),u.call(a.owner,d,k.value,h,k));break;case "char":k=c.extendedOverlay.retrieve("focusTarget");a.owner.appendToValue(e.value||"");u.call(a.owner,d,e.value,h);a.owner.toggleExtended();h&&a.owner.toggleShift();s.call(this.owner);isNumber(k)&&c.body.firstChild.childNodes[k].focus();break;case "action":switch(g){case "shift":a.owner.toggleShift();
break;case "extended":a.owner.toggleExtended();break;case "backspace":a.owner.deleteFromValue();u.call(a.owner,g);break;case "nextlayout":a.owner.loadLayout(f.call(this.owner),a.retrieve("key")||{});break;case "closeextendedpanel":k=c.extendedOverlay.retrieve("focusTarget"),a.owner.toggleExtended(),s.call(this.owner),isNumber(k)&&c.body.firstChild.childNodes[k].focus()}}},A=function(a){var c=b[this._classID];el=c.body&&c.body.firstChild&&c.body.firstChild.firstChild;c.indexing={};do el&&1===el.nodeType&&
k.call(this,el,el.retrieve("keyid"),"shiftselect"===a.type?"shift":"extended"),el=el.nextSibling;while(el)},z={space:"onSpace",keydown:"onKeyDown",backspace:"onBackspace",valuechanged:"onValueChanged",layoutchanged:"onLayoutChanged",shiftselect:"onShiftSelect",extendedselect:"onExtendedSelect",closeextendedpanel:"onCloseExtendedPanel",maxlengthexceeded:"onMaxLengthExceeded"};return new MAF.Class({ClassName:"ReuseKeyboard",Extends:MAF.element.Core,config:{controlSize:"standard",autoAdjust:!0,allowSpace:!0,
maxLength:99,keyPadding:!1,rowPadding:!1,wrapNavigation:!0},initialize:function(){var a=b[this._classID]={value:[],body:new Frame({frozen:!0}),extendedOverlay:new Frame,state:{showShift:!1,showExtended:!1,controlSize:this.config.controlSize}};this.config.element=b[this._classID].body;this.parent();var c="multitab"===MAE.keyboard?{KeyLayoutSets:{normal:["multitab","alphanumeric","symbols"]},CharacterDefinitions:{"numpad-0":{label:"0",sublabel:"",value:"0"},"numpad-1":{label:"1",sublabel:";@!?",value:"1"}}}:
{};"CharacterDefinitions KeyDefinitions KeyLayouts KeyLayoutSets ControlDimensions KeyLabelPresentation KeyImageSources".split(" ").forEach(function(a){c[a]&&(b.Tables[a]=Object.merge(b.Tables[a],c[a]));this.config[a]&&(b.Tables[a]=this.config[a])},this);this.body=new List;this.body.inject(this.element);e.call(this,this.config.availableLayouts);var d=a.body;d.addEventListener("focus",g);d.addEventListener("blur",h);d.addEventListener("keydown",p,this);d.addEventListener("keyup",n,this);d.addEventListener("navigateoutofbounds",
function(a){var c=a.detail&&a.detail.direction;a=a.target;var b=d.getBounds()||{},e=a.getBounds()||{};switch(c){case "left":a.navigate(c,[(b.left||0)+(b.width||0),e.top||0]);break;case "right":a.navigate(c,[b.left||0,e.top||0])}});A.subscribeTo(this,["shiftselect","extendedselect"],this);a.extendedOverlay.visible=!1;this.config.startShifted&&(a.state.showShift=!0);this.setValue(this.config.value);this.loadLayout(this.config.layout||a.availableLayouts[0]);this.config.startFocused&&this.focus()},appendTo:function(a){if(a){var c=
b[this._classID].body;c.inject(a);c.frozen=!1}return this},loadLayout:function(a,e){var f=b[this._classID];a="string"===typeOf(a)?d(a):a;if(f.state.currentLayout!==a){e=e||{};var g=b.Tables.ControlDimensions[b[this._classID].state.controlSize];f.indexing={};f.state.currentLayout=a;this.body&&(this.body.destroy(!0),this.body=(new List).inject(f.body,"top"));var h=0,l=0,m=0,n=0,s=createDocumentFragment();if(this.config.autoAdjust){var p=window.Theme.getStyles("ReuseKeyboard .item"),q=0,r=0;["border",
"borderLeftWidth","borderRightWidth","marginLeft","marginRight"].forEach(function(a){a="border"===a?2*parseInt(p[a],10):p[a];q+=a||0},this);["border","borderTopWidth","borderBottomWidth","marginTop","marginBottom"].forEach(function(a){a="border"===a?2*parseInt(p[a],10):p[a];r+=a||0},this)}a.keyrows.forEach(function(b,e){var d=0,f=0;"array"!==typeOf(b)?0===e&&warn('The KeyLayout "'+(a.id||"unknown")+'" is not defined properly.'):b.forEach(function(a,g){var l=new Item({focus:!0}),m=this.ClassName+c.call(this,
a.keyid),x="small"===this.config.controlSize?Theme.getStyles(m,"small")||{}:Theme.getStyles(m),v=0;l.addClass(m);"small"===this.config.controlSize&&l.addClass("small");l.addEventListener("select",w,this);l.owner=this;s.appendChild(l);l.store("key",{row:e,column:g,key:n++,keysonrow:b.length||0});k.call(this,l,a.keyid);this.config.autoAdjust&&(d+=q+x.width||0,v+=r+x.height||0,f=Math.max(v,f));h++},this);l=Math.max(l,d);m+=f},this);var t=0;a.controlrow&&"array"===typeOf(a.controlrow)&&a.controlrow.forEach(function(a,
b){var d=new Item({focus:!0}),f=this.ClassName+c.call(this,a.keyid),g="small"===this.config.controlSize?Theme.getStyles(f,"small")||{}:Theme.getStyles(f),l=0;"control"===e.row&&b===e.column&&(e.focusTarget=h);d.addClass(f);"small"===this.config.controlSize&&d.addClass("small");d.addEventListener("select",w,this);d.owner=this;s.appendChild(d);d.store("key",{row:"control",column:b,key:n++});k.call(this,d,a.keyid);this.config.autoAdjust&&(l+=r+g.height||0,t=Math.max(l,t));h++},this);m+=t;this.setStyles({width:this.config.autoAdjust?
l:g.container.width,height:this.config.autoAdjust?m:g.container.height});this.body.setStyles({width:this.config.autoAdjust?l:g.container.width,height:this.config.autoAdjust?m:g.container.height});this.body.appendChild(s);e&&e.focusTarget?this.body.childNodes[e.focusTarget<h?e.focusTarget:0].focus():this.body.childNodes[0].focus()}},getValue:function(){return b[this._classID].value.join("")},setValue:function(a){var c=this.getValue(),e=String(a||""),d=parseInt(this.config.maxLength,10);this.config.allowSpace||
a.replace(/\s/g,"");e.length>d&&this.fire("maxlengthexceeded");b[this._classID].value=e.split("");b[this._classID].value.length=Math.min(d,e.length);c!==e&&this.fireEvent("valuechanged",{oldValue:c,newValue:e});return e},appendToValue:function(a){return this.setValue(this.getValue()+String(a||""))},deleteFromValue:function(a){a=parseInt(a,10)||1;var c=b[this._classID].value.slice();c.length=Math.max(0,c.length-a);return this.setValue(c.join(""))},clearValue:function(){return this.setValue("")},setShiftState:function(a){var c=
b[this._classID];return c.state.showShift===Boolean(a)?c.state.showShift:this.toggleShift()},getShiftState:function(){return b[this._classID].state.showShift},toggleShift:function(){var a=b[this._classID];a.state.showShift=!a.state.showShift;this.fire("shiftselect")},setExtendedState:function(a){var c=b[this._classID];return c.state.showExtended===Boolean(a)?c.state.showExtended:this.toggleExtended()},getExtendedState:function(){return b[this._classID].state.showExtended},toggleExtended:function(){var a=
b[this._classID];a.state.showExtended=!a.state.showExtended;this.fire("extendedselect")},focus:function(){g.call(this)},resetFocus:emptyFn,clearFocus:function(){b[this._classID].state.current_focused_key=null},fireEvent:function(a){var c=Array.slice(arguments,1);this.fire(arguments);var b=this[z[a]];b&&b.apply&&b.apply(this,c)},reset:function(a){var c=b[this._classID];s.call(this);a=a||{};for(var e in a)this.config[e]=a[e];c.state.controlSize=this.config.controlSize;c.state.showShift=!0===this.config.startShifted;
this.fire("shiftselect");c.state.showExtended=!0===this.config.startExtended;this.fire("extendedselect");c.state.current_focused_key&&c.state.current_focused_key._applyState("normal");c.state.current_focused_key=null;this.setValue(this.config.value||"");this.loadLayout(this.config.layout||c.availableLayouts[0]);this.config.startFocused&&this.focus()},suicide:function(){Object.forEach(z,function(a,c){this[c]&&delete this[c]},this);this.element.owner=this;var a=b[this._classID],c=a.body.firstChild,
e=a.extendedOverlay;c&&c.destroy(!0);e&&(delete a.overlay,e.destroy());delete a.body;delete b[this._classID];this.parent()}})},{ReuseKeyboard:{normal:{styles:{width:"inherit"}}},"ReuseKeyboard .item":{normal:{styles:{border:"2px solid white",backgroundColor:"black",borderRadius:"10px",boxSizing:"content-box",marginLeft:2,marginRight:2,marginBottom:2,"float":"left"}},focused:{styles:{backgroundColor:Theme.getStyles("BaseFocus","backgroundColor")}},disabled:{styles:{opacity:0.3}}},ReuseKeyboardkey:{normal:{styles:{width:57,
height:63}},small:{styles:{width:52,height:63}}},ReuseKeyboardaction:{normal:{styles:{width:87,height:63}},small:{styles:{width:82,height:63}}},ReuseKeyboardspace:{normal:{styles:{width:196,height:63}},small:{styles:{width:171,height:63}}},ReuseKeyboardnumkey:{normal:{styles:{width:116,height:63}},small:{styles:{width:116,height:63}}},ReuseKeyboardmultikey:{normal:{styles:{width:116,height:80}},small:{styles:{width:116,height:80}}},ReuseKeyboardLabel:{styles:{width:"inherit",height:"inherit",fontSize:32,
anchorStyle:"center"}},ReuseKeyboardLabelOffset:{styles:{hOffset:20}},ReuseKeyboardSubLabel:{styles:{width:"inherit",height:"inherit",hAlign:"right",hOffset:20,fontSize:22,anchorStyle:"center"}},extendedOverlay:{styles:{height:67}}});define("MAF.keyboard.KeyboardValueManager",function(a){var b={};return new MAF.Class({initialize:function(){b[this._classID]={value:"",cursorPosition:0};getter(this,"value",function(){return b[this._classID].value||""});setter(this,"value",function(a){if(null===a||void 0===a)a="";var e=b[this._classID].value;a!==e&&(e=a,this.config.maxLength&&e.length>this.config.maxLength&&(e=e.substr(0,this.config.maxLength),this.fire("maxlengthexceeded")),b[this._classID].value=e,this.fire("valuechanged",{value:e}));
return e});getter(this,"cursorPosition",function(){return b[this._classID].cursorPosition||0});setter(this,"cursorPosition",function(a){"number"===typeOf(a)&&(a=Math.max(0,Math.min(parseInt(a,10),this.value.length)),this.cursorPosition!==a&&(b[this._classID].cursorPosition=a,this.fire("cursormoved",{cursorPosition:a})));return this.cursorPosition})},deleteLeft:function(a){a=parseInt(a,10)||1;var b=this.value;this.value=b.substr(0,Math.max(0,this.cursorPosition-a))+b.substr(this.cursorPosition,b.length);
this.moveCursorLeft(a);return this.value},deleteRight:function(a){a=parseInt(a,10)||1;var b=this.value;this.value=b.substr(0,this.cursorPosition)+b.substr(this.cursorPosition+a,b.length);this.moveCursorRight(a);return this.value},handleExternalKeyInput:function(a){DEBUG&&(a||log("handleExternalKeyInput ... no event to process"));var b=a.payload&&a.payload.layout||null;a.Event&&(a={payload:a.Event});if("pinentry"===b&&!a.payload.isNumeric&&0>["tab","back","enter"].indexOf(a.payload.key))return!1;!0===
a.payload.update&&this.deleteLeft();if(a.payload.isChar||"space"===a.payload.key)return this.insertCharacters("space"===a.payload.key?" ":a.payload.key);switch(a.payload.key){case "back":this.deleteLeft();break;case "delete":this.deleteRight()}},insertCharacters:function(a){if(null===a||void 0===a)return this.value;a=String(a);var b=this.value;this.value=b.substr(0,this.cursorPosition)+a+b.substr(this.cursorPosition,b.length);this.moveCursorRight(a.length);return b},moveCursorLeft:function(a){return this.cursorPosition-=
a||1},moveCursorRight:function(a){return this.cursorPosition+=a||1},setMaxLength:function(a){isNumber(a)&&(this.config.maxLength=a)},suicide:function(){delete b[this._classID]}})});define("MAF.media.PlaylistEntry",function(){var a=function(a){a.sort(function(a,b){return a.bitrate===b.bitrate?0:a.bitrate<b.bitrate?1:-1})};return new MAF.Class({config:{url:null,bitrate:0,asset:null,streams:null},initialize:function(){var b=[];this.config.url&&b.push({url:this.config.url,bitrate:this.config.bitrate});this.config.streams instanceof Array&&(this.config.streams.forEach(function(a){a.url&&b.push({url:a.url,bitrate:a.bitrate||this.config.bitrate})},this),a(b),delete this.config.streams);
getter(this,"asset",function(){return this.config.asset});getter(this,"streams",function(){return b})},streamsReady:function(){return!0},hasURL:function(a){return 0<this.streams.filter(function(c){return c.url===a}).length},addURL:function(b,c){b&&(this.streams.push({url:b,bitrate:isNaN(c)?0:c}),a(this.streams));return this}})});define("MAF.media.Playlist",function(){return new MAF.Class({config:{autoStart:!0,repeatAll:!1,forcePlay:!0},initialize:function(){var a=[],b=!0===this.config.autoStart,c=!0===this.config.repeatAll,e=!0===this.config.forcePlay;getter(this,"autoStart",function(){return b});setter(this,"autoStart",function(a){b=Boolean(a)});getter(this,"repeatAll",function(){return c});setter(this,"repeatAll",function(a){c=Boolean(a)});getter(this,"forcePlay",function(){return e});setter(this,"forcePlay",function(a){e=
Boolean(a)});getter(this,"entries",function(){return a});setter(this,"entries",function(b){a=b||[]})},removeEntry:function(a){this.entries.slice(a)},clearEntries:function(){this.entries=[]},addEntry:function(a){return this.addEntries([a])},addEntries:function(a){this.entries=this.entries.concat(a).filter(function(a){return a instanceof MAF.media.PlaylistEntry});return this},addEntryByURL:function(a,b,c){return this.addEntry(new MAF.media.PlaylistEntry({url:a,bitrate:b,startIndex:c||0}))}})});define("MAF.control.EmptySpace",function(){return new MAF.Class({ClassName:"ControlEmptySpace",Extends:MAF.element.Core})},{ControlEmptySpace:{styles:{backgroundImage:"url("+Image.CHECKERS+")"}}});define("MAF.control.Button",function(){var a=function(a){!this.secureIndicator&&this.secure&&(this.secureIndicator=(new MAF.element.Text({ClassName:"SecureButtonIndicator",label:FontAwesome.get("lock")})).appendTo(this));this.adjustAccessories()};return new MAF.Class({ClassName:"ControlButton",Extends:MAF.element.Button,Protected:{onThemeNeeded:function(a){if(!a.defaultPrevented)switch(a.type){case "onFocus":this.renderSkin("focused");break;case "onBlur":this.renderSkin("normal");break;case "onAppend":this.renderSkin("normal"),
this.createContent()}}},initialize:function(){!1!==this.config.theme?this.onThemeNeeded.subscribeTo(this,["onFocus","onBlur","onAppend"],this):this.createContent.subscribeTo(this,"onAppend",this);a.subscribeTo(this,"onChangedSecure",this);this.parent();a.call(this)},createContent:emptyFn,adjustAccessories:emptyFn,suicide:function(){this.secureIndicator&&(this.secureIndicator.suicide(),delete this.secureIndicator);this.parent()}})},{ControlButton:{renderSkin:function(a,b,c,e,d){b=new Frame;d.applyLayer("BaseGlow",
b);"focused"===a&&d.applyLayer("BaseFocus",b);d.applyLayer("BaseHighlight",b);return b},styles:{width:"inherit",height:51}},SecureButtonIndicator:{styles:{hAlign:"right",vAlign:"bottom",hOffset:10,vOffset:7}}});define("MAF.control.TextButton",function(){return new MAF.Class({ClassName:"ControlTextButton",Extends:MAF.control.Button,createContent:function(){this.content=(new MAF.element.Text({ClassName:(this.config.ClassName||this.ClassName)+"Text",label:this.config.label,styles:this.config.textStyles})).appendTo(this)},setText:function(a){this.content.setText(a)}})},{ControlTextButton:"ControlButton",ControlTextButtonText:{styles:{width:"100%",height:"inherit",paddingLeft:10,paddingRight:10,anchorStyle:"leftCenter",
truncation:"end"}}});define("MAF.control.BackButton",function(){return new MAF.Class({ClassName:"ControlBackButton",Extends:MAF.control.Button,Protected:{dispatchEvents:function(a,b){switch(a.type){case "select":this.fire("onSelect",b,a)&&MAF.application.previousView(this.config.backParams||{});break;default:this.parent(a,b)}}},config:{backParams:!1},createContent:function(){this.content=[(new MAF.element.Text({ClassName:"ControlBackButtonIcon",label:FontAwesome.get("undo")})).appendTo(this),(new MAF.element.Text({ClassName:"ControlBackButtonText",
label:this.config.label||widget.getLocalizedString("BACK"),styles:this.config.textStyles})).appendTo(this)]},setText:function(a){this.content[1].setText(a)}})},{ControlBackButton:"ControlButton",ControlBackButtonIcon:{styles:{width:60,height:"inherit",fontSize:24,paddingTop:3,anchorStyle:"center"}},ControlBackButtonText:{styles:{width:"inherit",height:"inherit",paddingLeft:60,fontSize:24,anchorStyle:"leftCenter",truncation:"end"}}});define("MAF.control.PhotoBackButton",function(){var a=function(){this.aspectSizeMax(Math.min(this.width,this.height))};return new MAF.Class({ClassName:"ControlPhotoBackButton",Extends:MAF.control.BackButton,createContent:function(){this.parent();this.photo=(new MAF.element.Image({ClassName:(this.config.ClassName||this.ClassName)+"Image"})).appendTo(this);a.subscribeTo(this.photo,"onLoaded",this.photo);this.photo.setSources(this.config)},setSource:function(a){return this.photo.setSource(a)},setSources:function(a){return this.photo.setSources(a)}})},
{ControlPhotoBackButton:"ControlButton",ControlPhotoBackButtonImage:{styles:{vAlign:"center",hOffset:100,width:40,height:40}}});define("MAF.control.Header",function(){return new MAF.Class({ClassName:"ControlHeader",Extends:MAF.element.Container,config:{headerStyle:"large"},initialize:function(){delete this.config.focus;this.parent();var a=this.config,b=a.ClassName||this.ClassName,c=a.headerStyle&&a.headerStyle.capitalize()||"";this.element.addClass(b+c);this.content=(new MAF.element.Text({ClassName:b+"Text"+c,label:a.label,styles:a.textStyles})).appendTo(this)},setText:function(a){this.content.setText(a)}})},{ControlHeader:{styles:{backgroundColor:Theme.getStyles("BaseGlow",
"backgroundColor"),width:"inherit"}},ControlHeaderSmall:{styles:{height:"32px"}},ControlHeaderLarge:{styles:{height:"48px"}},ControlHeaderTextSmall:{styles:{width:"100%",height:"inherit",paddingLeft:10,paddingRight:10,fontSize:18,anchorStyle:"leftCenter",truncation:"end"}},ControlHeaderTextLarge:{styles:{width:"100%",height:"inherit",paddingLeft:10,paddingRight:10,fontSize:24,anchorStyle:"leftCenter",truncation:"end"}}});define("MAF.control.Keyboard",function(){var a={},b={},c=function(){var c=b[this._classID]={valueChanged:function(){this.fire("onValueChanged",{value:this.getValue()})}.bindTo(this),maxLengthExceeded:function(){this.fire("onMaxLengthExceeded")}.bindTo(this),keyDown:function(a){this.fire("onKeyDown",a,a.type?a:null)}.bindTo(this)},d=a[this._classID]=new MAF.keyboard.ReuseKeyboard({focus:this.config.focus,autoAdjust:!0,allowSpace:this.config.allowSpace,maxLength:this.config.maxLength,controlSize:this.config.controlSize,
startShifted:this.config.startShifted,startExtended:this.config.startExtended,startFocused:this.config.startFocused,layout:this.config.layout,availableLayouts:this.config.availableLayouts,wrapNavigation:this.config.wrapNavigation,KeyLayouts:this.config.KeyLayouts});d.element.hAlign="center";d.element.owner=this;d.appendTo(this.element);this.setStyle("height",d.element.height);d.onValueChanged=c.valueChanged;d.onMaxLengthExceeded=c.maxLengthExceeded;d.onKeyDown=c.keyDown};return new MAF.Class({ClassName:"ControlKeyboard",
Extends:MAF.element.Container,config:{embedded:!0,focus:!0,controlSize:"standard",autoAdjust:!0,allowSpace:!0,maxLength:99,startShifted:!1,wrapNavigation:!0},Protected:{dispatchEvents:function(a,b){switch(a.type){case "focus":this.focus()}}},initialize:function(){this.config.autoAdjust&&this.config.styles&&delete this.config.styles.height;this.parent();this.element.wantsFocus=!1;c.call(this);this.config.value&&this.setValue(this.config.value);delete this.config.value;this.config.autoAdjust&&this.setStyle("height",
a[this._classID].element.height)},getValue:function(){return a[this._classID].getValue()},setValue:function(b){return a[this._classID].setValue(b)},appendToValue:function(b){return a[this._classID].appendToValue(b)},deleteFromValue:function(b){return a[this._classID].deleteFromValue(b)},clearValue:function(){return a[this._classID].clearValue()},loadLayout:function(b,c){return a[this._classID].loadLayout(b,c)},focus:function(){return a[this._classID].focus()},resetFocus:function(){return a[this._classID].resetFocus()},
reset:function(){return a[this._classID].reset()},getShiftState:function(){return a[this._classID].getShiftState()},setShiftState:function(b){return a[this._classID].setShiftState(b)},toggleShift:function(){return a[this._classID].toggleShift()},getExtendedState:function(){return a[this._classID].getExtendedState()},setExtendedState:function(b){return a[this._classID].setExtendedState(b)},toggleExtendedState:function(){return a[this._classID].toggleExtended()},getKeyboard:function(){return a[this._classID]},
generateStatePacket:function(b){return Object.merge({value:this.getValue(),focused:a[this._classID].element.hasFocus},b)},inspectStatePacket:function(a,b){if(!this.config.guid||a&&!(this.config.guid in a))return a;var c=a&&a[this.config.guid],g=typeOf(c);if("null"===g||"undefined"===g)return a;if(b)c.focused&&this.focus();else switch(g){case "boolean":case "string":return this.setValue(c);case "object":for(var h in c)switch(h){case "value":c[h]&&this.setValue(c[h])}}return c},suicide:function(){var c=
this._classID;a[c]&&a[c].suicide();a[c]=null;delete a[c];b[c]=null;delete b[c];this.parent()}})},{ControlKeyboard:{styles:{width:"inherit"}}});define("MAF.control.ValueDisplay",function(){return new MAF.Class({ClassName:"ControlValueDisplay",Extends:MAF.element.Core,Protected:{onSourceUpdated:function(){var a=this.getSourceDisplayValue();this.updateContent(a)},updateContent:function(a,b){b=b||{};if(this.config.animate&&"none"!=b.transition){this.content.freeze();this.content.appendTo(this.buffer);this.buffer.freeze();this.content.hide();this.content.thaw();this.content.appendTo(this);this.content.data=a;var c=this.config.animation,e=[],
d=function(a){var d={};a.forEach(function(a){d[a]=a in b?b[a]:c[a]});return d}(["duration","fade","slide","direction","ease"]),f=this.width,g=this.height,h=this.content.element,l=this.buffer.element,k=this.contentUpdated.bindTo(this);if(!d.slide&&!d.fade)return k();d.fade&&(e.push(new FadeAnimation(h,255,d.duration,d.ease)),e.push(new FadeAnimation(l,0,d.duration,d.ease)));if(d.slide){switch(d.direction){case "left":h.hOffset=f;e.push(new MoveAnimation(l,0-f,0,d.duration,d.ease));break;case "right":h.hOffset=
0-f;e.push(new MoveAnimation(l,f,0,d.duration,d.ease));break;case "up":h.vOffset=g;e.push(new MoveAnimation(l,0,0-g,d.duration,d.ease));break;case "down":h.vOffset=0-g,e.push(new MoveAnimation(l,0,g,d.duration,d.ease))}e.push(new MoveAnimation(h,0,0,d.duration,d.ease,k))}this.content.show()}else this.content.data=a},contentUpdated:function(){this.content.show();this.buffer.hide();this.buffer.setStyles({hOffset:0,vOffset:0,opacity:255});this.buffer.thaw();this.buffer.show()}},config:{eventTypes:["onValueChanged",
"onValueInitialized"],sourceElement:null,source:null,animation:{duration:250,fade:!0,slide:!0,direction:"left",ease:0}},initialize:function(){this.parent();this.createContent();var a=this.config.sourceElement||this.config.source;a&&this.attachToSource(a);this.config.source=null;delete this.config.source;this.config.sourceElement=null;delete this.config.sourceElement},getSourceDisplayValue:function(){return this.source?this.source.getDisplayValue():""},createContent:function(){this.content=(new MAF.element.Text({ClassName:"ControlValueContainerText",
label:"..."})).appendTo(this);this.buffer=(new MAF.element.Core).appendTo(this)},attachToSource:function(a){var b=null;if(!a||this.source===a)return b=this.getSourceDisplayValue(),this.updateContent(b,{transition:"none"});this.source=a;this.onSourceUpdated.subscribeTo(this.source,this.config.eventTypes,this);b=this.getSourceDisplayValue();this.updateContent(b,{transition:"none"})},suicide:function(){this.content.suicide();delete this.content;this.buffer.suicide();delete this.buffer;delete this.source;
this.parent()}})},{ControlValueContainerText:{styles:{width:"100%",height:"inherit",paddingLeft:10,paddingRight:10,anchorStyle:"rightCenter",opacity:"0.7"}}});define("MAF.control.InputButton",function(){var a=function(a){var b=arguments.callee.caller.__event__||null;this.setValue(a);this.fire("onSelect",null,b)},b=function(){var a=this.getDisplayValue();this.config.valueOnSubline?(this.valueDisplay=(new MAF.element.Text({ClassName:"ControlValueContainerSubline",label:a})).appendTo(this),function(){this.valueDisplay.data=this.getDisplayValue()}.subscribeTo(this,["onValueInitialized","onValueChanged"],this)):"ImageToggleButton"!==this.ClassName?this.valueDisplay=
(new MAF.control.ValueDisplay({source:this,styles:{height:"inherit"}})).appendTo(this):(this.valueDisplay=(new MAF.element.Image({src:a.src,styles:Object.merge({hAlign:"right",vAlign:"center"},this.config.toggleStyles||{})})).appendTo(this),function(){this.valueDisplay.setSource(this.getDisplayValue().src)}.subscribeTo(this,["onValueInitialized","onValueChanged"],this))};return new MAF.Class({ClassName:"ControlInputButton",Extends:MAF.control.TextButton,Protected:{valueDisplayWidth:function(a){this.config.valueOnSubline||
"ImageToggleButton"===this.ClassName||!this.valueDisplay||a.payload.skip||(this.valueDisplay.width=this.width)},dispatchEvents:function(b,e){if("select"===b.type){b.stopPropagation();b.preventDefault();var d=this.config,f=a.bindTo(this),g=this.getValue();f.__event__=void 0;d.changeValue&&d.changeValue.apply?d.changeValue.apply(this,[f,g]):this.changeValue(f,g)}else this.parent(b,e)}},config:{options:[],value:null,valueOnSubline:!1},initialize:function(){this.ClassName+=this.config.valueOnSubline?
"Subline":"";this.parent();this.valueDisplayWidth.subscribeTo(this,"onAppend",this);this.config.options&&(this.setOptions(this.config.options),delete this.config.options);this.setValue(this.config.value||"");delete this.config.value},adjustAccessories:function(){var a=this.width;this.secureIndicator&&this.secure&&(a=this.secureIndicator.hOffset-this.secureIndicator.width);this.valueDisplay&&this.valueDisplay.config&&this.valueDisplay.config.styles&&"right"===this.valueDisplay.config.styles.hAlign&&
this.valueDisplay.setStyles({hOffset:a})},createContent:function(){this.getDisplayValue();var a=this.config,e=a.valueOnSubline?"ControlValueContainerMainline":"ControlTextButtonText",d=Object.clone(a.textStyles||Theme.getStyles(e)||{});delete d.width;this.content=(new MAF.element.Text({ClassName:e,label:a.label,styles:d})).appendTo(this);b.call(this)},getValue:function(){return String(this.retrieve("value")||"")},setValue:function(a){var b=isEmpty(this.retrieve("value"));a=null===a?"":String(a);if((this.retrieve("value")||
"")===a)return"";this.store("value",a);this.fire(b?"onValueInitialized":"onValueChanged",{value:a});return this.getValue()},changeValue:function(a,b){a(b)},getDisplayValue:function(a){var b=a=a||this.getValue();this.getOptions().forEach(function(d){d.value==a&&(b=d.label)});return b},setOptions:function(a,b){a=[].concat(a);var d=a.map(function(a,c){var d="object"===typeOf(a),l=b&&b.length||0;return a?{value:d&&"value"in a?a.value:a,label:l>c?b[c]:d&&"label"in a?a.label:a}:a});this.store("options",
d);this.fire("onOptionsChanged",{options:this.getOptions()})},getOptions:function(){return this.retrieve("options")||[]},getOptionValues:function(){return this.getOptions().map(function(a){return a.value})},getOptionLabels:function(){return this.getOptions().map(function(a){return a.label})},generateStatePacket:function(a){a=a||{};return this.parent(Object.merge({value:this.getValue()},a))},inspectStatePacket:function(a,b){var d=this.parent(a,b),f=typeOf(d);if(!b){if(d===a)return a;switch(f){case "boolean":case "string":return this.setValue(d)}for(var g in d)switch(g){case "optionCancelled":if(d[g])return this.fire("onOptionCancelled",
d),d[g]=null,d;break;case "optionSelected":if(d[g]&&"option"in d){this.fire("onOptionSelected",d.option);d[g]=null;continue}else if(!1===d[g])return this.fire("onOptionCancelled",d),d[g]=null,d;break;case "option":this.setValue(d[g].value);break;case "value":this.setValue(d[g])}return d}},suicide:function(){this.valueDisplay.suicide();delete this.valueDisplay;this.parent()}})},{ControlInputButton:"ControlButton",ControlInputButtonSubline:{renderSkin:function(a,b,c,e,d){b=new Frame;d.applyLayer("BaseGlow",
b);"focused"===a&&d.applyLayer("BaseFocus",b);d.applyLayer("BaseHighlight",b);return b},styles:{width:"inherit",height:"91px"}},ControlValueContainerMainline:{styles:{width:"100%",height:"inherit",vOffset:6,fontSize:28,paddingLeft:10,paddingRight:10,anchorStyle:"leftTop",truncation:"end"}},ControlValueContainerSubline:{styles:{width:"100%",height:"inherit",truncation:"end",paddingLeft:10,anchorStyle:"leftBottom",fontSize:23,paddingBottom:4,color:"rgba(255,255,255,.7)"}}});define("MAF.control.PromptButton",function(){return new MAF.Class({ClassName:"ControlPromptButton",Extends:MAF.control.InputButton,config:{title:"",message:"Please select an option:"},changeValue:function(a,b){var c=function(b){a(b.selected.value)},e=this.getOptions().slice(0,2).map(function(a){a.callback=c;return a});(new MAF.dialogs.Alert({title:this.config.title||this.config.label,message:this.config.message,buttons:e,focusOnCompletion:this})).show()}})},{ControlPromptButton:"ControlButton",ControlPromptButtonSubline:"ControlInputButtonSubline"});define("MAF.control.ToggleButton",function(){return new MAF.Class({ClassName:"ControlToggleButton",Extends:MAF.control.InputButton,changeValue:function(a,b){var c=this.getOptions(),e=c.map(function(a){return a.value}).indexOf(b),e=-1==e||e==c.length-1?0:e+1;a(c[e].value)}})},{ControlToggleButton:"ControlButton",ControlToggleButtonSubline:"ControlInputButtonSubline"});define("MAF.control.ImageToggleButton",function(){return new MAF.Class({ClassName:"ImageToggleButton",Extends:MAF.control.InputButton,config:{styling:!0},changeValue:function(a,b){var c=this.getOptions(),e=c.map(function(a){return a.value}).indexOf(b),e=-1==e||e==c.length-1?0:e+1;a(c[e].value)}})},{ImageToggleButton:"ControlButton"});define("MAF.control.TextEntryButton",function(){return new MAF.Class({ClassName:"ControlTextEntryButton",Extends:MAF.control.InputButton,Protected:{valueDisplayWidth:function(a){a.payload.skip=!0;this.parent(a)}},config:{showCursor:!0,cursorCharacter:"_",bulletCharacter:"\u2022",secureMask:!1,secureMaskType:"mask-submitted",keyboard:{layout:MAE.keyboard||"alphanumeric"},overlayBackgroundColor:"rgba(0,0,0,.7)",formBackgroundColor:"black"},createContent:function(){this.content=(new MAF.element.Text({ClassName:"ControlTextEntryButtonLabel",
label:this.config.label})).appendTo(this);this.valueDisplay=(new MAF.element.Text({ClassName:"ControlTextEntryButtonValue",styles:{width:this.width-2*Theme.getStyles("ControlTextEntryButtonValue","margin")}})).appendTo(this);!1!==this.config.theme&&this.valueDisplay.element.addClass("ControlTextEntryButtonValueTheme");this.valueDisplay._updateContent=function(a){this.valueDisplay.setText(this.getDisplayValue(a.payload.value))}.subscribeTo(this,["onValueInitialized","onValueChanged","onValueEdited"],
this);this.valueDisplay._updateContent({payload:{value:this.getValue()}})},getDisplayValue:function(a,b){var c=this.config.cursorCharacter,e=this.config.bulletCharacter,d=this.config.secureMask;a=b?a:a||this.getValue();if(d&&a.length){var f=e.repeat(a.length);switch(d){case "mask-character":c=b?e.repeat(a.length-1)+a.charAt(a.length-1)+c:f;break;case "mask-submitted":c=b?a+c:f;break;case "mask-all":c=f;break;default:c=f}}else c=a.length?b?a+c:a:b?c:"";return c},destroyOverlay:function(){this._TextEntryOverlay&&
(this._TextEntryOverlay.suicide(),delete this._TextEntryOverlay);this.focus()},suicide:function(){this._TextEntryOverlay&&(this._TextEntryOverlay.suicide(),delete this._TextEntryOverlay);this.parent()},changeValue:function(a,b){this._TextEntryOverlay=(new MAF.control.TextEntryOverlay({creator:this})).appendTo(this.getView())}})},{ControlTextEntryButton:{renderSkin:function(a,b,c,e,d){b=new Frame;d.applyLayer("BaseGlow",b);"focused"===a&&d.applyLayer("BaseFocus",b);d.applyLayer("BaseHighlight",b);
return b},styles:{width:"inherit",height:102}},ControlTextEntryButtonSubline:"ControlTextEntryButton",ControlTextEntryButtonLabel:{styles:{fontSize:20,hOffset:10,vOffset:62}},ControlTextEntryButtonValue:{styles:{display:"block",margin:10,minHeight:"42px",height:"1.9em",padding:"3px",truncation:"end"}},ControlTextEntryButtonValueTheme:{styles:{border:"2px solid white",borderRadius:"10px",backgroundColor:"rgba(150,150,150,.5)",opacity:0.9}}});define("MAF.control.TextEntryOverlay",function(){var a={},b=function(){this.config.creator.destroyOverlay()},c=function(a){var c=function(){a.payload&&a.payload.defaultActionCallback&&a.payload.defaultActionCallback.call&&a.payload.defaultActionCallback()};a.preventDefault();this.config.creator.fire("onCancel",{event:a,value:this.getValue(),cancelCallback:b.bindTo(this),defaultActionCallback:c})&&(b.call(this),c())},e=function(a){return(a||"").replace(/\</g,"&lt;").replace(/\>/,"&gt;")},d=function(b){var c=
this.inputField.element||!1,d=a[this._classID],l=c&&c.editable||!1,k=!1,m,p;switch(b.type){case "cursormoved":m=d.value;p=b.payload.cursorPosition||d.cursorPosition;break;case "valuechanged":m=b.payload.value||d.value,p=d.cursorPosition}k=m;m=this.config;var n=m.creator,d=n.config.bulletCharacter||m.bulletCharacter;m=(n.config.secureMask||m.secureMask)&&n.config.secureMaskType||m.secureMaskType;n=d.repeat(k.length);if(m&&n.length)switch(m){case "mask-character":n=d.repeat(k.length-1)+k.charAt(k.length-
1);break;case "mask-submitted":n=k;break;case "mask-all":break;default:n=k}else n=k;d=n;l?"valuechanged"===b.type&&this.inputField.setText(e(d)):(k=this.config.creator.config.cursorCharacter,d=d.substr(0,p)+k+d.substr(p,d.length),this.inputField.setText(e(d)));"valuechanged"===b.type&&(this.form.height=this.retrieve("formHeight")+c.getTextBounds().height-c.lineHeight);l&&isNumber(c.cursor)&&"cursormoved"===b.type&&(c.cursor=p||0)};return new MAF.Class({ClassName:"ControlTextEntryOverlay",Extends:MAF.element.Container,
Protected:{initValueManager:function(){var b,c=a[this._classID];c||(this.config.creator&&this.config.creator.config&&this.config.creator.config.keyboard&&(b=this.config.creator.config.keyboard.maxLength),this.config.keyboard&&(b=this.config.keyboard.maxLength),b||(b=this.config.maxLength),c=a[this._classID]=new MAF.keyboard.KeyboardValueManager({maxLength:b}),d.subscribeTo(c,["cursormoved","valuechanged"],this))},createContent:function(){var c=this.config.creator.getView(),d=a[this._classID];this.setStyle("backgroundColor",
this.config.creator.config.overlayBackgroundColor);c.element.allowNavigation=!1;var e=Theme.getStyles("ControlButton");Theme.getStyles("ControlTextEntryButtonLabel");var l=Theme.get("ControlTextEntryButton").submitButtonPadding||0,k=Theme.getStyles("ControlTextEntryTextButtonText"),m=this.config.creator.config.submitButtonLabel||widget.getLocalizedString("OK"),p=this.config.creator.config.cancelButtonLabel||widget.getLocalizedString("CANCEL");this.form=(new MAF.element.Container({styles:{width:c.width,
vAlign:"center",backgroundColor:this.config.creator.config.formBackgroundColor}})).appendTo(this);var n=Theme.get("ControlTextEntryOverlayClearButton")||{},q=(new MAF.element.Button({ClassName:"ControlTextEntryOverlayClearButton",content:new MAF.element.Text({label:FontAwesome.get("times"),styles:{width:"100%",height:"100%",anchorStyle:"center"}}),styles:Object.merge({},n.styling||{},{marginRight:(c.width-588)/2}),events:{onSelect:function(){d.value=""}}})).appendTo(this.form);this.inputField=(new MAF.element.TextField({ClassName:"ControlTextEntryButtonValue",
label:"",styles:{width:c.width-80,maxWidth:"508px",height:"auto",vOffset:0,hOffset:(c.width-588)/2,wrap:!0,truncation:null},events:{onCursor:function(a){d.cursorPosition=a.payload.caret||0},onNavigate:function(a){"right"===a.payload.direction&&d.cursorPosition===d.value.length&&(a.preventDefault(),q.focus())}.bindTo(this),onKeyDown:function(a){0>["left","right","up","down"].indexOf(a.payload.key)&&(a.payload.layout=this.keyboard.config.layout,a.preventDefault(),a.stopPropagation(),d.handleExternalKeyInput(a))}.bindTo(this)}})).appendTo(this.form);
this.inputField.element.addClass("ControlTextEntryButtonValueTheme");(new MAF.control.TextButton({label:p,styles:{vAlign:"bottom"},textStyles:k,events:{onSelect:function(){var a=this.getValue(),c=b.bindTo(this);this.config.creator.fire("onCancel",{value:a,cancelCallback:c})&&b.call(this)}.bindTo(this)}})).appendTo(this.form);e=e.height;(new MAF.control.TextButton({label:m,styles:{vAlign:"bottom",vOffset:e+l},textStyles:k,events:{onSelect:function(a){var c={value:d.value,cursorPosition:d.cursorPosition,
submitCallback:function(){this.config.creator.setValue&&this.config.creator.setValue(c.value);b.call(this)}.bindTo(this)};this.config.creator.fire("onSubmit",c)&&c.submitCallback()}.bindTo(this)}})).appendTo(this.form);k=Object.merge(this.config.creator.config.keyboard,{embedded:!1,styles:{vAlign:"bottom",width:c.width,vOffset:2*e+2*l,controlSize:"standard"},events:{onKeyDown:function(a){a.preventDefault();a.stopPropagation();a.payload.layout=this.keyboard.config.layout;d.handleExternalKeyInput(a)}.bindTo(this)}});
this.keyboard=(new MAF.control.Keyboard(k)).appendTo(this.form);c=(new MAF.element.Text({label:this.config.creator.config.label,styles:{fontSize:20,width:578,hOffset:(c.width-588)/2+10,vAlign:"bottom",vOffset:2*e+3*l+this.keyboard.height}})).appendTo(this.form);l=2*Theme.getStyles("ControlTextEntryButtonValue","margin");this.form.height=c.outerHeight+this.inputField.height+l;this.store("formHeight",this.form.height)},registerHandler:function(){this.boundHandler=c.subscribeTo(MAF.application,["onActivateBackButton",
"onActivateSettingsButton","onHideView"],this)},unregisterHandler:function(){this.boundHandler&&(this.boundHandler.unsubscribeFrom(MAF.application,["onActivateBackButton","onActivateSettingsButton","onHideView"]),delete this.boundHandler)}},config:{maxLength:255,element:View,creator:null},initialize:function(){this.parent();this.show.subscribeTo(this,"onAppend",this);this.initValueManager();this.createContent();var b=a[this._classID];b.value=this.config.creator.getValue();b.value.length&&(b.cursorPosition=
b.value.length)},getValue:function(){return a[this._classID].value},setValue:function(b){a[this._classID].value=b},show:function(){this.registerHandler();this.keyboard.focus();return this},suicide:function(){this.unregisterHandler();if(this.config.creator){var b=this.config.creator.getView();delete this.config.creator;b&&b.element&&(b.element.allowNavigation=!0)}a[this._classID]&&(a[this._classID].suicide(),delete a[this._classID]);this.inputField&&(this.inputField.suicide(),delete this.inputField);
this.keyboard&&(this.keyboard.suicide(),delete this.keyboard);this.form&&(this.form.suicide(),delete this.form);this.parent()}})},{ControlTextEntryOverlay:{styles:{width:"inherit",height:"inherit"}},ControlTextEntryOverlayClearButton:{styling:{border:"2px solid white",borderRadius:"10px",width:64,height:44,hAlign:"right",hOffset:2,vOffset:9},normal:{styles:{backgroundColor:Theme.getStyles("BaseGlow","backgroundColor")}},focused:{styles:{backgroundColor:Theme.getStyles("BaseFocus","backgroundColor")}}}});define("MAF.control.TabStrip",function(){var a=function(a,b){b=b||[];var d=Math.max(0,Math.min(a,b.length-1));return b[d]},b=function(){this.initTabs(this.config.tabs,this.focusIndex)};return new MAF.Class({ClassName:"ControlTabStrip",Extends:MAF.element.Container,Protected:{handleFocusEvent:function(a){var b=this.focusIndex||0,d=-1<parseInt(this.activeIndex,10)?this.activeIndex:-1;switch(a.type){case "onFocus":b===d&&(this.focusIndex=b=0<d?d-1:d<this.buttons.length-1?d+1:b);this.focusButton(b);break;
case "onBlur":this.blurButton(b)}},handleSelectEvent:function(a){return this.activateButton(this.focusIndex)},handleNavEvent:function(a){var b=this.focusIndex,d=this.activeIndex,f=!1;switch(a.payload.direction){case "left":b&&(f=b-1);f==d&&(f=d?d-1:!1);break;case "right":b<this.buttons.length-1&&(f=b+1),f&&f==d&&(f=d<this.buttons.length-1?d+1:!1)}!1!==f&&(a.preventDefault(),this.focusIndex=f,this.focusButton(f),this.blurButton(b))},focusButton:function(b){if(b=a(b,this.buttons)){var e=this.body.owner,
d=b.element.getBounds().left+e.scrollLeft-2*e.element.getBounds().left;b.fire("onFocus");e.scrollLeft=d}},blurButton:function(b){(b=a(b,this.buttons))&&b.fire("onBlur")},activateButton:function(a){var b=this.buttons[this.activeIndex]||!1,d=this.buttons[a]||!1;if(d&&d.fire){var f=this.getButtonConfig(d);this.activeIndex=f.index=a;d.fire("onActive");this.fire("onTabSelect",f)}b&&b.fire&&b.fire("onInactive")},generateButtons:function(a,b){for(this.buttons=this.buttons||[];0<this.buttons.length;){var d=
this.buttons.pop();d.tabController=null;d.suicide()}this.buttons.length=0;this.body.empty();a=-1<parseInt(a,10)?a:0;for(d=0;d<a;d++)this.buttons[d]=this.createButton(b).hide().appendTo(this.body);return this.buttons.length},createButton:function(a){var b=MAF.control.TabStripButton,d=this.config.buttonClass;a=d&&d.inheritsFrom&&d.inheritsFrom(b)?new d({noimages:a}):new b({noimages:a});a.tabController=this;return a}},config:{focus:!0,defaultTab:null},initialize:function(){b.subscribeTo(this,"onAppend",
this);this.handleFocusEvent.subscribeTo(this,["onFocus","onBlur"],this);this.handleSelectEvent.subscribeTo(this,"onSelect",this);this.handleNavEvent.subscribeTo(this,"onNavigate",this);this.activeIndex=0<this.config.defaultTab?--this.config.defaultTab:-1;this.focusIndex=this.activeIndex+1;this.parent();this.body=(new MAF.element.Core({ClassName:(this.config.ClassName||this.ClassName)+"Body",element:List})).appendTo(this)},initTabs:function(a,b){b=b||this.activeIndex+1;if(a){this.body.owner.scrollLeft=
0;this.activeIndex=0<b?--b:-1;this.focusIndex=1>this.activeIndex?0:this.activeIndex+1;this.focusIndex===a.length&&this.focusIndex--;this.config.tabs=a&&a.length?a:[];var d=Theme.getStyles(this.ClassName+"Container"),f=d&&d.paddingRight||0,g=!this.config.tabs.filter(function(a){return a.src||a.source}).length;this.generateButtons(this.config.tabs.length,g);this.buttons.forEach(function(a,b){var c=Theme.getStyles(a.ClassName);a.setTabContent(this.config.tabs[b],g);a.show();b==this.activeIndex?(this.fire("onTabInitialized",
this.config.tabs[b]),a.fire("onActive")):a.fire("onInactive");f+=a.element.clientWidth+2*c.marginLeft+parseInt(c.borderLeft,10)+parseInt(c.borderRight,10)},this);this.body.width=f<this.width?"auto":f;this.element.hasFocus&&(d=parseInt(this.focusIndex,10)||0,this.focusButton(d))}},getActiveIndex:function(){return this.activeIndex},getFocusIndex:function(){return this.focusIndex},getButtonIndex:function(a){return this.buttons.indexOf(a)},getButtonConfig:function(a){a=this.getButtonIndex(a);return-1<
a?Object.clone(this.config.tabs[a]):!1},generateStatePacket:function(a){return Object.merge({activeIndex:this.activeIndex,focusIndex:this.focusIndex,focused:this.element.hasFocus},a)},inspectStatePacket:function(a,b){if(!this.config.guid||a&&!(this.config.guid in a))return a;var d=a&&a[this.config.guid],f=typeof d;if("null"==f||"undefined"==f)return a;b?d.focused&&this.focus():"object"===f&&("activeIndex"in d&&(this.activeIndex=d.activeIndex),"focusIndex"in d&&(this.focusIndex=d.focusIndex));return d},
suicide:function(){if(this.buttons){for(;this.buttons.length;)this.buttons.pop().suicide();delete this.buttons}this.body.suicide();delete this.body;this.parent()}})},{ControlTabStrip:{styles:{borderBottom:"2px solid grey",width:"inherit",height:51}},ControlTabStripBody:{styles:{height:"inherit"}}});define("MAF.control.TabStripButton",function(){return new MAF.Class({ClassName:"ControlTabStripButton",Extends:MAF.element.Container,config:{element:Item},Protected:{onThemeNeeded:function(a){if(!a.defaultPrevented){var b=this.element;switch(a.type){case "onFocus":b.addClass("focused");break;case "onBlur":b.removeClass("focused");break;case "onActive":b.addClass("selected");break;case "onInactive":b.removeClass("selected")}}},getTabController:function(){return this.tabController}},initialize:function(){this.onThemeNeeded.subscribeTo(this,
["onAppend","onFocus","onBlur","onActive","onInactive"],this);this.parent();this.config.noimages||(this.image=(new MAF.element.Image({ClassName:this.ClassName+"Image"})).appendTo(this));this.content=(new MAF.element.Text({ClassName:this.ClassName+"Text"})).appendTo(this)},getButtonIndex:function(){return this.getTabController().getButtonIndex(this)},setTabContent:function(a,b){this.content.setText(a.label);if(this.image&&(a.src||a.source)){var c=2*Theme.getStyles(this.ClassName+"Image","marginTop"),
e=Theme.getStyles(this.ClassName+"Text","paddingLeft"),c=this.height-c;this.image.width=this.image.height=c;this.image.setSources(a);this.content.setStyle("paddingLeft",e+c+e/2)}},adjustTabContent:emptyFn,suicide:function(){delete this.tabController;this.image&&(this.image.suicide(),delete this.image);this.parent()}})},{ControlTabStripButton:{normal:{styles:{backgroundColor:Theme.getStyles("BaseGlow","backgroundColor"),borderTop:"2px solid white",borderLeft:"2px solid white",borderRight:"2px solid white",
borderTopLeftRadius:"10px",borderTopRightRadius:"10px",marginLeft:1,height:"inherit",marginRight:1}},selected:{styles:{backgroundColor:Theme.getStyles("BaseActive","backgroundColor")}},focused:{styles:{backgroundColor:Theme.getStyles("BaseFocus","backgroundColor")}}},ControlTabStripButtonText:{styles:{position:"relative",fontSize:20,fontWeight:"bold",paddingLeft:12,paddingRight:12,height:"inherit",anchorStyle:"center"}},ControlTabStripButtonImage:{styles:{marginLeft:12,marginTop:4}}});define("MAF.control.TabPipeButton",function(){return new MAF.Class({ClassName:"ControlTabPipeButton",Extends:MAF.control.TabStripButton})},{ControlTabPipeButton:"ControlTabStripButton",ControlTabPipeButtonText:"ControlTabStripButtonText",ControlTabPipeButtonImage:"ControlTabStripButtonImage"});define("MAF.control.TabPipe",function(){return new MAF.Class({ClassName:"ControlTabPipe",Extends:MAF.control.TabStrip,config:{buttonClass:MAF.control.TabPipeButton},initialize:function(){this.parent();this.body.appendTo((new MAF.element.Container({ClassName:"ControlTabPipeContainer"})).appendTo(this))}})},{ControlTabPipe:{styles:{borderBottom:"2px solid grey",width:"inherit",height:"57px"}},ControlTabPipeBody:"ControlTabStripBody",ControlTabPipeContainer:{styles:{width:"100%",height:"100%",paddingTop:6,
paddingLeft:18,paddingRight:18}}});define("MAF.control.PageIndicator",function(){return new MAF.Class({ClassName:"ControlPageIndicator",Extends:MAF.control.Button,Protected:{dispatchEvents:function(a,b){switch(a.type){case "navigate":if(a.detail&&a.detail.direction&&("left"===a.detail.direction||"right"===a.detail.direction))return a.preventDefault(),this.shiftSource(a.detail.direction)}this.parent(a,b)},createContent:function(){this.content=(new MAF.element.Text({ClassName:this.ClassName+"TextLink"})).appendTo(this)},buildDots:function(a,
b,c){if(this.config.updateDots&&this.config.updateDots.call)return this.config.updateDots.call(this,a,b,c);c="";for(var e=0;e<b;e++)c+=FontAwesome.get(a===e?"circle-o":"circle")+" ";return c.trim()},buildText:function(a,b,c){return this.config.updateText&&this.config.updateText.call?this.config.updateText.call(this,a,b,c):FontAwesome.get("caret-left")+" "+widget.getLocalizedString("PAGE",[parseInt(a,10)+1,b])+" "+FontAwesome.get("caret-right")},onSourceUpdated:function(a){return this.update(a.payload)}},
config:{threshold:0,arrowPadding:6,imageSources:null,autoDisableWhenEmpty:!0},initialize:function(){this.parent();var a=this.config.sourceElement||this.config.source;a&&this.attachToSource(a);this.config.source=null;delete this.config.source;this.config.sourceElement=null;delete this.config.sourceElement},attachToSource:function(a){if(!a||a===this.source)return this.update();this.source=a;this.onSourceUpdated.subscribeTo(this.source,"onStateUpdated",this);return this.update()},getSourceCurrentPage:function(){return this.source?
this.source.getCurrentPage():1},getSourcePageCount:function(){return this.source?this.source.getPageCount():1},getSourceCarousel:function(){return this.source?this.source.config.carousel:!1},update:function(a){var b=a&&a.currentPage?a.currentPage:this.getSourceCurrentPage()||0,c=a&&a.pageCount?a.pageCount:this.getSourcePageCount()||1,e=c<(parseInt(this.config.threshold,10)||0);this.content.setText((e?this.buildDots:this.buildText).call(this,b,c,a));e?this.content.setStyle("fontSize","66%"):this.content.setStyle("fontSize",
null);!1===this.config.focus||0===c?this.element.wantsFocus=!1:0<c&&(this.element.wantsFocus=!0);this.config.autoDisableWhenEmpty&&this.setDisabled(2>c);return this},shiftSource:function(a){this.source.shift(a)},suicide:function(){delete this.source;this.parent()}})},{ControlPageIndicator:{renderSkin:function(a,b,c,e,d){b=new Frame;d.applyLayer("BaseGlow",b);"focused"===a&&d.applyLayer("BaseFocus",b);d.applyLayer("BaseHighlight",b);return b},styles:{width:"inherit",height:"38px"}},ControlPageIndicatorTextLink:{styles:{width:"inherit",
height:"inherit",anchorStyle:"center"}}});define("MAF.control.ScrollIndicator",function(){return new MAF.Class({ClassName:"ControlScrollIndicator",Extends:MAF.control.Button,Protected:{dispatchEvents:function(a,b){switch(a.type){case "navigate":var c=a.detail&&a.detail.direction;if("up"===c||"down"===c){var e=this.getSourceCurrentPage(),d=this.getSourcePageCount()-1;if("up"===c&&0===e||"down"===c&&e===d)break;a.preventDefault();return this.shiftSource("up"===a.detail.direction?"left":"right")}}this.parent(a,b)},createContent:function(){this.content=
(new MAF.element.Container({ClassName:this.ClassName+"Scroll",styles:{visible:!1}})).appendTo(this)},onSourceUpdated:function(a){return this.update(a.payload)}},config:{autoHideWhenEmpty:!0,autoDisableWhenEmpty:!0,animation:{duration:0.3}},initialize:function(){this.parent();var a=this.config.sourceElement||this.config.source;a&&this.attachToSource(a);this.config.source=null;delete this.config.source;this.config.sourceElement=null;delete this.config.sourceElement},attachToSource:function(a){if(!a||
a===this.source)return this.update();this.source=a;this.onSourceUpdated.subscribeTo(this.source,"onStateUpdated",this);return this.update()},getSourceCurrentPage:function(){return this.source?this.source.getCurrentPage():1},getSourcePageCount:function(){return this.source?this.source.getPageCount():1},getSourceCarousel:function(){return this.source?this.source.config.carousel:!1},update:function(a){var b=a&&a.currentPage?a.currentPage:this.getSourceCurrentPage()||0;a=a&&a.pageCount?a.pageCount:this.getSourcePageCount()||
1;var c=1/a*this.height,b=c*b;if(this.content.height!==c||this.content.retrieve("offset")!==b)return this.config.autoDisableWhenEmpty&&this.setDisabled(2>a),this.config.autoHideWhenEmpty&&(this.content.visible=!(2>a)),this.content.height=c,this.content.retrieve("offset")!==b&&(this.content.store("offset",b),this.content.animate({properties:["top"],duration:this.config.animation&&("number"===typeOf(this.config.animation.duration)?this.config.animation.duration:0.3),top:b})),!1===this.config.focus||
0===a?this.element.wantsFocus=!1:0<a&&(this.element.wantsFocus=!0),this},updateAnimation:function(a){this.config.animation="object"===typeOf(a)?Object.merge(this.config.animation,a):this.config.animation},shiftSource:function(a){this.source.shift(a)},suicide:function(){delete this.source;this.parent()}})},{ControlScrollIndicator:{renderSkin:function(a,b,c,e,d){b=new Frame;d.applyLayer("BaseGlow",b);"focused"===a&&d.applyLayer("BaseFocus",b);d.applyLayer("BaseHighlight",b);return b},styles:{width:"7px",
height:"inherit",borderRadius:"3px"}},ControlScrollIndicatorScroll:{styles:{width:"inherit",height:"inherit",backgroundColor:"rgba(255,255,255,.9)",borderRadius:"inherit"}}});define("MAF.control.SingleTab",function(){return new MAF.Class({ClassName:"ControlSingleTab",Extends:MAF.control.Button,Protected:{dispatchEvents:function(a,b){switch(a.type){case "navigate":if(a.detail&&a.detail.direction)switch(a.detail.direction){case "left":case "right":a.preventDefault(),this.shiftSource(a.detail.direction)}}this.parent(a,b)},createContent:function(){this.text=(new MAF.element.Text({ClassName:(this.config.ClassName||this.ClassName)+"Text",styles:Object.merge({width:this.width-
40,height:this.height,hOffset:20,anchorStyle:"center",truncation:"SingleTab"===this.ClassName?"end":null},this.config.textStyles||{})})).appendTo(this);var a=this.getOptions();this.setValue(this.config.value||a&&0<a.length?a[0].value:"");delete this.config.value}},config:{carousel:!1},initialize:function(){this.parent();this.config.options&&(this.setOptions(this.config.options),delete this.config.options)},getValue:function(){return String(this.retrieve("value")||"")},setValue:function(a){var b=void 0===
this.retrieve("value");a=void 0===a?"":String(a);if((this.retrieve("value")||"")===a&&!b)return"";this.store("value",a);this.fire(b?"onTabInitialized":"onTabChanged",{value:a,index:this.getActiveIndex()});this.update();return this.getValue()},getDisplayValue:function(a){var b=a=a||this.getValue();this.getOptions().forEach(function(c){c.value==a&&(b=c.label)});return b},initTabs:function(a,b,c){this.setOptions(a,b,c);(0===this.getValue().length||c)&&this.setValue(this.config.value||this.getOptions()[0].value)},
setOptions:function(a,b,c){a=[].concat(a);a=a.map(function(a,c){var f="object"==typeOf(a),g=b&&b.length||0;return a?{value:f&&"value"in a?String(a.value):String(a),label:g>c?b[c]:f&&"label"in a?a.label:a}:a});this.eliminate("value");this.store("options",a);this.fire("onOptionsChanged",{options:this.getOptions()})},getOptions:function(){return this.retrieve("options")||[]},getOptionValues:function(){return this.getOptions().map(function(a){return a.value})},getOptionLabels:function(){return this.getOptions().map(function(a){return a.label})},
getActiveIndex:function(){var a=this.getOptions(),b=this.getValue(),a=a.map(function(a){return a.value}).indexOf(b);return 0>a?0:a},shiftSource:function(a){var b=this.getOptions(),c=!0===this.config.carousel,e=this.getActiveIndex();if(!(2>b.length)){switch(a){case "left":e=0===e?c?b.length-1:e:e-1;break;case "right":e=e===b.length-1?c?0:e:e+1}this.setValue(b[e].value)}},update:function(a){!0===a&&(a=this.getOptions(),this.setValue(a[0].value));a="";a=this.getDisplayValue();var b=this.width-160;this.text.textWidth>
b&&(b=Math.ceil(b/this.text.textWidth*a.length),a=a.truncate(b));a=this.config.updateText&&this.config.updateText.call?this.config.updateText.call(this,a):FontAwesome.get("caret-left")+" "+a.stripTags()+" "+FontAwesome.get("caret-right");this.text.setText(a)},suicide:function(){this.text.suicide();delete this.text;this.parent()}})},{ControlSingleTab:"ControlPageIndicator"});define("MAF.control.FixedTab",function(){return new MAF.Class({ClassName:"ControlFixedTab",Extends:MAF.control.SingleTab,Protected:{createContent:function(){this.right=(new MAF.element.Text({styles:Object.merge({height:this.height,anchorStyle:"leftCenter",color:"rgba(255,255,255,.7)"},this.config.textStyles||{})})).appendTo(this);this.parent()}},config:{optionsPadding:"    "},initialize:function(){this.parent();this.textPadding=this.config.optionsPadding.replace(/(?:(?:^ | $)|( ) )/gm,"&nbsp;")},
update:function(a){this.parent(a);a=this.getOptions();var b=a.map(function(a){return a.value}).indexOf(this.getValue());this.text.setStyles({width:null,hOffset:10});var c=this.text.outerWidth+10;this.right.setStyles({width:this.width-c-10,hOffset:c});var e="";a&&(a.forEach(function(a,c){c>b&&(e+=a.label+this.textPadding)},this),a.forEach(function(a,c){c<b&&(e+=a.label+this.textPadding)},this));this.right.setText(e)},suicide:function(){delete this.textPadding;this.right.suicide();delete this.right;
this.parent()}})},{ControlFixedTab:"ControlPageIndicator"});define("MAF.control.MetadataDisplay",function(){return new MAF.Class({ClassName:"ControlMetadataDisplay",Extends:MAF.control.Button,Protected:{createContent:function(){this.content=(new MAF.element.Text({ClassName:this.ClassName+"Text",styles:this.config.textStyles||{}})).appendTo(this)},updateContent:function(a){var b=a&&-1<parseInt(a.startIndex,10)?a.startIndex:this.source.getStartIndex();a=a&&-1<parseInt(a.focusIndex,10)?a.focusIndex:this.source.getFocusIndex();b=-1<parseInt(b,10)&&-1<parseInt(a,
10)?b+a:!1;(b=!1!==b&&this.getSourceDataItem(b))&&(a=this.config.updateMethod||this.updateMethod)&&a.call&&a.call(this,b)},updateMethod:function(a){var b="";switch(typeOf(a)){case "string":b=a;break;case "object":var c=this.config.metadataMap;c?b=a[c.label||c.text]:"label"in a?b=a.label:"text"in a&&(b=a.text)}this.setText(b)},onSourceUpdated:function(a){switch(a.type){case "onStateUpdated":return this.updateContent(a.payload);case "onFocus":this.fire("onFocus");this.content.thaw();break;case "onBlur":this.fire("onBlur"),
this.content.freeze()}}},config:{focus:!1},initialize:function(){this.parent();var a=this.config.sourceElement||this.config.source;a&&this.attachToSource(a);this.config.source=null;delete this.config.source;this.config.sourceElement=null;delete this.config.sourceElement},attachToSource:function(a){if(a===this.source)return this.update();this.source=a;this.onSourceUpdated.subscribeTo(this.source,["onStateUpdated","onFocus","onBlur"],this);return this.updateContent()},getSourceStartIndex:function(){return this.source&&
this.source.getStartIndex()},getSourceFocusIndex:function(){return this.source&&this.source.getFocusIndex()},getSourceDataItem:function(a){return this.source&&this.source.getDataItem(a)},setText:function(a){this.content.setText(a||"")},suicide:function(){delete this.source;this.parent()}})},{ControlMetadataDisplay:{styles:{width:"inherit",height:40}},ControlMetadataDisplayText:{styles:{width:"100%",height:"inherit",paddingLeft:5,paddingRight:5,anchorStyle:"center",truncation:"end"}}});define("MAF.control.Grid",function(){return new MAF.Class({ClassName:"ControlGrid",Extends:MAF.element.Grid,Protected:{onThemeNeeded:function(a){if(!a.defaultPrevented)switch(a.type){case "onFocus":this.renderSkin("focused");break;case "onBlur":case "onAppend":this.renderSkin("normal")}}},initialize:function(){!1!==this.config.theme&&this.onThemeNeeded.subscribeTo(this,["onAppend","onFocus","onBlur"],this);this.parent()}})},{});define("MAF.control.GridCell",function(){return new MAF.Class({ClassName:"ControlGridCell",Extends:MAF.element.GridCell,Protected:{onThemeNeeded:function(a){if(!a.defaultPrevented){var b=this.getCellCoordinates();switch(a.type){case "onFocus":this.renderSkin("focused",b);break;case "onBlur":case "onAppend":this.renderSkin("normal",b)}}}},initialize:function(){!1!==this.config.theme&&this.onThemeNeeded.subscribeTo(this,["onAppend","onFocus","onBlur"],this);this.parent()}})},{ControlGridCell:{renderSkin:function(a,
b,c,e,d){b=new Frame;d.applyLayer("BaseGlow",b);"focused"===a&&d.applyLayer("BaseFocus",b);d.applyLayer("BaseHighlight",b);return b}}});define("MAF.control.PhotoGridCell",function(){var a=function(){var a=Math.min(this.width,this.height)-2*(this.config.cellPadding||0);this.photo.aspectSizeMax(a);this.photo.show()};return new MAF.Class({ClassName:"ControlPhotoGridCell",Extends:MAF.control.GridCell,config:{cellPadding:16},initialize:function(){this.parent();this.photo=(new MAF.element.Image({ClassName:"ControlPhotoHolderImage",hideWhileLoading:!0,autoShow:!1,styles:{hAlign:"center",vAlign:"center"}})).appendTo(this);a.subscribeTo(this.photo,
"onLoaded",this);this.photo.setSources(this.config)},setSources:function(a){return this.photo.setSources(a)},setSource:function(a){return this.photo.setSource(a)}})},{ControlPhotoGridCell:"ControlGridCell",ControlPhotoHolderImage:{styles:{border:"2px solid white"}}});define("MAF.control.MediaTransportOverlay",function(){var a=emptyFn,b=120,c=!1,e=!1;return new MAF.Class({Extends:MAF.element.Container,ClassName:"ControlMediaTransportOverlay",config:{buttonOrder:"backwardseekButton rewindButton playButton forwardButton forwardseekButton stopButton infoButton resizeButton".split(" "),buttonOffset:10,buttonSpacing:6,fadeTimeout:12,playButton:!0,stopButton:!0,rewindButton:!0,forwardButton:!0,forwardseekButton:!1,backwardseekButton:!1,infoButton:!1,resizeButton:!1},
Protected:{onAppended:function(a){this.createContent();this.viewEventHandler.subscribeTo(this.getView(),["onUpdateView","onHideView","onDestroyView"],this);c=this.onMediaUpdated.subscribeTo(MAF.mediaplayer,["onTimeIndexChanged","onStateChange","onPlayPlaylistEntry"],this)},createTimer:function(){a=new Timer;a.ticking=!1;a.interval=this.config.fadeTimeout;a.onTimerFired=this.overlayFade.bindTo(this)},overlayFade:function(){a.ticking=!1;this.fire("onTransportOverlayHide")&&this.hide()},resetOverlayTimer:function(b){var c=
MAF.mediaplayer.constants.states;[c.PAUSE,c.STOP,c.REWIND].contains(b)?(a.ticking=!1,this.fire("onTransportOverlayShow")&&this.show()):(a.ticking&&(a.ticking=!1),a.ticking=!0)},viewEventHandler:function(a){switch(a.type){case "onUpdateView":this.registerKeyHandlers();break;case "onHideView":this.unregisterKeyHandlers();break;case "onDestroyView":this.unregisterKeyHandlers(),c.unsubscribeFrom(MAF.mediaplayer,["onTimeIndexChanged","onStateChange","onPlayPlaylistEntry"]),c=!1}},registerKeyHandlers:function(){e||
(e=this.onKeyPressHandler.subscribeTo(MAF.application,["onWidgetKeyPress"],this))},unregisterKeyHandlers:function(){e&&(e.unsubscribeFrom(MAF.application,["onWidgetKeyPress"]),e=!1)},onMediaUpdated:function(a){switch(a.type){case "onTimeIndexChanged":var c=MAF.mediaplayer.constants.states;[c.PLAY,c.FORWARD,c.REWIND].contains(MAF.mediaplayer.player.currentPlayerState)&&(this.updateTimeIndexDisplay(),this.moveProgressBar(Math.round(Math.ceil(a.payload.timeIndex)/Math.ceil(a.payload.duration)*b)));break;
case "onStateChange":this.updateState(a.payload.newState);this.resetOverlayTimer(a.payload.newState);break;case "onPlayPlaylistEntry":this.resetState()}},onKeyPressHandler:function(a){this.visible||(MAF.mediaplayer.player.currentPlayerState===MAF.mediaplayer.constants.states.PLAY&&"back"!==a.payload.key&&a.stop(),this.fire("onTransportOverlayShow")&&this.show());this.resetOverlayTimer(MAF.mediaplayer.player.currentPlayerState)},createContent:function(){this.controls={};this.body=(new MAF.element.Container({ClassName:this.ClassName+
"Body",styles:Theme.getStyles(this.ClassName+"Body","normal")})).appendTo(this);this.progressBar=(new MAF.element.Container({ClassName:this.ClassName+"ProgressBar"})).appendTo(this.body);this.controls.troth=(new MAF.element.Container({ClassName:this.ClassName+"ProgressBarTroth"})).appendTo(this.progressBar);this.controlBar=(new MAF.element.Container({ClassName:this.ClassName+"ControlBar",styles:Theme.getStyles(this.ClassName+"ControlBar","normal")})).appendTo(this.body);this.createControls();this.createIntervalText()},
createControls:function(){var a=0,b=Theme.get("ControlMediaTransportOverlay"),c=Theme.getStyles(this.ClassName+"Button","normal").width+this.config.buttonSpacing;this.config.buttonOrder.forEach(function(e,l){this.config[e]&&(this.controls[e]=(new MAF.control.Button({ClassName:this.ClassName+"Button",content:new MAF.element.Text({label:FontAwesome.get(b.icons[e]),styles:{width:"inherit",height:"inherit",anchorStyle:"center"}}),styles:{hOffset:a*c+this.config.buttonOffset,vAlign:"center"},events:{onSelect:function(a){if(this.visible)switch(a=
e.replace("Button",""),a){case "play":switch(MAF.mediaplayer.player.currentPlayerState){case MAF.mediaplayer.constants.states.PLAY:this.fire("onTransportButtonPress",{button:a,action:"pause"})&&MAF.mediaplayer.control.pause();break;default:this.fire("onTransportButtonPress",{button:a,action:"play"})&&MAF.mediaplayer.control.play()}break;case "stop":this.fire("onTransportButtonPress",{button:a,action:a})&&MAF.mediaplayer.control.stop();break;case "rewind":this.fire("onTransportButtonPress",{button:a,
action:a})&&MAF.mediaplayer.control.rewind();break;case "forward":this.fire("onTransportButtonPress",{button:a,action:a})&&MAF.mediaplayer.control.forward();break;default:this.fire("onTransportButtonPress",{button:a,action:null})&&log("no default handler for "+a)}}.bindTo(this)}})).appendTo(this.controlBar),a++)},this);this.body.setStyle("width",2*this.config.buttonOffset+a*c)},createIntervalText:function(){this.controls.intervalText=(new MAF.element.Text({label:" 00:00:00",styles:Object.merge({width:150,
hOffset:this.config.buttonOffset,vOffset:this.config.buttonSpacing},Theme.getStyles(this.ClassName+"IntervalText"))})).appendTo(this.controlBar);this.controls.durationText=(new MAF.element.Text({label:" 00:00:00",styles:Object.merge({width:150,hAlign:"right",hOffset:this.config.buttonOffset,vOffset:this.config.buttonSpacing,anchorStyle:"right"},Theme.getStyles(this.ClassName+"IntervalText"))})).appendTo(this.controlBar)},updateState:function(b){var c=MAF.mediaplayer.constants.states,e=Theme.get("ControlMediaTransportOverlay");
switch(b){case c.PAUSE:e.icons&&e.icons.playButton?this.controls.playButton.content.setText(FontAwesome.get(e.icons.playButton)):this.controls.playButton.content.setSource(e.sources.playButton);a.ticking=!1;this.visible||this.fire("onTransportOverlayShow")&&this.show();break;case c.PLAY:case c.BUFFERING:e.icons&&e.icons.playButton?this.controls.playButton.content.setText(FontAwesome.get(e.icons.pauseButton)):this.controls.playButton.content.setSource(e.sources.pauseButton);break;case c.STOP:this.resetState();
default:e.icons&&e.icons.playButton?this.controls.playButton.content.setText(FontAwesome.get(e.icons.playButton)):this.controls.playButton.content.setSource(e.sources.playButton)}},updateTimeIndexDisplay:function(a){(this.visible||a)&&MAF.mediaplayer.player.currentTimeIndex<=MAF.mediaplayer.player.currentMediaDuration&&(this.controls.intervalText.setText(this.formatTime(MAF.mediaplayer.player.currentTimeIndex)),this.controls.durationText.setText(this.formatTime(MAF.mediaplayer.player.currentMediaDuration)))},
moveProgressBar:function(a){this.controls.troth.setStyles({width:Math.round(this.progressBar.width/b*a),hOffset:0})}},initialize:function(){this.parent();b=180;this.createTimer();this.onAppended.subscribeOnce(this,["onAppend"],this)},focus:function(){if(this.controls&&this.controls.playButton)return this.controls.playButton.focus()},show:function(){this.updateTimeIndexDisplay(!0);this.parent()},hide:function(){this.parent()},resetState:function(){this.fire("onTransportOverlayShow")&&this.show();this.updateState(MAF.mediaplayer.constants.states.PAUSE);
this.updateTimeIndexDisplay(!0);this.moveProgressBar(0);this.focus()},formatTime:function(a){return a?numeral(Math.floor(a)).format("00:00:00"):"00:00:00"},suicide:function(){this.controls&&(Object.forEach(this.controls,function(a,b){b&&b.suicide&&(delete this.controls[a],b.suicide())},this),delete this.controls);this.controlBar&&(this.controlBar.suicide(),delete this.controlBar);this.progressBar&&(this.progressBar.suicide(),delete this.progressBar);this.body&&(this.body.suicide(),delete this.body);
void 0!==a&&(a.ticking=!1,a=a.onTimerFired=null,delete a);this.parent()}})},{ControlMediaTransportOverlay:{icons:{playButton:"play",pauseButton:"pause",stopButton:"stop",rewindButton:"backward",forwardButton:"forward",forwardseekButton:"fast-forward",backwardseekButton:"fast-backward",infoButton:"info",resizeButton:"expand"},styles:{width:"inherit",height:"inherit"}},ControlMediaTransportOverlayBody:{styles:{backgroundColor:"rgba(0,0,0,.8)",hAlign:"center",vAlign:"bottom",vOffset:200,width:10,height:140}},
ControlMediaTransportOverlayProgressBar:{styles:{backgroundColor:"darkgrey",borderTop:"2px solid grey",width:"inherit",height:"10%"}},ControlMediaTransportOverlayControlBar:{styles:{width:"inherit",height:"90%",vAlign:"bottom"}},ControlMediaTransportOverlayButton:{normal:{styles:{color:"white",fontSize:40,height:66,width:85}},focused:{styles:{color:Theme.getStyles("BaseFocus","backgroundColor")}},disabled:{styles:{color:"grey"}}},ControlMediaTransportOverlayProgressBarTroth:{styles:{backgroundColor:"darkred",
borderTop:"2px solid red",height:"100%",width:1,hOffset:-1}},ControlMediaTransportOverlayIntervalText:{styles:{minWidth:150,height:"1.3em",fontSize:22}}});define("MAF.dialogs.BaseDialogImplementation",function(){var a={};return new MAF.Class({ClassName:"BaseDialogImplementation",Implements:[Library.Storage],Protected:{removeHandler:function(){var b=a[this._classID];b&&(b.unsubscribeFrom(MAF.application,["onDialogDone","onDialogCancelled","onHideView"]),delete a[this._classID])}},config:{focusOnCompletion:null,isModal:!1},initialize:function(){this.store("key",md5(this._classID))},show:function(){if(MAF.application.isSidebarLoaded())return this.store("viewId",
MAF.application.getCurrentViewId()),a[this._classID]=this.dispatchEvents.subscribeTo(MAF.application,["onDialogDone","onDialogCancelled","onHideView"],this),MAF.HostEventManager.send("showDialog",this.getDialogConfig()),this},hide:function(){this.removeHandler();MAF.HostEventManager.send("hideDialog",this.getDialogConfig());return this},dispatchEvents:function(a){"onHideView"==a.type?this.retrieve("viewId")===a.payload.viewId&&this.removeHandler():a.payload.key===this.retrieve("key")&&(this.removeHandler(),
"onDialogCancelled"===a.type&&(a.payload.cancelled=!0),this.config.focusOnCompletion&&this.config.focusOnCompletion.focus&&this.config.focusOnCompletion.focus.call&&(this.config.focusOnCompletion.focus(),delete this.config.focusOnCompletion),this.handleCallback(a.payload))},getDialogConfig:function(){if(DEBUG)throw Error("All subclasses must provide this method!");},handleCallback:function(a){if(DEBUG)throw Error("All subclasses must provide this method!");}})});define("MAF.dialogs.Alert",function(){return new MAF.Class({ClassName:"AlertDialog",Extends:MAF.dialogs.BaseDialogImplementation,config:{title:"",message:"",buttons:[],cancelCallback:null},initialize:function(){this.parent();var a=[],b={};if(this.config.buttons&&this.config.buttons instanceof Array)[].concat(this.config.buttons).forEach(function(c){var e=md5(c.label+Date.now());c.callback&&c.callback.call&&this.store(e,c.callback);a.push({value:e,label:c.label});b[e]=c},this),this.store("configs",
b),this.store("buttons",a);else throw Error("Can't create an alert without any buttons");delete this.config.buttons},getDialogConfig:function(){return{type:"alert",conf:{ignoreBackKey:this.config.isModal,key:this.retrieve("key"),title:this.config.title,message:this.config.message,buttons:this.retrieve("buttons")}}},handleCallback:function(a){var b=a.selectedValue,c=this.retrieve(b),b={selected:this.retrieve("configs")[b]||{}};a.cancelled?this.config.cancelCallback&&this.config.cancelCallback.call&&
this.config.cancelCallback.call(this,b):c&&c.call&&c.call(this,b)}})});define("MAF.dialogs.TextEntry",function(){return new MAF.Class({ClassName:"TextEntryDialog",Extends:MAF.dialogs.BaseDialogImplementation,config:{title:"",message:"",callback:null,cancelCallback:null,maxLength:99},initialize:function(){this.parent()},getDialogConfig:function(){return{type:"textentry",conf:{maxLength:this.config.maxLength,ignoreBackKey:this.config.isModal,key:this.retrieve("key"),title:this.config.title,message:this.config.message}}},handleCallback:function(a){a.cancelled?this.config.cancelCallback&&
this.config.cancelCallback.call&&this.config.cancelCallback(a):this.config.callback&&this.config.callback.call&&this.config.callback(a)}})});define("MAF.dialogs.VerifyPin",function(){return new MAF.Class({ClassName:"VerifyPinDialog",Extends:MAF.dialogs.BaseDialogImplementation,config:{title:"",message:"",errorMessage:"",type:"adult",profileId:null,forgotPinCallback:null,callback:null,cancelCallback:null},initialize:function(){this.parent()},getDialogConfig:function(){return{type:"pin",conf:{key:this.retrieve("key"),title:this.config.title,message:this.config.message,errorMessage:this.config.errorMessage,type:this.config.type,profileId:this.config.profileId,
ignoreBackKey:this.config.isModal}}},handleCallback:function(a){a.cancelled?this.config.cancelCallback&&this.config.cancelCallback.call&&this.config.cancelCallback(a):a.forgot?this.config.forgotPinCallback&&this.config.forgotPinCallback.call&&this.config.forgotPinCallback(a):this.config.callback&&this.config.callback.call&&this.config.callback(a)}})});define("MAF.dialogs.Login",function(){return new MAF.Class({ClassName:"LoginDialog",Extends:MAF.dialogs.BaseDialogImplementation,config:{title:"",message:"",callback:null,cancelCallback:null},initialize:function(){this.parent()},getDialogConfig:function(){return{type:"login",conf:{ignoreBackKey:this.config.isModal,key:this.retrieve("key"),title:this.config.title,message:this.config.message}}},handleCallback:function(a){a.cancelled?this.config.cancelCallback&&this.config.cancelCallback.call&&this.config.cancelCallback(a):
this.config.callback&&this.config.callback.call&&this.config.callback(a)}})});define("MAF.system.BaseView",function(){var a={},b=function(a,b){var d="on"+b.capitalize();"updateView"===b&&a.thaw();if(a.transition&&a.transition[b]){var f=Object.merge({},a.transition[b],{events:{onAnimationEnded:function(){if("hideView"!==b&&"unselectView"!==b||!document.activeElement||a.element!==document.activeElement.window)a.fire(d)&&a[b].call(a),"hideView"===b&&a.freeze()}}});a.animate(f)}else a.fire(d)&&a[b].call(a),"hideView"===b&&a.freeze()};return new MAF.Class({ClassName:"BaseView",
Extends:MAF.element.Core,Protected:{initElement:function(){this.parent();var a=this.constructor.prototype;a&&a.constructor&&this.element.addClass(a.constructor.prototype.ClassName)},onLoadView:function(){this.fire("onCreateView")&&(MAF.Browser.webkit&&this.thaw(),this.createView())},onUnloadView:function(){this.fire("onDestroyView")&&this.destroyView();this.unregisterMessageCenterListeners();this.cache={};this.controls={};this.elements={};a[this._classID]=[]},onShowView:function(){b(this,"updateView")},
onHideView:function(){b(this,"hideView")},onSelectView:function(){b(this,"selectView")},onUnselectView:function(){b(this,"unselectView")},setInitialFocus:emptyFn,unregisterMessageCenterListeners:function(){if(0<a[this._classID].length)for(var b=!1;b=a[this._classID].pop();)b&&b.unsubscribeFrom&&b.unsubscribeFrom.call&&b.unsubscribeFrom(MAF.messages,MAF.messages.eventType)},getControlData:function(a,b){if(this.persist&&this.persist.___systemViewData___&&this.persist.___systemViewData___[a]){var d=
this.persist.___systemViewData___[a];b&&this.clearControlData(a);return d}},setControlData:function(a,b){this.persist=this.persist||{};this.persist.___systemViewData___=this.persist.___systemViewData___||{};this.persist.___systemViewData___[a]=b},clearControlData:function(a){delete this.persist.___systemViewData___[a]},getWindow:function(){return this}},config:{element:View},initialize:function(){this.parent();this.cache={};this.persist={};this.controls={};this.elements={};a[this._classID]=[];this.selected=
this.rendered=!1;this.config.backParams&&(this.backParams=this.config.backParams,this.config.backParams=null,delete this.config.backParams);this.config.persistParams&&(this.persist=this.config.persistParams,this.config.persistParams=null,delete this.config.persistParams);this.initView()},initView:emptyFn,createView:emptyFn,updateView:emptyFn,selectView:emptyFn,unselectView:emptyFn,destroyView:emptyFn,hideView:emptyFn,favbutton:emptyFn,getView:function(){return this},registerMessageCenterListenerCallback:function(b){b&&
b.subscribeTo&&a[this._classID].push(b.subscribeTo(MAF.messages,MAF.messages.eventType,this))},registerMessageCenterListenerControl:function(b){b&&b.fire&&a[this._classID].push(b.fire.subscribeTo(MAF.messages,MAF.messages.eventType,b))},suicide:function(){delete a[this._classID];delete this.persist;delete this.cache;delete this.viewBackParams;delete this.transition;Object.forEach(this.elements,function(a,b){b&&b.suicide&&(delete this.elements[a],b.suicide())},this);delete this.elements;Object.forEach(this.controls,
function(a,b){b&&b.suicide&&(delete this.controls[a],b.suicide())},this);delete this.controls;this.parent()}})});define("MAF.system.WindowedView",function(){var a=function(a,c){(a=Object.merge(this.persist,a,this.backParams))&&Object.forEach(this.controls,function(f,g){"array"===typeOf(g)?g.forEach(function(f,g){b.call(this,f,a,c)},this):b.call(this,g,a,c)},this)},b=function(a,b,c){a.config&&a.config.guid&&a.inspectStatePacket&&a.inspectStatePacket.call&&a.inspectStatePacket.call(a,b,c)},c=function(a,b){a.config&&a.config.guid&&a.generateStatePacket&&a.generateStatePacket.call&&(b[a.config.guid]=a.generateStatePacket.call(a))};
return new MAF.Class({ClassName:"WindowedView",Extends:MAF.system.BaseView,Protected:{dispatchEvents:function(a){this.parent(a);switch(a.type){case "navigate":this.fire("onNavigate",a.detail,a);break;case "navigateoutofbounds":this.fire("onNavigateOutOfBounds",a.detail,a)}},registerEvents:function(a){this.parent(["navigate","navigateoutofbounds"].concat(a||[]))},setInitialFocus:function(){!0===this.hasbeenfocused&&document.activeElement||(this.parent(),this.hasbeenfocused=!0,this.element.focusedView||
this.resetFocus(),a.call(this,this.getControlData("statePacket",!0),!0),this.fire("onFocusView")&&this.focusView())},onLoadView:function(a){MAF.utility.LoadingOverlay.show();this.parent(a)},onShowView:function(a){MAF.utility.LoadingOverlay.show();this.parent(a)},onSelectView:function(b){this.parent(b);this.element.focusedView||this.resetFocus();a.call(this,this.getControlData("statePacket"),!1);MAF.utility.LoadingOverlay.hide()},onUnselectView:function(a){this.parent(a);var b={};Object.forEach(this.controls,
function(a,e){"array"===typeOf(e)?e.forEach(function(a,e){c.call(this,a,b)},this):c.call(this,e,b)},this);this.setControlData("statePacket",b);this.hasbeenfocused=!1},onHideView:function(a){this.parent(a);this.backParams={}}},focusView:emptyFn,resetFocus:function(){!this.disableResetFocus&&this.element&&(this.element.navigate("down",[0,0])||this.element.focus())}})});define("MAF.system.SidebarView",function(){return new MAF.Class({ClassName:"SidebarView",Extends:MAF.system.WindowedView,viewType:"SIDEBAR"})},{SidebarView:{styles:{width:"588px",height:"930px"}}});define("MAF.system.FullscreenView",function(){return new MAF.Class({ClassName:"FullscreenView",Extends:MAF.system.WindowedView,viewType:"FULLSCREEN",config:{showPassthroughVideo:!1},setTVViewportSize:function(a,b,c,e){MAF.mediaplayer.setViewportBounds(a,b,c,e)},getTVViewportSize:function(){return MAF.mediaplayer.getViewportBounds()}})},{FullscreenView:{styles:{width:"1920px",height:"1080px"}}});define("MAF.system.IconView",function(){return new MAF.Class({ClassName:"IconView",Extends:MAF.system.BaseView,viewType:"ICON"})},{IconView:{styles:{width:"192px",height:"192px"}}});define("MAF.system.SnippetView",function(){return new MAF.Class({ClassName:"SnippetView",Extends:MAF.system.BaseView,viewType:"SNIPPET"})},{SnippetView:{styles:{width:"470px",height:"166px"}}});define("MAF.system.OptionSelectView",function(){return new MAF.Class({ClassName:"OptionSelectView",Extends:MAF.system.SidebarView,Protected:{cancelDialogNeeded:function(a){log("cancelDialogNeeded OptionSelectView")},onOptionCancelled:function(a){this.unregisterHandlers();var b={};this.config.data.guid&&(b[this.config.data.guid]={optionSelected:!1,optionViewId:this.config.id,cancelType:a});MAF.application.previousView(b)}},config:{data:{optionGridRows:1,optionGridColumns:1,value:null,backLabel:"Select an Option"}},
createView:function(){var a=(new MAF.control.BackButton({label:this.config.data.backLabel,events:{onSelect:this.cancelOption.bindTo(this)}})).appendTo(this),b=(new MAF.control.PageIndicator({styles:{vAlign:"bottom"}})).appendTo(this);this.elements.grid=(new MAF.control.Grid({rows:this.config.data.optionGridRows,columns:this.config.data.optionGridColumns,styles:{width:this.width,height:this.height-a.height-b.height,vOffset:a.height},cellCreator:this.optionCellCreator,cellUpdater:this.optionCellUpdater})).attachAccessory(b).appendTo(this)},
updateView:function(){this.registerHandlers();this.elements.grid.changeDataset(this.config.data.options)},submitOption:function(a){this.unregisterHandlers();var b={};this.config.data.guid&&(b[this.config.data.guid]={optionSelected:!0,option:a,optionViewId:this.config.viewId});MAF.application.previousView(b)},cancelOption:function(a){a.preventDefault();if(this.config.data.cancelDialog)this.cancelDialogNeeded(a.type);else this.onOptionCancelled(a.type)},registerHandlers:function(){this.cancel=this.cancelOption.bindTo(this);
this.cancel.subscribeTo(MAF.application,["onActivateBackButton","onActivateSettingsButton","onActivateHomeButton"])},unregisterHandlers:function(){this.cancel.unsubscribeFrom(MAF.application,["onActivateBackButton","onActivateSettingsButton","onActivateHomeButton"]);delete this.cancel},optionCellCreator:function(){var a=new MAF.control.GridCell({styles:this.getCellDimensions(),events:{onSelect:function(){var a=this.getCellDataItem();this.grid.owner.submitOption(a)}}});a.content=(new MAF.element.Text({ClassName:"ControlOptionSelectCellText",
styles:{width:a.width-10,height:a.height}})).appendTo(a);return a},optionCellUpdater:function(a,b){a.content.setText(b.label)}})},{ControlOptionSelectCellText:{styles:{width:"100%",height:"inherit",paddingLeft:10,paddingRight:10,anchorStyle:"leftCenter"}}});define("MAF.views.AboutDocView",function(){return new MAF.Class({ClassName:"AboutDocView",Extends:MAF.system.SidebarView,config:{data:{backLabel:"Back",value:""}},createView:function(){this.controls.backButton=(new MAF.control.BackButton({guid:this._classID+".BackButton",label:this.config.data.backLabel})).appendTo(this);this.controls.pageIndicator=(new MAF.control.PageIndicator({guid:this._classID+".PageIndicator",styles:{width:this.width,vAlign:"bottom"}})).appendTo(this);var a=Theme.getStyles("AboutDocViewTextGrid",
"margin");this.elements.textGrid=(new MAF.element.TextGrid({ClassName:"AboutDocViewTextGrid",styles:{width:this.width-2*a,height:this.height-(this.controls.pageIndicator.height+this.controls.backButton.height)-2*a,vOffset:this.controls.backButton.outerHeight,anchorStyle:"justify"}})).appendTo(this).attachAccessories(this.controls.pageIndicator)},updateView:function(){this.elements.textGrid.setText(this.config.data.value)}})},{AboutDocViewTextGrid:{styles:{fontSize:22,color:"#FFFFFF",margin:7,wrap:!0}}});define("MAF.control.SelectButton",function(){return new MAF.Class({ClassName:"ControlSelectButton",Extends:MAF.control.InputButton,config:{valueOnSubline:!1,fillEmptySpace:!1,optionViewClass:MAF.system.OptionSelectView,optionGridRows:1,optionGridColumns:1},changeValue:function(a,b){var c=this.config.optionViewClass;!DEBUG||c&&c.inheritsFrom&&c.inheritsFrom(MAF.system.SidebarView)||warn(this.ClassName,"buildOptionView","no usable view class in config.optionViewClass");c={id:this.config.optionListViewId||
this._classID+"."+c.prototype.ClassName,data:{guid:this.config.guid,backLabel:this.config.label,options:this.getOptions(),value:b,optionGridRows:this.config.optionGridRows,optionGridColumns:this.config.optionGridColumns,cancelDialog:this.config.cancelDialog},viewClass:c};this.optionListViewId=c.id;MAF.application.addViewConfig(c);MAF.application.loadView(c.id)},inspectStatePacket:function(a,b){var c=this.parent(a,b);if(!b){var e;if(c){if(c.optionViewId){var d=c.optionViewId;d&&(MAF.application.removeView(d),
delete this.optionListViewId)}switch(c.cancelType){case "onActivateHomeButton":e=MAF.application.loadDefaultView;break;case "onActivateSettingsButton":e=MAF.application.loadSettingsView}}try{return c}finally{e&&e()}}}})},{ControlSelectButton:"ControlButton",ControlSelectButtonSubline:"ControlInputButtonSubline"});define("MAF.views.AboutBox",function(){return new MAF.Class({ClassName:"AboutBoxView",Extends:MAF.system.SidebarView,config:{BackButtonTitle:"ABOUT"},createView:function(){var a=["copyright","tos","privacy"],b=parseInt(Theme.getStyles("ControlTextButton","normal").height,10)||51,c=(new MAF.control.BackButton({label:widget.getLocalizedString(this.config.BackButtonTitle),backParams:this.viewBackParams||{},events:{onSelect:function(a){this.getView().fire("onBackButtonSelect",a)||a.preventDefault()}}})).appendTo(this),
e=[];"de"===profile.countryCode&&(this.config.pages||(this.config.pages=[]),0===this.config.pages.filter(function(a){return"impressum"===a.id}).length&&this.config.pages.push({id:"impressum",name:widget.getLocalizedString("IMPRESSUM"),srcString:filesystem.readFile("About/"+profile.locale+"/impressum.txt",!0)}));"array"===typeOf(this.config.pages)?(this.config.pages.forEach(function(b){if(-1<a.indexOf(b.id)){if(!("srcString"in b))try{b.srcString=filesystem.readFile("About/"+widget.locale+"/"+b.id+
".txt",!0)}catch(c){b.srcString=""}e.splice(0,0,b)}else e.push(b)}),e.length=5<e.length?5:e.length):this.config.pages=[];var c=(new MAF.element.Container({styles:{width:this.width,height:this.height-(b*e.length+c.height),vOffset:c.height}})).appendTo(this),d=(new MAF.element.Text({ClassName:"AboutBoxViewMetadataName",label:widget.getLocalizedString(widget.name),styles:{fontSize:Theme.getStyles("AboutBoxViewMetadataName","fontSize")}})).appendTo(c),f=(new MAF.element.Text({ClassName:"AboutBoxViewMetadataDescription",
label:widget.getLocalizedString(widget.description),styles:{fontSize:Theme.getStyles("AboutBoxViewMetadataDescription","fontSize"),vOffset:d.outerHeight,wrap:!0,truncation:"end"}})).appendTo(c);f.visibleLines=3;d=Theme.get("AboutBoxViewMetadataAuthorNote","PAD_TOP");d=(new MAF.element.Text({ClassName:"AboutBoxViewMetadataAuthorNote",label:widget.getLocalizedString("WIDGET_BY")+"...",styles:{fontSize:Theme.getStyles("AboutBoxViewMetadataAuthorNote","fontSize"),vOffset:f.outerHeight+d}})).appendTo(c);
d=(new MAF.element.Text({ClassName:"AboutBoxViewMetadataAuthor",label:widget.author&&0!==widget.author.length&&widget.author!==widget.company?widget.author+", "+(widget.company||""):widget.company||"",styles:{fontSize:Theme.getStyles("AboutBoxViewMetadataAuthor","fontSize"),vOffset:d.outerHeight}})).appendTo(c);f=(new MAF.element.Text({ClassName:"AboutBoxViewMetadataVersion",label:widget.version,styles:{fontSize:Theme.getStyles("AboutBoxViewMetadataVersion","fontSize"),vOffset:d.outerHeight}})).appendTo(c);
if(widget.authorURL||widget.url)d=Theme.get("AboutBoxViewMetadataUrlNote","PAD_TOP"),d=(new MAF.element.Text({ClassName:"AboutBoxViewMetadataUrlNote",label:widget.getLocalizedString("MORE_INFO")+"...",styles:{fontSize:Theme.getStyles("AboutBoxViewMetadataUrlNote","fontSize"),vOffset:f.outerHeight+d}})).appendTo(c),(new MAF.element.Text({ClassName:"AboutBoxViewMetadataUrl",label:widget.authorURL||widget.url,styles:{fontSize:Theme.getStyles("AboutBoxViewMetadataUrl","fontSize"),vOffset:d.outerHeight}})).appendTo(c);
d=Theme.get("AboutBoxViewMetadataCopyright","PAD_BOTTOM");(new MAF.element.Text({ClassName:"AboutBoxViewMetadataCopyright",label:widget.getLocalizedString("COPYRIGHT",(new Date).getFullYear())+" "+widget.copyright,styles:{fontSize:Theme.getStyles("AboutBoxViewMetadataCopyright","fontSize"),vOffset:c.height-d}})).appendTo(c);d=Theme.get("AboutBoxViewMetadataReserved","PAD_BOTTOM");(new MAF.element.Text({ClassName:"AboutBoxViewMetadataReserved",label:widget.getLocalizedString("RIGHTS_RESERVED"),styles:{fontSize:Theme.getStyles("AboutBoxViewMetadataReserved",
"fontSize"),vOffset:c.height-d}})).appendTo(c);if(e.length){var g=null,h=(new MAF.element.Core({styles:{width:this.width,height:b*e.length,vAlign:"bottom"}})).appendTo(this);e.forEach(function(a){g=a instanceof MAF.element.Button?a:new MAF.control.TextButton({label:a.name,value:a.srcString,styles:{vOffset:g?g.outerHeight:0},events:{onSelect:function(){var a={id:this._classID+"AboutDocView",data:{backLabel:this.config.label,value:this.config.value},viewClass:MAF.views.AboutDocView};MAF.application.addViewConfig(a);
MAF.application.loadView(a.id,{documentText:this.config.value})}}});g.appendTo(h)})}}})},{AboutBoxView:"SidebarView",AboutBoxViewMetadataName:{styles:{width:"100%",paddingLeft:5,paddingRight:5,truncation:"end",vOffset:67,fontSize:32}},AboutBoxViewMetadataDescription:{styles:{width:"100%",paddingLeft:5,paddingRight:5,fontSize:18,fontWeight:"bold"}},AboutBoxViewMetadataAuthorNote:{PAD_TOP:20,styles:{hOffset:5,fontSize:23}},AboutBoxViewMetadataAuthor:{styles:{hOffset:5,fontSize:23}},AboutBoxViewMetadataVersion:{styles:{hOffset:5,
fontSize:23}},AboutBoxViewMetadataUrlNote:{PAD_TOP:20,styles:{hOffset:5,fontSize:18}},AboutBoxViewMetadataUrl:{styles:{hOffset:5,fontSize:18}},AboutBoxViewMetadataCopyright:{PAD_BOTTOM:40,styles:{hOffset:5,fontSize:15}},AboutBoxViewMetadataReserved:{PAD_BOTTOM:20,styles:{hOffset:5,fontSize:15}}});define("MAF.views.SearchSuggest",function(){return new MAF.Class({ClassName:"SearchSuggestView",Extends:MAF.system.SidebarView,Protected:{showResultsGrid:function(){this.hideNoResults();this.controls.grid.visible||this.controls.grid.show();this.controls.indic.visible||this.controls.indic.show()},showNoResults:function(){this.hideResultsGrid();this.elements.noResultsIcon.visible||this.elements.noResultsIcon.show();this.elements.noResultsText.visible||this.elements.noResultsText.show()},hideResultsGrid:function(){this.controls.grid.visible&&
this.controls.grid.hide();this.controls.indic.visible&&this.controls.indic.hide()},hideNoResults:function(){this.elements.noResultsIcon.visible&&this.elements.noResultsIcon.hide();this.elements.noResultsText.visible&&this.elements.noResultsText.hide()}},config:{BackButtonTitle:"BACK",SearchButtonTitle:"SEARCH",NoResultsMessage:"NO_RESULTS",Cursor:"_",DisplayDefaultValue:"",AutocompleteThreshold:3,GridRows:6,GridColumns:1,bulletCharacter:"\u2022",secureMask:!1,secureMaskType:"mask-submitted",formBackgroundColor:"#000",
keyboard:{startFocused:!0,maxLength:15}},valueManagerUpdate:function(a){var b=this.elements.valueManager.value,c=this.elements.valueManager.cursorPosition,e=!1,d,e=this.config.bulletCharacter;d=this.config.secureMask&&this.config.secureMaskType;var f=e.repeat(b.length);if(d&&f.length)switch(d){case "mask-characer":f=e.repeat(b.length-1)+b.charAt(b.length-1);break;case "mask-submitted":f=b;break;case "mask-all":break;default:f=b}else f=b;d=f;e=this.config.Cursor;d=d.substring(0,c)+e+d.substring(c,
d.length);this.controls.keyOutput.setText(d);this.hideNoResults();b.length>=this.config.AutocompleteThreshold&&a&&a.type&&"valuechanged"===a.type?this.performAutocomplete(b):this.hideResultsGrid()},createView:function(){this.elements.valueManager=new MAF.keyboard.KeyboardValueManager({maxLength:this.config.keyboard.maxLength});this.valueManagerUpdate.subscribeTo(this.elements.valueManager,["cursormoved","valuechanged"],this);this.elements.valueManager.cursorPosition=this.elements.valueManager.value.length;
this.controls.backButton=(new MAF.control.BackButton({label:widget.getLocalizedString(this.config.BackButtonTitle)})).appendTo(this);this.controls.grid=(new MAF.control.Grid({guid:this.config.viewId+".grid",rows:this.config.GridRows,columns:this.config.GridColumns,styles:Theme.getStyles("SearchSuggestResultGrid"),cellCreator:function(){return new MAF.control.GridCell({content:this.getView().cellContentCreator(),events:{onSelect:function(a){this.getView().performRowSelected(a.payload.dataItem)}}})},
cellUpdater:function(a,c){this.getView().cellContentUpdater(a.content,c)}})).appendTo(this);this.controls.indic=(new MAF.control.PageIndicator({guid:this.config.viewId+".indicator",styles:{vOffset:this.controls.grid.outerHeight}})).appendTo(this).attachToSource(this.controls.grid);this.controls.submitButton=(new MAF.control.TextButton({label:widget.getLocalizedString(this.config.SearchButtonTitle),styles:{vAlign:"bottom"},events:{onSelect:function(a){a=this.getView();a.performSearch(a.elements.valueManager.value)}}})).appendTo(this);
this.controls.keyboardContainer=(new MAF.element.Container({styles:{width:this.width,height:this.height-this.controls.indic.outerHeight-this.controls.submitButton.height,vAlign:"bottom",vOffset:this.controls.submitButton.height}})).appendTo(this);var a=Theme.get("ControlTextEntryOverlayClearButton","styling")||{};this.controls.clearButton=(new MAF.element.Button({ClassName:"ControlTextEntryOverlayClearButton",content:new MAF.element.Text({label:FontAwesome.get("times"),styles:{width:"100%",height:"100%",
anchorStyle:"center"}}),guid:this.config.viewId+".clearButton",styles:a,events:{onSelect:function(){this.getView().elements.valueManager.value=""},onNavigate:function(a){switch(a.payload.direction){case "right":a.preventDefault()}}}})).appendTo(this.controls.keyboardContainer);this.controls.textHighlight=(new MAF.element.Container({ClassName:"ControlTextEntryOverlayTextHighlight",focus:!1})).appendTo(this.controls.keyboardContainer);this.controls.textHighlight.hide();this.controls.keyOutput=(new MAF.element.TextField({ClassName:"ControlTextEntryButtonValue",
guid:this.config.viewId+".keyOutput",label:"",focus:!0,styles:{width:this.width-(a.width||0)-20},events:{onKeyDown:function(a){var c=this.getView();a.KFEvent&&13==a.KFEvent.keyCode?c._onSubmit(a):(a.payload.layout=c.controls.keyCaps.config.layout,c.elements.valueManager.handleExternalKeyInput(a))},onFocus:function(a){var c=this.getView();c.controls.keyOutput.element.allowCursor?c.controls.textHighlight.show():(a.preventDefault(),c.controls.clearButton.focus())},onBlur:function(){var a=this.getView();
a.controls.keyOutput.element.allowCursor&&a.controls.textHighlight.hide()},onNavigate:function(a){var c=this.getView();switch(a.payload.direction){case "left":a.preventDefault();c.elements.valueManager.moveCursorLeft();break;case "right":c.elements.valueManager.cursorPosition<c.elements.valueManager.value.length&&(a.preventDefault(),c.elements.valueManager.moveCursorRight())}}}})).appendTo(this.controls.keyboardContainer);this.controls.keyOutput.element.addClass("ControlTextEntryButtonValueTheme");
Theme.get("ControlTextEntryButtonValue","cursor");this.controls.outputLabel=(new MAF.element.Text({ClassName:"ControlTextEntryButtonLabel",label:widget.getLocalizedString(this.config.label)})).appendTo(this.controls.keyboardContainer);this.controls.outputLabel.setStyles({width:0,height:0});this.elements.keyCaps=(new MAF.control.Keyboard({id:this.config.viewId+".keyCaps",embedded:!1,maxLength:this.config.keyboard.maxLength||255,layout:MAE.keyboard||"alphanumeric",controlSize:"standard",styles:{width:this.width,
vAlign:"bottom"},events:{onKeyDown:function(a){var c=this.getView();a.payload.layout=c.elements.keyCaps.config.layout;c.elements.valueManager.handleExternalKeyInput(a);a.KFEvent&&c._isCursorSupported()&&!c.controls.keyOutput.element.hasFocus&&c.controls.keyOutput.focus()}}})).appendTo(this.controls.keyboardContainer);this.elements.noResultsIcon=(new MAF.element.Text({label:FontAwesome.get(Theme.get("SearchSuggestNoResultsIcon","icon")),styles:Theme.getStyles("SearchSuggestNoResultsIcon")})).appendTo(this);
this.elements.noResultsText=(new MAF.element.Text({label:widget.getLocalizedString(this.config.NoResultsMessage),styles:Object.merge(Theme.getStyles("SearchSuggestNoResultsText"),{wrap:!0})})).appendTo(this);this.controls.keyboardContainer.renderSkin("ControlTextEntryOverlay")},updateView:function(){this.valueManagerUpdate()},focusView:function(){null===this.element.focusedView&&this.elements.keyCaps.focus();this.elements.keyCaps.focus()},cellContentCreator:function(){return new MAF.element.Text({styles:Object.merge(Theme.getStyles("SearchSuggestResultGridText"),
{width:"90%",truncation:"end",vOffset:15,hOffset:10})})},cellContentUpdater:function(a,b){a.setText(b.label)},dataReady:function(a,b){!a||1>a.length?b&&this.showNoResults():(this.controls.grid.changeDataset(a,!0),this.showResultsGrid())},performRowSelected:function(){throw Error("There is no point in having a Search Suggest control if you will do nothing with what the user selected, so implement this method!");},performAutocomplete:function(a){this.performSearch(a)},performSearch:function(){throw Error("There is no point in having a Search Suggest control if you will do nothing with what the user selected, so implement this method!");
}})},{SearchSuggestView:"SidebarView",SearchSuggestNoResultsIcon:{icon:"search",styles:{visible:!1,width:550,color:"#FFFFFF",fontSize:120,vOffset:151,textAlign:"center"}},SearchSuggestNoResultsText:{styles:{visible:!1,color:"#FFFFFF",vOffset:351,width:550,fontSize:32,textAlign:"center",hAlign:"center"}},SearchSuggestResultGrid:{styles:{width:"100%",height:360,vOffset:52}},ControlTextEntryOverlayTextHighlight:{}});
