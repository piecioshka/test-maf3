// Copyright 1999-2014 SeaChange International
// All Rights Reserved.
NAF.conf={debug:0,traxisip:"213.224.176.50",traxisid:"Dxxxx01",chanlocsrc:"traxis",traxisidprefix:"CpeId",traxisUrl:"",enableHttpVod:!1,eRouterIp:"192.168.0.1",eRouterAdminName:"admin",eRouterAdminPassword:"admin",eRouterRetry:5,eRouterRetryInterval:10,numhours:6,channelRefreshInterval:0,refreshInterval:0,refreshInterval0:3600,reminderTime:1,fetchInitEventsInChunks:!0,eventsRefreshInChunks:20,eventsRefreshTimeout:200,profileRefreshInterval:3600,pretune:!0,previouspretunes:0,followingpretunes:1,codcatalog:"root",
searchCacheSize:10,upcPrice:!1,maxPinAttempts:3,pinRetryInterval:300,maxHistory:5,maxHistoryDuration:0,pinAttemptsDuration:300,wakeuptime:120,prerecordwakeuptime:3,teletextHandling:!1,langTimeOut:500,mediawareip:"",chanUpDownKeyHandling:!1,startChannel:"CNN",initChannel:"lastViewed",lockedChannels:[],profileAgeRating:0,enable000reload:!1,useNewRecordingManager:!0,useUnifiedMapPlayer:!0,tuneByChanLocator:!0,catchUpCategory:"",catchUpChannel:0,genreData:JSON.stringify({genres:[{code:"1",name:"movie",
subgenres:[]},{code:"2",name:"news",subgenres:[]},{code:"3",name:"show",subgenres:[]},{code:"4",name:"sports",subgenres:[]},{code:"5",name:"children's",subgenres:[]},{code:"6",name:"music",subgenres:[]},{code:"7",name:"arts",subgenres:[]},{code:"8",name:"social",subgenres:[]},{code:"9",name:"education",subgenres:[]},{code:"10",name:"leisure",subgenres:[]},{code:"11",name:"special",subgenres:[]},{code:"12",name:"entertainment",subgenres:[]},{code:"13",name:"crime",subgenres:[]},{code:"14",name:"series",
subgenres:[]},{code:"15",name:"adult",subgenres:[]}]}),provideDefaultSettings:!0,applications:[{id:"id1",name:"MetrologicalAppStore",shortSynopsis:"The Metrological App Store",isAdult:!1,isViewable:!0,isEntitled:!0,url:"http://widgets.metrological.com/dawn/pl/production/",type:"store"}],blockUnratedTitleEvents:!0,maxRecommendations:30,recommendationTimeout:1800,maxSearches:0,maxChannelCategories:1,maxCODOrphans:10,codOrphanTimeout:1800,reminderRefreshInterval:7200,bkwdCompatibleNotifications:!1,enableCODCategorySingleFetch:!0,
titleSchema:{basic:["name","pictures","isAdult"],extended:"name shortName shortSynopsis longSynopsis isViewable isEntitled isPreview isAdult ageRating pictures contents events previews genres seasonNum episodeNum episodeName seriesName isViewedCompletely productionDate broadcastDate bookmark productionLocations actors directors".split(" ")},hdmiComponent:{"1080p":"1080p60hz2d","1080i":"1080i30hz2d","720p":"720p60hz2d","576p":"720p60hz2d",auto:"720p60hz2d","480p":"480p60hz2d"},audioFormat:{auto:"stereo",
dolby:"ac3"}};function nafCleanupConf(){NAF.conf.canned&&(NAF.conf.traxisid="");if("undefined"!==typeof window){for(var g=[],l,k=location.href.slice(location.href.indexOf("?")+1).split("&"),f=0;f<k.length;f++)l=k[f].split("="),g.push(l[0]),g[l[0]]=l[1];f=0;for(l=g.length;f<l;f++){var k=g[f].toLowerCase(),h;for(h in NAF.conf)if(k==h.toLowerCase()){k=g[g[f]];isNaN(k)?NAF.conf[h]="true"===k?!0:"false"===k?!1:k:NAF.conf[h]=parseFloat(k,10);break}}}}nafCleanupConf();nafCleanupConf=null;
NAF.utils={convertJSONDateToJSDate:function(g){var l;return"string"===typeof g&&(l=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(g))?new Date(Date.UTC(+l[1],+l[2]-1,+l[3],+l[4],+l[5],+l[6])):l},convertLocalJSONDateToLocalJSDate:function(g){var l;return"string"===typeof g&&(l=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(g))?new Date(+l[1],+l[2]-1,+l[3],+l[4],+l[5],+l[6]):l},convertJSONDateToMins:function(g){g=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(g);
return(new Date(Date.UTC(+g[1],+g[2]-1,+g[3],+g[4],+g[5],+g[6]))).getTime()/6E4},convertJSONDateToJSDateCanned:function(g){var l,k=new Date;return"string"===typeof g&&(l=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(g))?new Date(Date.UTC(+k.getUTCFullYear(),+k.getUTCMonth(),+k.getUTCDate(),+l[4],+l[5],+l[6])):l},convertJSDateToJSONDate:function(g){var l=g.getUTCMonth()+1;10>l&&(l="0"+l);var k=g.getUTCDate();10>k&&(k="0"+k);var f=g.getUTCHours();10>f&&(f="0"+f);var h=g.getUTCMinutes();
10>h&&(h="0"+h);return g.getUTCFullYear()+"-"+l+"-"+k+"T"+f+":"+h+":00Z"},clearTimer:function(g){g&&clearTimeout(g)},encodeXML:function(g){return g.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},throttle:function(g,l){function k(){f=null}var f,h,q;return function(){h=this;q=arguments;f||(result=g.apply(h,q),f=setTimeout(k,l))}},decimalToBinary:function(g,l){for(var k=
g,f=0,h=[];0<k;)f=k%2,k=Math.floor(k/2),h.unshift(f);k=l-h.length;if(0<k)for(f=0;f<k;f++)h.unshift(0);else if(0>k)return null;return h},copyByValue:function(g){function l(f,h){h=h||[];if(!f||"object"!=typeof f)return!1;var g=Object.keys(f),r,m;h.push(f);for(r=g.length-1;0<=r;r--)if((m=f[g[r]])&&"object"==typeof m&&(0<=h.indexOf(m)||l(m,h)))return!0;h.pop(f);return!1}var k=g instanceof Array?[]:new g.constructor;for(i in g)g[i]&&g[i]instanceof Date?k[i]=new Date(g[i]):g[i]&&"object"==typeof g[i]?l(g[i])?
k[i]=g[i]:k[i]=NAF.utils.copyByValue(g[i]):k[i]=g[i];return k},Log:function(){function g(f,h){if(l&&f.rank<=t.rank){console.log((new Date).toISOString()+" "+f.text+" "+k+" "+h[0]);for(var b=1;b<h.length;b++)console.log(h[b])}}var l=!1,k="",f={text:" FATAL ",rank:0},h={text:" ERROR ",rank:1},q={text:" WARN  ",rank:2},r={text:" DEBUG ",rank:3},m={text:" TRACE ",rank:4},p={text:" INFO  ",rank:5},t=m;this.trace=function(){g(m,arguments)};this.debug=function(){g(r,arguments)};this.info=function(){g(p,
arguments)};this.warn=function(){g(q,arguments)};this.error=function(){g(h,arguments)};this.fatal=function(){g(f,arguments)};this.enable=function(){l=!0};this.disable=function(){l=!1};this.setAppName=function(f){k=f};this.setLevel=function(){return{fatal:function(){t=f},error:function(){t=h},warn:function(){t=q},debug:function(){t=r},trace:function(){t=m},info:function(){t=p}}}();this.getCurrLevel=function(){return t.rank}}};
NAF.Map=function(g,l){function k(){var b=new XMLHttpRequest,a={};a.method=arguments[0];a.id=r++;a.jsonrpc=m;for(var d={},e=1;e<arguments.length;e+=2)d[arguments[e]]=arguments[e+1];a.params=d;a=JSON.stringify(a);d="/ajax?"+encodeURI(a);"undefined"!=typeof q&&""!=q&&(d="http://"+q+d);h.debug("MAP-REQ: "+a);b.open("GET",d,!1);b.setRequestHeader("Content-Type","application/json;charset=UTF-8");b.send(null);var c;try{c=JSON.parse(b.responseText)}catch(f){c={error:f,result:-1}}c.error?h.error("MAP-ERR: code="+
c.error.code+" message="+c.error.message):4>=h.getCurrLevel()?h.debug("MAP-RES: status="+b.status+" response="+b.responseText.substr(0,80)):h.debug("MAP-RES: status="+b.status+" response="+b.responseText);return c.result}function f(b,a,d){var e=a.callbackParams;delete a.callbackParams;var c=new XMLHttpRequest,f={};f.method=b;f.id=r++;f.jsonrpc=m;a&&"{}"!=JSON.stringify(a)&&(f.params=a);b=JSON.stringify(f);a="/ajax?"+encodeURI(b);"undefined"!=typeof q&&""!=q&&(a="http://"+q+a);h.debug("MAP-ASYNC-REQ: "+
b);c.open("GET",a,!0);c.setRequestHeader("Content-Type","application/json;charset=UTF-8");c.onreadystatechange=function(){if(4===c.readyState){var b;try{200==c.status?4>=h.getCurrLevel()?h.debug("MAP-ASYNC-RESPONSE: SUCCESS "+c.responseText.substr(0,200)):h.debug("MAP-ASYNC-RESPONSE: SUCCESS "+c.responseText):h.debug("MAP-ASYNC-RESPONSE: ERROR "+c.responseText),b=JSON.parse(c.responseText)}catch(a){b={error:a,result:-1}}b.error&&h.error("MAP-ERR: code="+b.error.code+" message="+b.error.message);d&&
(b.error&&(b={error:b.error.message,result:-1}),d(b.result,e));c=e=c.onreadystatechange=null}};c.send(null);a=b=f=null}var h=g.log,q=l,r=1,m="2.0",p,t=this,n=[["1080p","1080p60hz2d"],["1080i","1080i30hz2d"],["720p","720p60hz2d"],["576p","720p60hz2d"],["auto","720p60hz2d"],["480p","480p60hz2d"]],s=[["auto","stereo"],["dolby","ac3"]];this.SetAsyncEventHandlers=function(b,a,d){p=new EventSource("/server-sent-events");p.onopen=b;p.onmessage=function(b){a:{var c;try{c=JSON.parse(b.data)}catch(f){h.error("server-sent event parsing failed, event handler not invoked."+
f);d("Invalid server-sent event");break a}"undefined"!==typeof c.method?a(c):(h.error("server-sent event is not a valid MW event, event handler not invoked."),d("Invalid server-sent event"))}};p.onerror=function(e){var c;switch(e.target.readyState){case EventSource.CONNECTING:c="Eventsource reconnecting.";break;case EventSource.CLOSED:c="Eventsource closed. Creating a new one.",setTimeout(function(){t.SetAsyncEventHandlers(b,a,d)},1E4)}d(c)}};this.VidSetAnimationParameters=function(b,a,d,e,c,h){f("VidSetAnimationParameters",
{windowId:b,bAnimate:a,duration:d,speed:speed,fps:c},h)};this.VidPretune=function(b,a,d){f("VidPreTune",{windowId:b,LocatorArray:a},d)};this.VidStopPretune=function(b,a,d){f("VidStopPreTune",{windowId:b},d)};this.VidGetCurChan=function(b){f("VidGetCurChan",{},b)};this.VidGetLastChan=function(b){f("VidGetLastChan",{},b)};this.VidGetStartChan=function(){return null};this.VidDetune=function(b){f("VidDetune",{},b)};this.VidGetChanCount=function(b){f("VidGetChanCount",{},b)};this.VidGetChannelList=function(b,
a){f("VidGetChannelList",{platform:b},a)};this.VidSetVideoWinSize=function(b,a,d,e,c,h){f("VidSetVideoWinSize",{x:b,y:a,w:d,h:e,bPIP:c},h)};this.VidEnableCC=function(b,a){f("VidSetCloseCap",{enable:b},a)};this.VidGetAvailableAudioLang=function(b){f("GetAvailableAudioLanguages",{},b)};this.VidSetPrefAudioLang=function(b,a,d,e){var c={};c.language=b;if(a||""!=a)c.type=a;c.callbackParams=e;f("SetAudioLanguagePreference",c,d)};this.VidGetPrefAudioLang=function(b){f("GetAudioLanguagePreference",{},b)};
this.VidSetAudioLang=function(b,a,d){var e={};e.language=b;e.callbackParams=d;f("SetAudioLanguage",e,a)};this.VidGetAudioLang=function(b){f("GetAudioLanguage",{},b)};this.VidSetResolution=function(b,a,d){f("VidSetResolution",{port:b,resolution:a},d)};this.VidGetAvailableSubtitleLang=function(b){f("GetAvailableSubtitleLanguages",{},b)};this.VidSetPrefSubtitleLang=function(b,a,d,e){var c={};c.language=b;c.type=a;c.callbackParams=e;f("SetSubtitleLanguagePreference",c,d)};this.VidGetPrefSubtitleLang=
function(b){f("GetSubtitleLanguagePreference",{},b)};this.VidGetSubtitleAvailability=function(b){f("GetSubtitleAvailability",{},b)};this.VidEnableSubtitle=function(b,a){var d={};d.enable=b;f("EnableSubtitle",d,a)};this.VidSetSubtitleLang=function(b,a,d){var e={};e.language=b;e.callbackParams=d;f("SetSubtitleLanguage",e,a)};this.VidGetSubtitleLang=function(b){f("GetSubtitleLanguage",{},b)};this.IsSubtitleEnabled=function(b){f("IsSubtitleEnabled",{},b)};this.VidSetPrefTeletextLang=function(b,a,d,e){h.warn("VidSetPrefTeletextLang(): Not yet supported.")};
this.VidGetPrefTeletextLang=function(b){h.warn("VidGetPrefTeletextLang(): Not yet supported.")};this.IsTeletextEnabled=function(b){f("IsTeletextEnabled",{},b)};this.EnableTeletext=function(b,a){f("EnableTeletext",{enable:b},a)};this.IsTeletextAvailable=function(b){f("IsTeletextAvailable",{},b)};this.VidSetTeletextLang=function(b,a,d,e){h.warn("VidSetTeletextLang(): Not yet supported.")};this.VidGetTeletextLang=function(b){h.warn("VidGetTeletextLang(): Not yet supported.")};this.VidSpeakerMute=function(b,
a){f("VidSpeakerMute",{flag:b},a)};this.VidDisplayVideoOn=function(b,a){f("VidDisplayVideoOn",{flag:b},a)};this.DlnaSetDeviceName=function(b,a){return k("MapDLNASetDeviceName","name",b,"type",a)};this.DlnaGetDeviceName=function(b){return k("MapDLNAGetDeviceName","type",b)};this.MapDLNAGetActiveDevices=function(b){return k("MapDLNAGetActiveDevices","type",b)};this.MapDLNAGetContainer=function(b,a,d,e,c,h,g,r){if(r)f("MapDLNAGetContainer",{id:b,containerId:a,containerType:d,filter:e,startAt:c,requestedCount:h,
sort:g},r);else return k("MapDLNAGetContainer","id",b,"containerId",a,"containerType",d,"filter",e,"startAt",c,"requestedCount",h,"sort",g)};this.MapPlayer=function(b,a,d,e,c,h,g,r,m,q,k){var u={};u.type=c;u.x=h;u.y=g;u.width=r;u.height=m;c={};k&&(c.callbackParams=k);c.ver="1.0";c.url=b;c.block=a;c.rate=d;e&&(c.playPos=e);c.window=u;f("MapPlayer",c,q)};this.MapPlayerRTSPVod=function(b,a,d,e,c,h,g,r,m,k){var q={};q.type=c;q.x=h;q.y=g;q.width=r;q.height=m;c={ver:"1.0"};c.id=b;c.block=a;c.rate=d;void 0!=
e&&null!=e&&""!==e&&0<=e&&(c.playPos=1E3*e);c.window=q;f("MapPlayer",c,k)};this.MapPlayerStop=function(b,a,d,e,c,h){var g={};g.type=b;g.x=a;g.y=d;g.width=e;g.height=c;f("MapPlayer",{ver:"1.0",window:g},h)};this.MapPlayerSkip=function(b,a,d,e,c,h,g,r,m){var q={};q.type=e;q.x=c;q.y=h;q.width=g;q.height=r;f("MapPlayer",{ver:"1.0",url:b,rate:a,playPos:d,window:q},m)};this.MapPlayerMakePipPrimary=function(b,a){var d={ver:"1.0"};d.url=b;d.window={type:"pip"};d.destwin={type:"main"};f("MapPlayer",d,a)};
this.MapPlayerSetVideoWinSize=function(b,a,d,e,c,h,g){var r={};r.type=a;r.x=d;r.y=e;r.width=c;r.height=h;f("MapPlayer",{ver:"1.0",url:b,window:r},g)};this.DvrGetCheckPoint=function(){return k("PvrGetCheckPoint")};this.DvrSync=function(){return k("PvrSync")};this.DvrRecord=function(b,a,d,e,c,h,g,r,q,m,k){var u={};u.locator=b;u.channelId=a;u.duration=d;u.title=e;u.description=c;u.start=h;u.isPinLocked=m;r&&(u.frontPad=r);q&&(u.backPad=q);var z;if(0!=g){b=h?new Date(1E3*h):new Date;a="";for(d=0;d<g.length;d++)a=
7==g[d]?"0,"+a:a+(g[d]+",");a=a.substring(0,a.length-1);z=b.getMinutes()+" "+b.getUTCHours()+" * * "+a}z&&(u.interval=z);f("PvrSchedRecording",u,k)};this.DvrRecordEvent=function(b,a,d,e,c){h.trace("DvrRecordEvent: "+b);var g={};g.eventCrid=b;g.isPinLocked=e;if(a||0===a)g.frontPad=a;if(d||0===d)g.backPad=d;f("PvrSchedRecording",g,c)};this.DvrRecordSeries=function(b,a,d,e,c,g,r){h.trace("DvrRecordSeries: "+b+" chan: "+e+" event: "+c);var q={};q.seriesCrid=b;q.isPinLocked=g;a&&(q.frontPad=a);d&&(q.backPad=
d);e&&(q.channel=e);c&&(q.event=c);f("PvrSchedRecording",q,r)};this.DvrUpdateRecord=function(b,a,d){if(void 0!=a&&void 0!=d)return k("PvrUpdateRecording","recordingId",b,"duration",a,"start",d);if(void 0!=d)return h.warn("DvrUpdateRecord(): duration is null!!!"),k("PvrUpdateRecording","recordingId",b,"start",d);if(void 0!=a)return h.warn("DvrUpdateRecord(): startTime is null!!!"),k("PvrUpdateRecording","recordingId",b,"duration",a)};this.DvrUpdateOperation=function(b,a,d,e,c){var h={};h.operationId=
b;a&&(h.frontPad=a);d&&(h.backPad=d);void 0!=e&&(h.isPinLocked=e);f("MapPvrUpdateOperation",h,c)};this.DvrSetBookmark=function(b,a,d){f("PvrSetBookmark",{recordingId:b,position:a},d)};this.DvrAssetList=function(b){f("PvrListRecording",{},b)};this.DvrListRequests=function(b){if(b)f("PvrListRequests",{},b);else return k("PvrListRequests")};this.DvrListOperations=function(b){if(b)f("PvrListOperations",{},b);else return k("PvrListOperations")};this.DvrListRecordings=function(b){if(b)f("PvrListRecordings",
{},b);else return k("PvrListRecordings")};this.DvrListRequestsOperationsRecordings=function(b){if(b)f("PvrBatchCommand",{commands:["PvrListRequests","PvrListOperations","PvrListRecordings"]},b);else return k("PvrBatchCommand","commands",["PvrListRequests","PvrListOperations","PvrListRecordings"])};this.DvrGetRecords=function(b,a){if(a)f("MapPvrGetRecords",{checkPoint:b},a);else return k("MapPvrGetRecords","checkPoint",b)};this.DvrGetConflicts=function(b,a,d){var e={},e={opId:b};e.callbackParams=d;
f("MapPvrGetConflicts",e,a)};this.DvrPause=function(b){f("PvrPlayTrick",{speed:0},b)};this.DvrResume=function(b){f("PvrPlayTrick",{speed:100},b)};this.DvrFastForward=function(b,a){f("PvrPlayTrick",{speed:b},a)};this.DvrRewind=function(b,a){f("PvrPlayTrick",{speed:-b},a)};this.DvrOffset=function(b,a){f("PvrPlaySkip",{offset:b},a)};this.DvrDelete=function(b,a){f("PvrDeleteRecording",{locator:b},a)};this.DvrDeleteAll=function(b){f("PvrDeleteAll",{},b)};this.DvrDeleteRequest=function(b,a){f("PvrDelete",
{requestId:b},a)};this.DvrDeleteOperation=function(b,a){f("PvrDelete",{operationId:b},a)};this.DvrDeleteRecording=function(b,a){f("PvrDelete",{recordingId:b},a)};this.DvrDeleteProtectOperation=function(b,a,d,e){var c={},c={operationId:b,protect:a};c.callbackParams=e;f("PvrDeleteProtect",c,d)};this.DvrPinProtectOperation=function(b,a,d,e){var c={},c={operationId:b,protect:a};c.callbackParams=e;f("PvrPinProtect",c,d)};this.DvrDeleteProtectRequest=function(b,a,d,e){var c={},c={requestId:b,protect:a};
c.callbackParams=e;f("PvrDeleteProtect",c,d)};this.DvrPinProtectRequest=function(b,a,d,e){var c={},c={requestId:b,protect:a};c.callbackParams=e;f("PvrPinProtect",c,d)};this.DvrStop=function(b){f("DvrStop",{},b)};this.PvrStop=function(b){f("PvrStop",{},b)};this.DvrStopRecording=function(b,a){f("PvrStopRecording",{recordingId:b},a)};this.VodSessionOpen=function(b,a,d){f("VodSessionOpen",{assetId:b,vodType:a},d)};this.VodSessionClose=function(b){f("VodSessionClose",{},b)};this.VodPlay=function(b,a,d){f("VodPlay",
{blocked:b,start:a},d)};this.VodPause=function(b){f("VodPause",{},b)};this.VodFastforward=function(b,a,d){f("VodFastforward",{numerator:b,denominator:a},d)};this.VodRewind=function(b,a,d){f("VodRewind",{numerator:b,denominator:a},d)};this.VodStop=function(b){f("VodStop",{},b)};this.VodGet=function(b,a){f("VodGet",{name:b},a)};this.VodSet=function(b,a,d){f("VodSet",{name:b,value:a},d)};this.VodPlaySkip=function(b,a){f("VodPlaySkip",{offset:b},a)};this.VodResume=function(b){f("VodFastforward",{numerator:1,
denominator:1},b)};this.ConfigGet=function(b,a){f("ConfigGet",{name:b},a)};this.ConfigSet=function(b,a){return k("ConfigSet","name",b,"value",a)};this.GetMWConfig=function(b,a,d){f("GetMWConfig",{section:b,key:a},d)};this.GetKeyMap=function(b){f("GetKeyMap",{},b)};this.EmulateRemoteKey=function(b){return k("EmulateRemoteKey","KeyCode",b)};this.EmulateRemoteKeyWithState=function(b,a){return k("EmulateRemoteKey",{KeyCode:b,KeyState:a})};this.VerifyPin=function(b,a,d,e,c){var h={},h={profile:b,type:a,
pin:d};h.callbackParams=c;f("VerifyPin",h,e)};this.ResetPin=function(b,a,d,e,c,h){var g={},g={profile:b,type:a,masterpin:d,newpin:e};g.callbackParams=h;f("ResetPin",g,c)};this.GetPinState=function(b,a){f("GetPinState",{profile:b,type:a},callback)};this.ActivatePin=function(b,a,d,e){f("ActivatePin",{profile:b,type:a,masterpin:masterpin,activate:e},callback)};this.GetProfileNames=function(b,a){b()};this.ProfileSetInitChan=function(b,a,d,e){var c={};e&&(c.callbackParams=e);c.profileId=b;-1!=b.indexOf("MasterProfile")&&
(c.keyword="master");c.Settings={};c.Settings.initChannel=a;f("WriteProfile",c,d)};this.ProfileGetInitChan=function(b,a,d){var e={};d&&(e.callbackParams=d);e.profileId=b;e.Settings=["initChannel"];f("ReadProfile",e,a)};this.ProfileSetAgeRating=function(b,a,d,e){a=a?a:1001;var c={};e&&(c.callbackParams=e);c.profileId=b;-1!=b.indexOf("MasterProfile")&&(c.keyword="master");c.Settings={};c.Settings.ageRating=a;f("WriteProfile",c,d)};this.ProfileGetAgeRating=function(b,a,d){var e={};d&&(e.callbackParams=
d);e.profileId=b;e.Settings=["ageRating"];f("ReadProfile",e,a)};this.ProfileSetStartupProtection=function(b,a,d,e){var c={};e&&(c.callbackParams=e);c.profileId=b;-1!=b.indexOf("MasterProfile")&&(c.keyword="master");c.Settings={};c.Settings.startupProtection=a;f("WriteProfile",c,d)};this.ProfileGetStartupProtection=function(b,a,d){var e={};d&&(e.callbackParams=d);e.profileId=b;e.Settings=["startupProtection"];f("ReadProfile",e,a)};this.ProfileSetNeedPinForPurchase=function(b,a,d,e){var c={};e&&(c.callbackParams=
e);c.profileId=b;-1!=b.indexOf("MasterProfile")&&(c.keyword="master");c.Settings={};c.Settings.needPinForPurchase=a;f("WriteProfile",c,d)};this.ProfileGetNeedPinForPurchase=function(b,a,d){var e={};d&&(e.callbackParams=d);e.profileId=b;e.Settings=["needPinForPurchase"];f("ReadProfile",e,a)};this.SetStandbyMode=function(b,a,d,e){f("SetStandbyMode",{mode:b,time:a,callbackParams:e},d)};this.AcknowledgePowerManagerEvent=function(b){f("AcknowledgePowerManagerEvent",{},b)};this.PesGetAllEvents=function(b,
a){f("GetAllEvents",{filter:b},a)};this.PesGetChannelsWithEvent=function(b,a,d,e){f("GetChannelsWithEvent",{ChanFilter:b,ChanProps:a,EventFilter:d},e)};this.PesGetEventsByChanId=function(b,a){return k("GetEventsByChanId","chanId",b,"filter",a)};this.PesGetEventsByLcn=function(b,a){return k("GetEventsByLcn","lcn",b,"filter",a)};this.PesGetPfEventsByChanId=function(b){return k("GetPfEventsByChanId","chanId",b)};this.PesGetPfEventsByLcn=function(b){return k("GetPfEventsByLcn","lcn",b)};this.MapGetOnlineMode=
function(b){f("MapGetOnlineMode",{},b)};this.writePVRProfile=function(b,a,d,e){var c={};c.callbackParams=e;c.profileId=b;-1!=b.indexOf("MasterProfile")&&(c.keyword="master");c.Settings={};c.Settings.pvrSettings={};c.Settings.pvrSettings.frontPad=void 0!=a.newFrontPad?a.newFrontPad:a.frontPad;c.Settings.pvrSettings.backPad=void 0!=a.newBackPad?a.newBackPad:a.backPad;c.Settings.pvrSettings.seriesDomain=void 0!=a.newSeriesDomain?a.newSeriesDomain:a.seriesDomain;c.Settings.pvrSettings.diskManagement=
void 0!=a.newDiskManagement?a.newDiskManagement:a.diskManagement;f("WriteProfile",c,d)};this.readPVRProfile=function(b,a,d){var e={};d&&(e.callbackParams=d);e.profileId=b;-1!=b.indexOf("MasterProfile")&&(e.keyword="master");e.Settings=["pvrSettings"];f("ReadProfile",e,a)};this.writeViewSettingsProfile=function(b,a,d,e,c){var h={};h.callbackParams=c;h.profileId=b;-1!=b.indexOf("MasterProfile")&&(h.keyword="master");h.Settings={};h.Settings.viewSettings={};h.Settings.viewSettings.lang={};h.Settings.viewSettings.lang.code=
void 0!=a.newCode?a.newCode:a.code;h.Settings.viewSettings.lang.type=void 0!=a.newType?a.newType:a.type;h.Settings.viewSettings.transparency=void 0!=d.newTransparency?d.newTransparency:d.transparency;h.Settings.viewSettings.bannerTimeout=void 0!=d.newBannerTimeout?d.newBannerTimeout:d.bannerTimeout;h.Settings.viewSettings.epgStyle=void 0!=d.newEpgStyle?d.newEpgStyle:d.epgStyle;h.Settings.viewSettings.epgSpan=void 0!=d.newEpgSpan?d.newEpgSpan:d.epgSpan;h.Settings.viewSettings.assetsStyle=void 0!=d.newAssetsStyle?
d.newAssetsStyle:d.assetsStyle;h.Settings.viewSettings.settingsProtection=void 0!=d.newSettingsProtection?d.newSettingsProtection:d.settingsProtection;f("WriteProfile",h,e)};this.readViewSettingsProfile=function(b,a,d){var e={};d&&(e.callbackParams=d);e.profileId=b;-1!=b.indexOf("MasterProfile")&&(e.keyword="master");e.Settings=["viewSettings"];f("ReadProfile",e,a)};this.writeOutputSettingsProfile=function(b,a,d,e){var c={};c.callbackParams=e;c.profileId=b;-1!=b.indexOf("MasterProfile")&&(c.keyword=
"master");c.Settings={};c.Settings.outputSettings={};c.Settings.outputSettings.primary=void 0!=a.newPrimary?a.newPrimary:a.primary;c.Settings.outputSettings.hdmi={};c.Settings.outputSettings.hdmi.resolution=void 0!=a.hdmi.newResolution?a.hdmi.newResolution:a.hdmi.resolution;c.Settings.outputSettings.hdmi.format=void 0!=a.hdmi.newFormat?a.hdmi.newFormat:a.hdmi.format;c.Settings.outputSettings.hdmi.color=void 0!=a.hdmi.newColor?a.hdmi.newColor:a.hdmi.color;c.Settings.outputSettings.hdmi.audio={};c.Settings.outputSettings.hdmi.audio.enable=
void 0!=a.hdmi.audio.newEnable?a.hdmi.audio.newEnable:a.hdmi.audio.enable;c.Settings.outputSettings.hdmi.audio.delay=void 0!=a.hdmi.audio.newDelay?a.hdmi.audio.newDelay:a.hdmi.audio.delay;c.Settings.outputSettings.spdif={};c.Settings.outputSettings.spdif.enable=void 0!=a.spdif.newEnable?a.spdif.newEnable:a.spdif.enable;c.Settings.outputSettings.spdif.delay=void 0!=a.spdif.newDelay?a.spdif.newDelay:a.spdif.delay;c.Settings.outputSettings.tv={};c.Settings.outputSettings.tv.aspectRatio=void 0!=a.tv.newAspectRatio?
a.tv.newAspectRatio:a.tv.aspectRatio;c.Settings.outputSettings.tv.start=void 0!=a.tv.newStart?a.tv.newStart:a.tv.start;c.Settings.outputSettings.scart={};c.Settings.outputSettings.scart.format=void 0!=a.scart.newFormat?a.scart.newFormat:a.scart.format;c.Settings.outputSettings.scart.color=void 0!=a.scart.newColor?a.scart.newColor:a.scart.color;c.Settings.outputSettings.scart.enable=void 0!=a.scart.newEnable?a.scart.newEnable:a.scart.enable;c.Settings.outputSettings.audio={};c.Settings.outputSettings.audio.format=
void 0!=a.audio.newFormat?a.audio.newFormat:a.audio.format;c.Settings.outputSettings.frontPanel={};c.Settings.outputSettings.frontPanel.luminosity=void 0!=a.frontPanel.newLuminosity?a.frontPanel.newLuminosity:a.frontPanel.luminosity;f("WriteProfile",c,d)};this.readOutputSettingsProfile=function(b,a,d){var e={};d&&(e.callbackParams=d);e.profileId=b;-1!=b.indexOf("MasterProfile")&&(e.keyword="master");e.Settings=["outputSettings"];f("ReadProfile",e,a)};this.SetVideoOutputSettings=function(b,a,d,e){if(NAF.conf.hdmiComponent)b=
NAF.conf.hdmiComponent[b];else for(var c=0;c<n.length;c++)if(b===n[c][0]){b=n[c][1];break}c={};c.id=b;a&&(c.type=a);c.callbackParams=e;f("MapSetVideoOutputPortSettings",c,d)};this.GetVideoOutputSettings=function(b,a){f("MapGetVideoOutputPortSettings",{},a)};this.SetAudioOutputSettings=function(b,a,d,e){if(NAF.conf.audioFormat)b=NAF.conf.audioFormat[b];else for(var c=0;c<s.length;c++)if(b===s[c][0]){b=s[c][1];break}c={};c.id=b;a&&(c.type=a);c.callbackParams=e;f("MapSetAudioOutputPortSettings",c,d)};
this.GetAudioOutputSettings=function(b){f("MapGetAudioOutputPortSettings",{},b)};this.SetAudioOutputVolumeSettings=function(b,a,d){a&&(b.type=a);f("MapSetAudioOutputVolumeSettings",b,d)};this.GetAudioOutputVolumeSettings=function(b,a){var d={};d.callbackParams=a;f("MapGetAudioOutputVolumeSettings",d,b)};this.VidGetTSBInfo=function(b){f("GetTSBInfo",{},b)};this.VidGetTSBEventInfo=function(b){f("GetTSBEventInfo",{},b)};this.SubscribePlayerPosition=function(b,a){f("MAPSubscribeEvent",{name:"MWPlayerPosition",
frequency:b},a)};this.UnsubscribePlayerPosition=function(b){f("MAPUnsubscribeEvent",{name:"MWPlayerPosition"},b)};this.SubscribeTSBEventInfo=function(b){f("MAPSubscribeEvent",{name:"TSBEventInfo"},b)};this.UnsubscribeTSBEventInfo=function(b){f("MAPUnsubscribeEvent",{name:"TSBEventInfo"},b)};this.AdjustUserAgeRating=function(b,a){f("AdjustUserAgeRating",{tempAgeRating:b},a)};this.RevertUserAgeRating=function(b){f("RevertUserAgeRating",{},b)};this.GetDiagnostics=function(b){f("GetDiagnostics",{},function(a){if(b){if(a){var d=
{};d.caDecoder=null!=a.caDecoder?a.caDecoder:"";d.homeNetworkMode=null!=a.homeNetworkMode?a.homeNetworkMode:"";d.docsisStatus=null!=a.docsisStatus?a.docsisStatus:"";d.hw={};d.hw.hdd={};d.hw.tuners=[];if(a.hw){d.hw.hdd.available=a.hw.hdd.available;d.hw.hdd.capacity=a.hw.hdd.capacity;d.hw.hdd.temperature=a.hw.hdd.temperature;d.hw.version=a.hw.version;d.hw.interfaces=null!=a.hw.interfaces?a.hw.interfaces:"";d.hw.cm=null!=a.hw.cm?a.hw.cm:"";for(var e=0;e<a.hw.tuners.length;e++)d.hw.tuners.push(a.hw.tuners[e])}d.ioports=
{};d.ioports.hdmi={};a.ioports&&(d.ioports.hdmi.hdcpStatus=a.ioports.hdmi.hdcpStatus,d.ioports.hdmi.status=a.ioports.hdmi.status,d.ioports.hdmi.tvEdid=a.ioports.hdmi.tvEdid);d.network={};d.network.docsis={};d.network.docsis.down={};d.network.docsis.up={};a.network&&(d.network.docsis.down.freq=a.network.docsis.down.freq,d.network.docsis.down.locked=a.network.docsis.down.locked,d.network.docsis.down.modulation=a.network.docsis.down.modulation,d.network.docsis.down.snr=a.network.docsis.down.snr,d.network.docsis.down.synced=
a.network.docsis.down.synced,d.network.docsis.up.freq=a.network.docsis.up.freq,d.network.docsis.up.locked=a.network.docsis.up.locked,d.network.docsis.up.modulation=a.network.docsis.up.modulation,d.network.docsis.up.power=a.network.docsis.up.power);d.ca={};a.ca&&(d.ca.caCallback=a.ca.caCallback,d.ca.ecmReception=a.ca.ecmReception,d.ca.emmReception=a.ca.emmReception,d.ca.status=a.ca.status);d.sw={};a.sw&&(d.sw.cmVersion=a.sw.cmVersion,d.sw.lastSWUpdate=a.sw.lastSWUpdate,d.sw.version=a.sw.version);d.transportstream=
{};a.transportstream&&(d.transportstream.lockSignal=null!=a.transportstream.lockSignal?a.transportstream.lockSignal:"",d.transportstream.freq=null!=a.transportstream.freq?a.transportstream.freq:"",d.transportstream.modulation=null!=a.transportstream.modulation?a.transportstream.modulation:"",d.transportstream.bitRate=null!=a.transportstream.bitRate?a.transportstream.bitRate:"",d.transportstream.nid=null!=a.transportstream.nid?a.transportstream.nid:"");d.freqscan={};a.freqscan&&(d.freqscan.tsid=null!=
a.freqscan.tsid?a.freqscan.tsid:"",d.freqscan.quality=null!=a.freqscan.quality?a.freqscan.quality:0,d.freqscan.level=null!=a.freqscan.level?a.freqscan.level:0);d.chanstatus={};a.chanstatus&&(d.chanstatus.lockStatus=null!=a.chanstatus.lockStatus?a.chanstatus.lockStatus:"",d.chanstatus.ber=null!=a.chanstatus.ber?a.chanstatus.ber:"",d.chanstatus.freq=null!=a.chanstatus.freq?a.chanstatus.freq:"",d.chanstatus.symbolRate=null!=a.chanstatus.symbolRate?a.chanstatus.symbolRate:"",d.chanstatus.modulation=null!=
a.chanstatus.modulation?a.chanstatus.modulation:"",d.chanstatus.snr=null!=a.chanstatus.snr?a.chanstatus.snr:"",d.chanstatus.inversion=null!=a.chanstatus.inversion?a.chanstatus.inversion:"",d.chanstatus.quality=null!=a.chanstatus.quality?a.chanstatus.quality:0,d.chanstatus.level=null!=a.chanstatus.level?a.chanstatus.level:0);a=d}else a=null;b(a)}})};this.SendDiagMsg=function(b,a,d){k("SendTo","method","DiagResult","targetIP",a,"result",b,"message",d)};this.SendDiagResp=function(b,a,d,e){k("QueryResult",
"method","DiagResult","targetIP",a,"result",b,"message",d,"dqId",e)};this.GetStandbyModeSettings=function(b){f("GetStandbyModeSettings",{},b)};this.SetStandbyModeSettings=function(b,a,d,e,c,h,g){var r={},r={autoStandby:b,timeout:a,startTime:d,endTime:e,weekday:c};g&&(r.callbackParams=g);f("SetStandbyModeSettings",r,h)};this.GetNetworks=function(b){b()};this.HideSplashScreen=function(){};this.writePrefAudioLangs=function(b,a,d){var e={};-1!=b.indexOf("MasterProfile")&&(e.keyword="master");e.profileId=
b;e.Settings={};e.Settings.prefAudioLangs={};e.Settings.prefAudioLangs=a;f("WriteProfile",e,d)};this.readPrefAudioLangs=function(b,a,d){var e={};d&&(e.callbackParams=d);-1!=b.indexOf("MasterProfile")&&(e.keyword="master");e.profileId=b;e.Settings=["prefAudioLangs"];f("ReadProfile",e,a)};this.writePrefSubtitleLangs=function(b,a,d){var e={};-1!=b.indexOf("MasterProfile")&&(e.keyword="master");e.profileId=b;e.Settings={};e.Settings.prefSubtitleLangs={};e.Settings.prefSubtitleLangs=a;f("WriteProfile",
e,d)};this.readPrefSubtitleLangs=function(b,a,d){var e={};d&&(e.callbackParams=d);-1!=b.indexOf("MasterProfile")&&(e.keyword="master");e.profileId=b;e.Settings=["prefSubtitleLangs"];f("ReadProfile",e,a)};this.writePrefTeletextLangs=function(b,a,d){var e={};-1!=b.indexOf("MasterProfile")&&(e.keyword="master");e.profileId=b;e.Settings={};e.Settings.prefTeletextLangs={};e.Settings.prefTeletextLangs=a;f("WriteProfile",e,d)};this.readPrefTeletextLangs=function(b,a,d){var e={};d&&(e.callbackParams=d);-1!=
b.indexOf("MasterProfile")&&(e.keyword="master");e.profileId=b;e.Settings=["prefTeletextLangs"];f("ReadProfile",e,a)};this.GetBootupState=function(b){b("normal")};this.RemotePairing=function(b){f("MapRF4CBind",{},b)};this.RemoteUnbind=function(b,a){var d={};d.bindingId=b;f("MapRF4CUnbind",d,a)};this.RemotePairingAbort=function(b){f("MapRF4CAbortBind",{},b)};this.GetCacheUpdateStatus=function(b){f("AppGetCacheUpdateStatus",{},b)};this.SetCacheEventListener=function(b,a){f("AppSetCacheEventListener",
a,b)};this.UpdateCache=function(b){f("AppUpdateCache",{},b)};this.SwapCache=function(b){f("AppSwapCache",{},b)};this.AbortCaching=function(b){f("AppAbortCaching",{},b)};this.RemoveCacheEventListener=function(b,a){f("AppRemoveCacheEventListener",a,b)};this.GetCADecoderStatus=function(b){f("MapGetNagraSystemInfomation",{},b)};this.MapSwCheckUpdate=function(b){f("MapSwCheckUpdate",{},b)};this.MapSwUpdate=function(b){f("MapSwUpdate",{},b)};this.MapSwDownloadProgress=function(b){f("MapSwDownloadProgress",
{},b)}};
pmrpc=self.pmrpc=function(){function g(){for(var b=[],a=0;36>a;a++)b[a]="0123456789ABCDEF"[Math.floor(16*Math.random())];b[14]="4";b[19]="89AB"[Math.floor(4*Math.random())];b[8]=b[13]=b[18]=b[23]="-";return b.join("")}function l(b,a){for(var e=b.whitelist,c=b.blacklist,d=!1,h=!1,f=0;f<e.length;++f)if(a.match(RegExp(e[f]))){d=!0;break}for(e=0;e<c.length;++e)if(a.match(RegExp(c[e]))){h=!0;break}return d&&!h}function k(b,a,e,c){if(!(e instanceof Array)){for(var d=b.toString(),h=d.substring(d.indexOf("(")+1,
d.indexOf(")")),h=""===h?[]:h.split(", "),d={},f=0;f<h.length;f++)d[h[f]]=f;var h=[],g;for(g in e)if("undefined"!==typeof d[g])h[d[g]]=e[g];else throw"No such param: "+g;e=h}"undefined"!==typeof c&&(e=e.concat(c));return b.apply(a,e)}function f(b,e,a){var c={jsonrpc:"2.0"};c.method=b;c.params=e;"undefined"!==typeof a&&(c.id=a);return c}function h(b,e,a){var c={};c.code=b;c.message=e;c.data=a;return c}function q(b,e,a){var c={jsonrpc:"2.0"};c.id=a;"undefined"===typeof b||null===b?c.result="undefined"===
e?null:e:c.error=b;return c}function r(b){if(b.publicProcedureName in w)return!1;c[b.publicProcedureName]={publicProcedureName:b.publicProcedureName,procedure:b.procedure,context:b.procedure.context,isAsync:"undefined"!==typeof b.isAsynchronous?b.isAsynchronous:!1,acl:"undefined"!==typeof b.acl?b.acl:{whitelist:["(.*)"],blacklist:[]}};return!0}function m(b){var e=b.event,a=b.source,c="undefined"!==typeof a&&null!==a;0===e.data.indexOf("pmrpc.")&&(b=JSON.parse(e.data.substring(6)),"undefined"!==typeof b.method?
(e={data:e.data,source:c?a:e.source,origin:c?"*":e.origin,shouldCheckACL:!c},b=p(b,e),null!==b&&s(e.source,b,e.origin)):t(b))}function p(b,e,a){if("2.0"!==b.jsonrpc)return q(h(-32600,"Invalid request.","The recived JSON is not a valid JSON-RPC 2.0 request."),null,null);var d=b.id;a=c[b.method];if("undefined"!==typeof a)if(!e.shouldCheckACL||l(a.acl,e.origin))try{if(a.isAsync)return k(a.procedure,a.context,b.params,[function(b){s(e.source,q(null,b,d),e.origin)},function(b){s(e.source,q(h(-1,"Application error.",
b.message),null,d),e.origin)},e]),null;var f=k(a.procedure,a.context,b.params,[e]);return"undefined"===typeof d?null:q(null,f,d)}catch(g){return"undefined"===typeof d?null:g.match("^(No such param)")?q(h(-32602,"Invalid params.",g.message),null,d):q(h(-1,"Application error.",g.message),null,d)}else return"undefined"===typeof d?null:q(h(-2,"Application error.","Access denied on server."),null,d);else return"undefined"===typeof d?null:q(h(-32601,"Method not found.","The requestd remote procedure does not exist or is not available."),
null,d)}function t(b){var e=b.id,a=v[e];if("undefined"!==typeof a&&null!==a)if(delete v[e],"undefined"===typeof b.error)a.onSuccess({destination:a.destination,publicProcedureName:a.publicProcedureName,params:a.params,status:"success",returnValue:b.result});else a.onError({destination:a.destination,publicProcedureName:a.publicProcedureName,params:a.params,status:"error",message:b.error.message+" "+b.error.data})}function n(a){if(a.retries&&0>a.retries)throw new Exception("number of retries must be 0 or higher");
var c=[];if("undefined"===typeof a.destination||null===a.destination||"workerParent"===a.destination)c=[{context:null,type:"workerParent"}];else if("publish"===a.destination)c=e().concat(x);else if(a.destination instanceof Array)for(var d=0;d<a.destination.length;d++)"workerParent"===a.destination[d]?c.push({context:null,type:"workerParent"}):"undefined"!==typeof a.destination[d].frames?c.push({context:a.destination[d],type:"window"}):c.push({context:a.destination[d],type:"worker"});else"undefined"!==
typeof a.destination.frames?c.push({context:a.destination,type:"window"}):c.push({context:a.destination,type:"worker"});for(d=0;d<c.length;d++){var h={destination:c[d].context,destinationDomain:"undefined"===typeof a.destinationDomain?["*"]:"string"===typeof a.destinationDomain?[a.destinationDomain]:a.destinationDomain,publicProcedureName:a.publicProcedureName,onSuccess:"undefined"!==typeof a.onSuccess?a.onSuccess:function(){},onError:"undefined"!==typeof a.onError?a.onError:function(){},retries:"undefined"!==
typeof a.retries?a.retries:5,timeout:"undefined"!==typeof a.timeout?a.timeout:500,status:"requestNotSent"};isNotification="undefined"===typeof a.onError&&"undefined"===typeof a.onSuccess;params="undefined"!==typeof a.params?a.params:[];callId=g();v[callId]=h;h.message=isNotification?f(a.publicProcedureName,params):f(a.publicProcedureName,params,callId);b(callId)}}function s(b,a,e){if("undefined"===typeof b||null===b)self.postMessage("pmrpc."+JSON.stringify(a));else{if("undefined"!==typeof b.frames)return b.postMessage("pmrpc."+
JSON.stringify(a),e);b.postMessage("pmrpc."+JSON.stringify(a))}}function b(a){var e=v[a];if("undefined"!==typeof e)if(-1>=e.retries)t(q(h(-4,"Application error.","Destination unavailable."),null,a));else if("requestSent"!==e.status)if(0===e.retries||"available"===e.status){e.status="requestSent";e.retries=-1;v[a]=e;for(var c=0;c<e.destinationDomain.length;c++)s(e.destination,e.message,e.destinationDomain[c],e),self.setTimeout(function(){b(a)},e.timeout)}else e.status="pinging",e.retries-=1,n({destination:e.destination,
publicProcedureName:"receivePingRequest",onSuccess:function(e){!0===e.returnValue&&"undefined"!==typeof v[a]&&(v[a].status="available",b(a))},params:[e.publicProcedureName],retries:0,destinationDomain:e.destinationDomain}),v[a]=e,self.setTimeout(function(){v[a]&&"pinging"===v[a].status&&b(a)},e.timeout/e.retries)}function a(b,a,e,c){"addEventListener"in b?b.addEventListener(a,e,c):b.attachEvent("on"+a,e)}function d(b,a,e){return function(c){b({event:c,source:a,destinationType:e})}}function e(){var b=
[];if("undefined"!==typeof window){b.push({context:window.top,type:"window"});for(var a=0;"undefined"!==typeof b[a];a++)for(var e=b[a],c=0;c<e.context.frames.length;c++)b.push({context:e.context.frames[c],type:"window"})}else b.push({context:this,type:"workerParent"});return b}if("undefined"===typeof JSON||"undefined"===typeof JSON.stringify||"undefined"===typeof JSON.parse)throw"pmrpc requires the JSON library";if("undefined"===typeof this.postMessage&&"undefined"===typeof this.onconnect)throw"pmrpc requires the HTML5 cross-document messaging and worker APIs";
var c={},v={},w={};if("window"in this){var y=d(m,null,"window");a(this,"message",y,!1)}else if("onmessage"in this)y=d(m,this,"worker"),a(this,"message",y,!1);else if("onconnect"in this)a(this,"connect",function(b){var e=d(m,b.ports[0],"sharedWorker");a(b.ports[0],"message",e,!1);b.ports[0].start()},!1);else throw"Pmrpc must be loaded within a browser window or web worker.";var A=this.Worker;this.nonPmrpcWorker=A;var B=this.SharedWorker;this.nonPmrpcSharedWorker=B;var x=[];this.Worker=function(b){b=
new A(b);x.push({context:b,type:"worker"});var e=d(m,b,"worker");a(b,"message",e,!1);return b};this.SharedWorker=function(b,e){var c=new B(b,e);x.push({context:c,type:"sharedWorker"});var h=d(m,c.port,"sharedWorker");a(c.port,"message",h,!1);c.postMessage=function(b,a){return c.port.postMessage(b,a)};c.port.start();return c};r({publicProcedureName:"receivePingRequest",procedure:function(b){return"undefined"!==typeof c[b]}});r({publicProcedureName:"getRegisteredProcedures",procedure:function(){var b=
[],a="undefined"!==typeof this.frames?window.location.protocol+"//"+window.location.host+(""!==window.location.port?":"+window.location.port:""):"",e;for(e in c)e in w||b.push({publicProcedureName:c[e].publicProcedureName,acl:c[e].acl,origin:a});return b}});w={getRegisteredProcedures:null,receivePingRequest:null};return{register:r,unregister:function(b){if(b in w)return!1;delete c[b];return!0},call:n,discover:function(b){var a=null;if("undefined"===typeof b.destination)for(var a=e().concat(x),c=0;c<
a.length;c++)a[c]=a[c].context;else a=b.destination;var d="undefined"===typeof b.originRegex?"(.*)":b.originRegex,h="undefined"===typeof b.nameRegex?"(.*)":b.nameRegex,f=a.length,g=[];pmrpc.call({destination:a,destinationDomain:"*",publicProcedureName:"getRegisteredProcedures",onSuccess:function(a){f--;var e=a.returnValue;a=a.destination;for(var c=0;c<e.length;c++)e[c].origin.match(RegExp(d))&&e[c].publicProcedureName.match(RegExp(h))&&g.push({publicProcedureName:e[c].publicProcedureName,destination:a,
procedureACL:e[c].acl,destinationOrigin:e[c].origin});0===f&&b.callback(g)},onError:function(a){f--;0===f&&b.callback(g)}})}}}();"function"==typeof define&&define.amd&&define(pmrpc);
WebApp.Controller=function(g){function l(a){b.trace("WebApp.Controller: received init reply");g.channels=a.returnValue[0];g.state.players=a.returnValue[1];g.state.applications=a.returnValue[2];g.state.system=a.returnValue[3];g.initialized=!0;b.trace("WebApp.Controller: WebApp.model is initialized");k("model.initialized")}function k(a){try{b.debug("WebApp.Controller: controller.notifyView('"+a+"')"),setTimeout(function(){s.emit(a,a)},0)}catch(c){b.error("WebApp.Controller: error thrown by listener for event "+
a+" - "+c),c.stack&&b.error(c.stack)}}function f(a,c,d){void 0==d&&(d=h);c.splice(0,0,window.name);b.debug("WebApp.Controller: sending pmrpc call to master controller - "+a+"("+JSON.stringify(c)+")");pmrpc.call({destination:window.top,publicProcedureName:a,params:[c],timeout:1E4,onSuccess:d,onError:q})}function h(a){b.trace("WebApp.Controller: pmrpc message ("+a.publicProcedureName+") delivery confirmed");void 0!=a.returnValue&&(b.debug("WebApp.Controller: object returned from pmrpc message send:  "+
JSON.stringify(a.returnValue)),b.warn("WebApp.Controller: this return object is ignored"))}function q(a){b.error("WebApp.Controller: pmrpc message "+a.publicProcedureName+"("+JSON.stringify(a.params)+") send FAILED");b.error("WebApp.Controller: error status info returned: "+a.message)}function r(b,a,d){var h=b[a][d];b=g.state.applications[a][d];h=h instanceof Object?JSON.stringify(h).substring(0,100):h;b=b instanceof Object?JSON.stringify(b).substring(0,100):b;return"model.state.applications."+a+
"."+d+" changed from "+h+" to "+b}function m(b,a,d){var h=b[a][d];b=g.state.players[a][d];h=h instanceof Object?JSON.stringify(h).substring(0,100):h;b=b instanceof Object?JSON.stringify(b).substring(0,100):b;return"model.state.players."+a+"."+d+" changed from "+h+" to "+b}function p(b,a){return!t(b,a)&&!!(null!==b&&void 0!==b||null!==a&&void 0!==a)}function t(b,a){if(b instanceof Function)return a instanceof Function?b.toString()===a.toString():!1;if(null===b||void 0===b||null===a||void 0===a)return b===
a;if(b===a||b.valueOf()===a.valueOf())return!0;if(b instanceof Date||a instanceof Date||!(b instanceof Object)||!(a instanceof Object))return!1;var d=Object.keys(b);return Object.keys(a).every(function(b){return-1!==d.indexOf(b)})?d.every(function(d){return t(b[d],a[d])}):!1}var n=this;g=g?g:new WebApp.Model;var s=new WebApp.EventEmitter({wildcard:!0}),b=new NAF.utils.Log,a;a=["model.channels","model.state.players","model.state.applications","model.state.system"];b.enable();0===NAF.conf.debug?b.setLevel.error():
1===NAF.conf.debug?b.setLevel.warn():2===NAF.conf.debug?b.setLevel.debug():3===NAF.conf.debug?b.setLevel.trace():4===NAF.conf.debug?b.setLevel.info():b.disable();this.loadCallbacks={};this.onCallbacks={};this.onCallbacksReverseMap={};this.callbackCounter=0;this.backwardCompatibilityMode=!1;NAF.conf.bkwdCompatibleNotifications&&(this.backwardCompatibilityMode=!0);this.on=function(b,a){if(n.backwardCompatibilityMode||"model.initialized"===b||"model.state.key"===b)s.on(b,a);else{var d="on-callback-"+
n.callbackCounter++;n.onCallbacks[d]=a;n.onCallbacksReverseMap[a]=d;f("on",[b,d])}};this.off=function(b,a){if(n.backwardCompatibilityMode||"model.initialized"===b||"model.state.key"===b)s.off(b,a);else{var d=n.onCallbacksReverseMap[a],h=[b,d];delete n.onCallbacks[d];delete n.onCallbacksReverseMap[a];f("off",h)}};this.init=function(){f("init",a,l)};this["do"]=function(a,c){if(a.match(/^model\.state\.applications\.\d+\.appMsg$/)&&c instanceof Object)if(void 0==c.sourceId){var d;try{d=n.getApplicationIndex(),
c.sourceId=g.state.applications[d].id,b.debug("WebApp.Controller: supplying appMsg sourceId - "+c.sourceId+" for app #"+d)}catch(h){c.sourceId="unknown"}}else b.debug("WebApp.Controller: using webapp-supplied appMsg sourceId - "+c.sourceId);c instanceof Object&&(c.serializedObjectType=c.constructor.name,b.debug("WebApp.Controller: serializing object type of do() argument and embedding type name - "+c.constructor.name));f("do",[a,c])};this.load=function(b,a){var d="load-callback-"+n.callbackCounter++;
n.loadCallbacks[d]=a;f("load",[b,d])};this.registerPMRPC=function(){pmrpc.register({publicProcedureName:"update-model",procedure:function(a){try{b.trace("WebApp.Controller: pmrpc model update message received - "+a),g.initialized?n.UpdateModel(a):b.debug("WebApp.Controller: ignoring model update prior to completing initialization")}catch(c){b.error("WebApp.Controller: error thrown BY WEBAPP processing model update - "+c),c.stack&&b.error(c.stack)}}});pmrpc.register({publicProcedureName:"load-callback",
procedure:function(a){try{b.trace("WebApp.Controller: pmrpc load callback received - "+a),n.processLoadCallback(a)}catch(c){b.error("WebApp.Controller: error processing load callback - "+c),c.stack&&b.error(c.stack)}}});pmrpc.register({publicProcedureName:"on-callback",procedure:function(a){try{b.trace("WebApp.Controller: pmrpc 'on' callback received - "+a),n.processOnCallback(a)}catch(c){b.error("WebApp.Controller: error processing 'on' callback - "+c),c.stack&&b.error(c.stack)}}});pmrpc.register({publicProcedureName:"off-callback",
procedure:function(a){try{b.trace("WebApp.Controller: pmrpc 'off' callback received - "+a),n.processOffCallback(a)}catch(c){b.error("WebApp.Controller: error processing 'off' callback - "+c),c.stack&&b.error(c.stack)}}})};this.UpdateModel=function(a){if("key"===a[0])b.trace("WebApp.Controller: key input received - "+JSON.stringify(a[1])),g.state.key=a[1],k("model.state.key");else if("application"==a[0]){var c=g.state.applications[a[1]].inFocus;g.state.applications[a[1]].inFocus="true"==a[2];if(g.state.applications[a[1]].inFocus)if(c){for(var c=
g.state.applications,d=parseInt(a[1]),h=0;h<c.length;h++)h!==d&&(g.state.applications[h].inFocus=!1);b.trace("WebApp.Controller: focus set on app "+a[1]);n.backwardCompatibilityMode&&k("model.state.applications."+a[1])}else b.trace("WebApp.Controller: app "+a[1]+" already had focus");else b.trace("WebApp.Controller: focus unset on app "+a[1])}else if("channels"==a[0])b.trace("WebApp.Controller: channel array update received"),g.channels=a[1];else if("applications"==a[0]){if(b.trace("WebApp.Controller: application array update received"),
c=g.state.applications,g.state.applications=a[1],n.backwardCompatibilityMode&&0!=c.length)for(a=0;a<c.length;a++)if(p(c[a].state,g.state.applications[a].state)&&(b.trace("WebApp.Controller: "+r(c,a,"state")+", notifying view"),k("model.state.applications."+a+".state")),p(c[a].appMsg,g.state.applications[a].appMsg)&&(b.trace("WebApp.Controller: "+r(c,a,"appMsg")+", notifying view"),k("model.state.applications."+a+".appMsg")),void 0==c[a].media&&void 0!=g.state.applications[a].media){if(g.state.applications[a].media.assets&&
0<g.state.applications[a].media.assets.length)for(b.trace("WebApp.Controller: app media data was created"),d=0;d<g.state.applications[a].media.assets.length;d++)k("model.state.applications."+a+".media.assets."+d)}else void 0!=c[a].media&&void 0==g.state.applications[a].media?b.debug("WebApp.Controller: app media data was either deleted"):p(c[a].media.assets,g.state.applications[a].media.assets)&&g.state.applications[a].media.assets.length>c[a].media.assets.length&&(b.trace("WebApp.Controller: media asset list grew (from "+
c[a].media.assets.length+" to "+g.state.applications[a].media.assets.length+"), notifying view"),k("model.state.applications."+a+".media.assets."+(g.state.applications[a].media.assets.length-1)))}else if("players"==a[0]){if(b.trace("WebApp.Controller: player array update received"),c=g.state.players,g.state.players=a[1],n.backwardCompatibilityMode&&0!=c.length)for(a=0;a<c.length;a++)p(c[a].currentProgram,g.state.players[a].currentProgram)&&(b.trace("WebApp.Controller: "+m(c,a,"currentProgram")+", notifying view"),
k("model.state.players."+a+".currentProgram")),p(c[a].isBlocked,g.state.players[a].isBlocked)&&(b.trace("WebApp.Controller: "+m(c,a,"isBlocked")+", notifying view"),k("model.state.players."+a+".isBlocked")),p(c[a].playRate,g.state.players[a].playRate)&&(b.trace("WebApp.Controller: "+m(c,a,"playRate")+", notifying view"),k("model.state.players."+a+".playRate")),p(c[a].source,g.state.players[a].source)&&(b.trace("WebApp.Controller: "+m(c,a,"source")+", notifying view"),k("model.state.players."+a+".source")),
p(c[a].status,g.state.players[a].status)&&(b.trace("WebApp.Controller: "+m(c,a,"status")+", notifying view"),k("model.state.players."+a+".status")),p(c[a].position,g.state.players[a].position)&&(b.trace("WebApp.Controller: "+m(c,a,"position")+", notifying view"),k("model.state.players."+a+".position")),p(c[a].availAudioLangs,g.state.players[a].availAudioLangs)&&(b.trace("WebApp.Controller: "+m(c,a,"availAudioLangs")+", notifying view"),k("model.state.players."+a+".availAudioLangs")),p(c[a].audioLang,
g.state.players[a].audioLang)&&(b.trace("WebApp.Controller: "+m(c,a,"audioLang")+", notifying view"),k("model.state.players."+a+".audioLang")),p(c[a].availSubtitleLangs,g.state.players[a].availSubtitleLangs)&&(b.trace("WebApp.Controller: "+m(c,a,"availSubtitleLangs")+", notifying view"),k("model.state.players."+a+".availSubtitleLangs")),p(c[a].subtitleLang,g.state.players[a].subtitleLang)?(b.trace("WebApp.Controller: "+m(c,a,"subtitleLang")+", notifying view"),k("model.state.players."+a+".subtitleLang")):
p(c[a].subtitleLang.enable,g.state.players[a].subtitleLang.enable)&&(b.trace("WebApp.Controller: model.state.players."+a+".subtitleLang.enable changed from "+c[a].subtitleLang.enable+" to "+g.state.players[a].subtitleLang.enable+", notifying view"),k("model.state.players."+a+".subtitleLang.enable")),p(c[a].teletextLang,g.state.players[a].teletextLang)&&(b.trace("WebApp.Controller: "+m(c,a,"teletextLang")+", notifying view"),k("model.state.players."+a+".teletextLang")),p(c[a].window,g.state.players[a].window)&&
(b.trace("WebApp.Controller: "+m(c,a,"window")+", notifying view"),k("model.state.players."+a+".window"))}else"channelTuned"==a[0]&&(b.trace("WebApp.Controller: channel tuned update received - player "+a[1]+", channel "+a[2]),c=a[1],void 0!=a[2]&&(g.state.players[c].source.idx=a[2],n.backwardCompatibilityMode&&k("model.state.players."+c+".source","model.state.players."+c+".source")))};this.processLoadCallback=function(a){var c=a[0];a=a[1];void 0===n.loadCallbacks[c]?b.error("WebApp.Controller: could not identify callback with key "+
c):(n.loadCallbacks[c].apply(n,[a]),delete n.loadCallbacks[c])};this.processOnCallback=function(a){var c=a[0],d=a[1];n.storeTransmittedModelData(d,a[2]);void 0===n.onCallbacks[c]?b.error("WebApp.Controller: could not identify 'on' callback with key "+c):(b.debug("WebApp.Controller: calling proxied listener for "+d),n.onCallbacks[c].apply(n,[d]))};this.storeTransmittedModelData=function(a,c){try{var d=a.replace(/(\.)([0-9]+)(\.)/g,"[$2].")+" = data;";eval(d)}catch(h){b.debug("WebApp.Controller: Cannot evaluate transmitted model data. "+
h)}};this.processOffCallback=function(a){var c=a[0];a=a[1];void 0===n.offCallbacks[c]?b.error("WebApp.Controller: could not identify 'off' callback with key "+c):(n.offCallbacks[c].apply(n,[a]),delete n.offCallbacks[c])};var d=null;this.getApplicationIndex=function(a){if(null!=d)return d;for(var c=0;c<g.state.applications.length;c++)if(window.name===g.state.applications[c].windowId)return d=c;if(void 0!=a)return a;b.error("WebApp.Controller: app index queried, but no app with window name "+window.name+
" currently stored in model");throw Error("no app with window name "+window.name+" currently stored in model");}};
!function(g,l){function k(h,f,g,m){if(!g)return[];var p=[],l,n,s,b;s=f.length;b=f[m];var a=f[m+1];if(m===s&&g._listeners){if("function"===typeof g._listeners)h&&h.push(g._listeners);else for(f=0,m=g._listeners.length;f<m;f++)h&&h.push(g._listeners[f]);return[g]}if("*"===b||"**"===b||g[b]){if("*"===b){for(l in g)"_listeners"!==l&&g.hasOwnProperty(l)&&(p=p.concat(k(h,f,g[l],m+1)));return p}if("**"===b){(b=m+1===s||m+2===s&&"*"===a)&&g._listeners&&(p=p.concat(k(h,f,g,s)));for(l in g)"_listeners"!==l&&
g.hasOwnProperty(l)&&("*"===l||"**"===l?(g[l]._listeners&&!b&&(p=p.concat(k(h,f,g[l],s))),p=p.concat(k(h,f,g[l],m))):p=l===a?p.concat(k(h,f,g[l],m+2)):p.concat(k(h,f,g[l],m)));return p}p=p.concat(k(h,f,g[b],m+1))}(n=g["*"])&&k(h,f,n,m+1);if(g=g["**"])if(m<s)for(l in g._listeners&&k(h,f,g,s),g)"_listeners"!==l&&g.hasOwnProperty(l)&&(l===a?k(h,f,g[l],m+2):l===b?k(h,f,g[l],m+1):(s={},s[l]=g[l],k(h,f,{"**":s},m+1)));else g._listeners?k(h,f,g,s):g["*"]&&g["*"]._listeners&&k(h,f,g["*"],s);return p}var f=
Array.isArray?Array.isArray:function(h){return"[object Array]"===Object.prototype.toString.call(h)};WebApp.EventEmitter=function(h){this._events={};h&&(h.delimiter&&(this.delimiter=h.delimiter),h.wildcard&&(this.wildcard=h.wildcard),this.wildcard&&(this.listenerTree={}))};WebApp.EventEmitter.prototype.delimiter=".";WebApp.EventEmitter.prototype.setMaxListeners=function(h){this._events||(this._events={});this._events.maxListeners=h};WebApp.EventEmitter.prototype.event="";WebApp.EventEmitter.prototype.once=
function(h,f){this.many(h,1,f);return this};WebApp.EventEmitter.prototype.many=function(h,f,g){function m(){0===--f&&k.off(h,m);g.apply(this,arguments)}var k=this;if("function"!==typeof g)throw Error("many only accepts instances of Function");m._origin=g;this.on(h,m);return k};WebApp.EventEmitter.prototype.emit=function(){this._events||(this._events={});var h=arguments[0];if("newListener"===h&&!this._events.newListener)return!1;if(this._all){for(var f=arguments.length,g=Array(f-1),m=1;m<f;m++)g[m-
1]=arguments[m];m=0;for(f=this._all.length;m<f;m++)this.event=h,this._all[m].apply(this,g)}if("error"===h&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error)){if(arguments[1]instanceof Error)throw arguments[1];throw Error("Uncaught, unspecified 'error' event.");}var l;this.wildcard?(l=[],f="string"===typeof h?h.split(this.delimiter):h.slice(),k.call(this,l,f,this.listenerTree,0)):l=this._events[h];if("function"===typeof l){this.event=h;if(1===arguments.length)l.call(this);else if(1<
arguments.length)switch(arguments.length){case 2:l.call(this,arguments[1]);break;case 3:l.call(this,arguments[1],arguments[2]);break;default:f=arguments.length;g=Array(f-1);for(m=1;m<f;m++)g[m-1]=arguments[m];l.apply(this,g)}return!0}if(l){f=arguments.length;g=Array(f-1);for(m=1;m<f;m++)g[m-1]=arguments[m];l=l.slice();m=0;for(f=l.length;m<f;m++)this.event=h,l[m].apply(this,g);return 0<l.length||this._all}return this._all};WebApp.EventEmitter.prototype.on=function(h,g){if("function"===typeof h)return this.onAny(h),
this;if("function"!==typeof g)throw Error("on only accepts instances of Function");this._events||(this._events={});this.emit("newListener",h,g);if(this.wildcard){a:{for(var k=h,k="string"===typeof k?k.split(this.delimiter):k.slice(),m=0,l=k.length;m+1<l;m++)if("**"===k[m]&&"**"===k[m+1])break a;m=this.listenerTree;for(l=k.shift();l;){m[l]||(m[l]={});m=m[l];if(0===k.length){m._listeners?"function"===typeof m._listeners?m._listeners=[m._listeners,g]:f(m._listeners)&&(m._listeners.push(g),m._listeners.warned||
(k=10,"undefined"!==typeof this._events.maxListeners&&(k=this._events.maxListeners),0<k&&m._listeners.length>k&&(m._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",m._listeners.length),console.trace()))):m._listeners=g;break a}l=k.shift()}}return this}this._events[h]?"function"===typeof this._events[h]?this._events[h]=[this._events[h],g]:f(this._events[h])&&(this._events[h].push(g),
this._events[h].warned||(k=10,"undefined"!==typeof this._events.maxListeners&&(k=this._events.maxListeners),0<k&&this._events[h].length>k&&(this._events[h].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[h].length),console.trace()))):this._events[h]=g;return this};WebApp.EventEmitter.prototype.onAny=function(f){this._all||(this._all=[]);if("function"!==typeof f)throw Error("onAny only accepts instances of Function");
this._all.push(f);return this};WebApp.EventEmitter.prototype.addListener=WebApp.EventEmitter.prototype.on;WebApp.EventEmitter.prototype.off=function(h,g){if("function"!==typeof g)throw Error("removeListener only takes instances of Function");var l,m=[];if(this.wildcard)l="string"===typeof h?h.split(this.delimiter):h.slice(),m=k.call(this,null,l,this.listenerTree,0);else{if(!this._events[h])return this;l=this._events[h];m.push({_listeners:l})}for(var p=0;p<m.length;p++){var t=m[p];l=t._listeners;if(f(l)){for(var n=
-1,s=0,b=l.length;s<b;s++)if(l[s]===g||l[s].listener&&l[s].listener===g||l[s]._origin&&l[s]._origin===g){n=s;break}if(0>n)break;this.wildcard?t._listeners.splice(n,1):this._events[h].splice(n,1);0===l.length&&(this.wildcard?delete t._listeners:delete this._events[h])}else if(l===g||l.listener&&l.listener===g||l._origin&&l._origin===g)this.wildcard?delete t._listeners:delete this._events[h]}return this};WebApp.EventEmitter.prototype.offAny=function(f){var g=0,k=0,m;if(f&&this._all&&0<this._all.length)for(m=
this._all,g=0,k=m.length;g<k;g++){if(f===m[g]){m.splice(g,1);break}}else this._all=[];return this};WebApp.EventEmitter.prototype.removeListener=WebApp.EventEmitter.prototype.off;WebApp.EventEmitter.prototype.removeAllListeners=function(f){if(0===arguments.length)return this._events&&(this._events={}),this;if(this.wildcard)for(var g="string"===typeof f?f.split(this.delimiter):f.slice(),g=k.call(this,null,g,this.listenerTree,0),l=0;l<g.length;l++)g[l]._listeners=null;else{if(!this._events[f])return this;
this._events[f]=null}return this};WebApp.EventEmitter.prototype.listeners=function(g){if(this.wildcard){var l=[];g="string"===typeof g?g.split(this.delimiter):g.slice();k.call(this,l,g,this.listenerTree,0);return l}this._events||(this._events={});this._events[g]||(this._events[g]=[]);f(this._events[g])||(this._events[g]=[this._events[g]]);return this._events[g]};WebApp.EventEmitter.prototype.listenersAny=function(){return this._all?this._all:[]};"function"===typeof define&&define.amd?define(function(){return WebApp.EventEmitter}):
g.EventEmitter2=WebApp.EventEmitter}("undefined"!==typeof process&&"undefined"!==typeof process.title&&"undefined"!==typeof exports?exports:"undefined"!==typeof window?window:null);
WebApp.Model=function(){var g=function(f,g){this.code=f;this.type=g},l=function(){this.applications=[];this.key=null;this.players=[]},k=function(f,g,k){this.id=f;this.sourceId=g;this.method=k;this.message={}};this.State=l;this.Application=function(f,g,l,r,m,p,t,n,s,b,a,d){this.id=f;this.name=g;this.shortSynopsis=l;this.isAdult=r;this.isViewable=m;this.isEntitled=p;this.products=[];this.pictures=[];this.url=t;this.inFocus=n;this.windowId=s;this.viewState=b;this.state=a;this.type=d;this.appMsg=new k;
this.reservedKeys=[];this.appKeys=[];this.modelSets=[];this.media={assets:[]}};this.Player=function(f,h,k,l,m,p,t,n){this.currentChannel=this.source=f;this.playRate=h;this.position=k;this.window=l;this.zIndex=m;this.duration=p;this.status=null;this.availAudioLangs=[];this.availSubtitleLangs=[];this.audioLang=new g(t,n);this.subtitleLang=new g(t,n);this.teletextLang=new g(t,n);this.restricted=this.mapLoc=null;this.isBlocked=!1;this.nextProgram=this.currentProgram=null};this.channels=[];this.state=
new l;this.Channel=function(f,g,k,l,m,p,t,n){this.idx=f;this.id=g;this.locator=k;this.lcn=l;this.name=m;this.pictures=p;this.viewable=t;this.isFav=!1;this.plcn=0};this.keymap=new function(){this.VK_EXIT=3;this.VK_BACK_SPACE=8;this.VK_ENTER=this.VK_OK=13;this.VK_KEYBOARD=16;this.VK_ACCEPT=30;this.VK_SPACE=32;this.VK_PAGE_UP=33;this.VK_PAGE_DOWN=34;this.VK_HOME=36;this.VK_LEFT=37;this.VK_UP=38;this.VK_RIGHT=39;this.VK_DOWN=40;this.VK_0=48;this.VK_1=49;this.VK_2=50;this.VK_3=51;this.VK_4=52;this.VK_5=
53;this.VK_6=54;this.VK_7=55;this.VK_8=56;this.VK_9=57;this.VK_A=65;this.VK_B=66;this.VK_C=67;this.VK_D=68;this.VK_E=69;this.VK_F=70;this.VK_G=71;this.VK_H=72;this.VK_I=73;this.VK_J=74;this.VK_K=75;this.VK_L=76;this.VK_M=77;this.VK_N=78;this.VK_O=79;this.VK_P=80;this.VK_Q=81;this.VK_R=82;this.VK_S=83;this.VK_T=84;this.VK_U=85;this.VK_V=86;this.VK_W=87;this.VK_X=88;this.VK_Y=89;this.VK_Z=90;this.VK_RED=403;this.VK_GREEN=404;this.VK_BLUE=406;this.VK_YELLOW=405;this.VK_DELETE=127;this.VK_HELP=156;this.VK_POWER=
409;this.VK_CHANNEL_UP=427;this.VK_CHANNEL_DOWN=428;this.VK_VOLUME_UP=447;this.VK_VOLUME_DOWN=448;this.VK_MUTE=449;this.VK_INFO=457;this.VK_GUIDE=458;this.VK_BACK=461;this.VK_MENU=462;this.VK_PAUSE=19;this.VK_REW=412;this.VK_STOP=413;this.VK_PLAY=415;this.VK_REC=416;this.VK_FF=417;this.VK_REW_SKIP=424;this.VK_FWD_SKIP=425;this.VK_FAV=433;this.VK_TELETEXT=459;this.VK_SUBTITLE=460};this.MediaAsset=function(f,g,k,l,m,p,t,n,s,b,a,d,e){this.id=f;this.name=g;this.URL=k;this.picture=l;this.type=m;this.mimeType=
p;this.encoding=t;this.description=n;this.genre=s;this.date=b;this.size=a;this.duration=d;this.ageRating=e};this.AnnouncementEvent=function(f,g,k,l,m){this.type=f;this.time=g;this.message=k;this.imageURL=l;this.timeout=m};this.Announcement=function(f,g,k,l,m){this.event=f;this.id=g;this.name=k;this.image=l;this.url=m}};